(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3809383c"],{"0538":function(t,e,n){"use strict";var r=n("1c0b"),i=n("861d"),a=[].slice,o={},s=function(t,e,n){if(!(e in o)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";o[e]=Function("C,a","return new C("+r.join(",")+")")}return o[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),o=function(){var r=n.concat(a.call(arguments));return this instanceof o?s(e,r.length,r):e.apply(t,r)};return i(e.prototype)&&(o.prototype=e.prototype),o}},"0676":function(t,e){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n},"0c47":function(t,e,n){var r=n("da84"),i=n("d44e");i(r.JSON,"JSON",!0)},"0d73":function(t,e,n){"use strict";(function(t){n("d81d"),n("ac1f"),n("466d"),n("5319"),n("2ca0"),n("a15b");var r=n("278c"),i=n.n(r),a=(n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("a34a")),o=n.n(a),s=n("c973"),u=n.n(s),c=n("9523"),l=n.n(c),h=n("970b"),f=n.n(h),d=n("5bc3"),g=n.n(d),p=(n("99af"),n("a623"),n("13d5"),n("d3b7"),n("e6cf"),n("1276"),n("c449")),v=n.n(p),y=(n("b0c0"),n("58e1")),m=n.n(y),x=(n("4ae1"),n("25f0"),n("6b58")),b=n.n(x),w=n("36c6"),S=n.n(w),k=n("ed6d"),z=n.n(k),P=(n("a630"),n("caad"),n("45fc"),n("2532"),n("3ca3"),n("498a"),n("448a")),C=n.n(P),R=(n("c975"),n("26e9"),n("8962")),E=n.n(R),A=(n("a9e3"),n("cb29"),n("ac16"),n("3c96")),T=n.n(A),M=(n("e260"),n("ddb0"),n("e01a"),n("d28b"),n("fb6a"),n("4ec9"),n("a6fd"),n("7f78"),n("5e9e"));function _(t){return t.replace(/(?!\u3000)\s+/gm," ")}function D(t){return t.replace(/^[\n \t]+/,"")}function O(t){return t.replace(/[\n \t]+$/,"")}function V(t){var e=(t||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return e.map(parseFloat)}var H=/^[A-Z-]+$/;function N(t){return H.test(t)?t.toLowerCase():t}function I(t){var e=t.match(/url\(('([^']+)'|"([^"]+)"|([^'"\)]+))\)/)||[];return e[2]||e[3]||e[4]}function L(t){if(!t.startsWith("rgb"))return t;var e=3,n=t.replace(/\d+(\.\d+)?/g,(function(t,n){return e--&&n?String(Math.round(parseFloat(t))):t}));return n}var j=/(\[[^\]]+\])/g,W=/(#[^\s\+>~\.\[:]+)/g,$=/(\.[^\s\+>~\.\[:]+)/g,B=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,F=/(:[\w-]+\([^\)]*\))/gi,X=/(:[^\s\+>~\.\[:]+)/g,q=/([^\s\+>~\.\[:]+)/g;function G(t,e){var n=t.match(e);return n?[t.replace(e," "),n.length]:[t,0]}function Y(t){var e=[0,0,0],n=t.replace(/:not\(([^\)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),r=0,a=G(n,j),o=i()(a,2);n=o[0],r=o[1],e[1]+=r;var s=G(n,W),u=i()(s,2);n=u[0],r=u[1],e[0]+=r;var c=G(n,$),l=i()(c,2);n=l[0],r=l[1],e[1]+=r;var h=G(n,B),f=i()(h,2);n=f[0],r=f[1],e[2]+=r;var d=G(n,F),g=i()(d,2);n=g[0],r=g[1],e[1]+=r;var p=G(n,X),v=i()(p,2);n=v[0],r=v[1],e[1]+=r,n=n.replace(/[\*\s\+>~]/g," ").replace(/[#\.]/g," ");var y=G(n,q),m=i()(y,2);return n=m[0],r=m[1],e[2]+=r,e.join("")}var U=1e-8;function Z(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function Q(t,e){return(t[0]*e[0]+t[1]*e[1])/(Z(t)*Z(e))}function K(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Q(t,e))}function J(t){return t*t*t}function tt(t){return 3*t*t*(1-t)}function et(t){return 3*t*(1-t)*(1-t)}function nt(t){return(1-t)*(1-t)*(1-t)}function rt(t){return t*t}function it(t){return 2*t*(1-t)}function at(t){return(1-t)*(1-t)}function ot(t,e){return e={exports:{}},t(e,e.exports),e.exports}ot((function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n,r){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),o=new E(r||[]);return a._invoke=z(t,n,o),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=u;var l="suspendedStart",h="suspendedYield",f="executing",d="completed",g={};function p(){}function v(){}function y(){}var m={};m[a]=function(){return this};var x=Object.getPrototypeOf,b=x&&x(x(A([])));b&&b!==n&&r.call(b,a)&&(m=b);var w=y.prototype=p.prototype=Object.create(m);function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function k(t,e){function n(i,a,o,s){var u=c(t[i],t,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(h).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,s)}))}s(u.arg)}var i;function a(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}this._invoke=a}function z(t,e,n){var r=l;return function(i,a){if(r===f)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw a;return T()}n.method=i,n.arg=a;while(1){var o=n.delegate;if(o){var s=P(o,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}function P(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function A(t){if(t){var n=t[a];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){while(++i<t.length)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:T}}function T(){return{value:e,done:!0}}return v.prototype=w.constructor=y,y.constructor=v,y[s]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},S(k.prototype),k.prototype[o]=function(){return this},t.AsyncIterator=k,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new k(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(w),w[s]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=A,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(n){Function("r","regeneratorRuntime = r")(e)}}));var st=function(){function t(e,n,r){f()(this,t),this.document=e,this.name=n,this.value=r,this.isNormalizedColor=!1}return g()(t,[{key:"hasValue",value:function(){var t=this.value;return null!==t&&""!==t&&0!==t&&"undefined"!==typeof t}},{key:"isString",value:function(t){var e=this.value,n="string"===typeof e;return n&&t?t.test(e):n}},{key:"isUrlDefinition",value:function(){return this.isString(/^url\(/)}},{key:"isPixels",value:function(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case/px$/.test(t):case/^[0-9]+$/.test(t):return!0;default:return!1}}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"getValue",value:function(t){return"undefined"===typeof t||this.hasValue()?this.value:t}},{key:"getNumber",value:function(t){if(!this.hasValue())return"undefined"===typeof t?0:parseFloat(t);var e=this.value,n=parseFloat(e);return this.isString(/%$/)&&(n/=100),n}},{key:"getString",value:function(t){return"undefined"===typeof t||this.hasValue()?"undefined"===typeof this.value?"":String(this.value):String(t)}},{key:"getColor",value:function(t){var e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=L(e),this.value=e),e}},{key:"getDpi",value:function(){return 96}},{key:"getRem",value:function(){return this.document.rootEmSize}},{key:"getEm",value:function(){return this.document.emSize}},{key:"getUnits",value:function(){return this.getString().replace(/[0-9\.\-]/g,"")}},{key:"getPixels",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;var n="boolean"===typeof t?[void 0,t]:[t],r=i()(n,2),a=r[0],o=r[1],s=this.document.screen.viewPort;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(s.computeSize("x"),s.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(s.computeSize("x"),s.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*s.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*s.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&o:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*s.computeSize(a);default:var u=this.getNumber();return e&&u<1?u*s.computeSize(a):u}}},{key:"getMilliseconds",value:function(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}},{key:"getRadians",value:function(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}},{key:"getDefinition",value:function(){var t=this.getString(),e=t.match(/#([^\)'"]+)/);return e&&(e=e[1]),e||(e=t),this.document.definitions[e]}},{key:"getFillStyleDefinition",value:function(t,e){var n=this.getDefinition();if(!n)return null;if("function"===typeof n.createGradient)return n.createGradient(this.document.ctx,t,e);if("function"===typeof n.createPattern){if(n.getHrefAttribute().hasValue()){var r=n.getAttribute("patternTransform");n=n.getHrefAttribute().getDefinition(),r.hasValue()&&n.getAttribute("patternTransform",!0).setValue(r.value)}return n.createPattern(this.document.ctx,t,e)}return null}},{key:"getTextBaseline",value:function(){return this.hasValue()?t.textBaselineMapping[this.getString()]:null}},{key:"addOpacity",value:function(e){for(var n=this.getColor(),r=n.length,i=0,a=0;a<r;a++)if(","===n[a]&&i++,3===i)break;if(e.hasValue()&&this.isString()&&3!==i){var o=new m.a(n);o.ok&&(o.alpha=e.getNumber(),n=o.toRGBA())}return new t(this.document,this.name,n)}}],[{key:"empty",value:function(e){return new t(e,"EMPTY","")}}]),t}();st.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var ut=function(){function t(){f()(this,t),this.viewPorts=[]}return g()(t,[{key:"clear",value:function(){this.viewPorts=[]}},{key:"setCurrent",value:function(t,e){this.viewPorts.push({width:t,height:e})}},{key:"removeCurrent",value:function(){this.viewPorts.pop()}},{key:"getCurrent",value:function(){var t=this.viewPorts;return t[t.length-1]}},{key:"computeSize",value:function(t){return"number"===typeof t?t:"x"===t?this.width:"y"===t?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}},{key:"width",get:function(){return this.getCurrent().width}},{key:"height",get:function(){return this.getCurrent().height}}]),t}(),ct=function(){function t(e,n){f()(this,t),this.x=e,this.y=n}return g()(t,[{key:"angleTo",value:function(t){return Math.atan2(t.y-this.y,t.x-this.x)}},{key:"applyTransform",value:function(t){var e=this.x,n=this.y,r=e*t[0]+n*t[2]+t[4],i=e*t[1]+n*t[3]+t[5];this.x=r,this.y=i}}],[{key:"parse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=V(e),a=i()(r,2),o=a[0],s=void 0===o?n:o,u=a[1],c=void 0===u?n:u;return new t(s,c)}},{key:"parseScale",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=V(e),a=i()(r,2),o=a[0],s=void 0===o?n:o,u=a[1],c=void 0===u?s:u;return new t(s,c)}},{key:"parsePath",value:function(e){for(var n=V(e),r=n.length,i=[],a=0;a<r;a+=2)i.push(new t(n[a],n[a+1]));return i}}]),t}(),lt=function(){function t(e){f()(this,t),this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}return g()(t,[{key:"isWorking",value:function(){return this.working}},{key:"start",value:function(){if(!this.working){var t=this.screen,e=this.onClick,n=this.onMouseMove,r=t.ctx.canvas;r.onclick=e,r.onmousemove=n,this.working=!0}}},{key:"stop",value:function(){if(this.working){var t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}}},{key:"hasEvents",value:function(){return this.working&&this.events.length>0}},{key:"runEvents",value:function(){if(this.working){var t=this.screen,e=this.events,n=this.eventElements,r=t.ctx.canvas.style;r&&(r.cursor=""),e.forEach((function(t,e){var r=t.run,i=n[e];while(i)r(i),i=i.parent})),this.events=[],this.eventElements=[]}}},{key:"checkPath",value:function(t,e){if(this.working&&e){var n=this.events,r=this.eventElements;n.forEach((function(n,i){var a=n.x,o=n.y;!r[i]&&e.isPointInPath&&e.isPointInPath(a,o)&&(r[i]=t)}))}}},{key:"checkBoundingBox",value:function(t,e){if(this.working&&e){var n=this.events,r=this.eventElements;n.forEach((function(n,i){var a=n.x,o=n.y;!r[i]&&e.isPointInBox(a,o)&&(r[i]=t)}))}}},{key:"mapXY",value:function(t,e){var n=this.screen,r=n.window,i=n.ctx,a=new ct(t,e),o=i.canvas;while(o)a.x-=o.offsetLeft,a.y-=o.offsetTop,o=o.offsetParent;return r.scrollX&&(a.x+=r.scrollX),r.scrollY&&(a.y+=r.scrollY),a}},{key:"onClick",value:function(t){var e=this.mapXY((t||event).clientX,(t||event).clientY),n=e.x,r=e.y;this.events.push({type:"onclick",x:n,y:r,run:function(t){t.onClick&&t.onClick()}})}},{key:"onMouseMove",value:function(t){var e=this.mapXY((t||event).clientX,(t||event).clientY),n=e.x,r=e.y;this.events.push({type:"onmousemove",x:n,y:r,run:function(t){t.onMouseMove&&t.onMouseMove()}})}}]),t}(),ht="undefined"!==typeof window?window:null,ft="undefined"!==typeof fetch?fetch.bind(void 0):null,dt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.fetch,i=void 0===r?ft:r,a=n.window,o=void 0===a?ht:a;f()(this,t),this.ctx=e,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new ut,this.mouse=new lt(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=o,this.fetch=i}return g()(t,[{key:"wait",value:function(t){this.waits.push(t)}},{key:"ready",value:function(){return this.readyPromise?this.readyPromise:Promise.resolve()}},{key:"isReady",value:function(){if(this.isReadyLock)return!0;var t=this.waits.every((function(t){return t()}));return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}},{key:"setDefaults",value:function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}},{key:"setViewBox",value:function(t){var e=t.document,n=t.ctx,r=t.aspectRatio,a=t.width,o=t.desiredWidth,s=t.height,u=t.desiredHeight,c=t.minX,l=void 0===c?0:c,h=t.minY,f=void 0===h?0:h,d=t.refX,g=t.refY,p=t.clip,v=void 0!==p&&p,y=t.clipX,m=void 0===y?0:y,x=t.clipY,b=void 0===x?0:x,w=_(r).replace(/^defer\s/,""),S=w.split(" "),k=i()(S,2),z=k[0],P=k[1],C=z||"xMidYMid",R=P||"meet",E=a/o,A=s/u,T=Math.min(E,A),M=Math.max(E,A),D=o,O=u;"meet"===R&&(D*=T,O*=T),"slice"===R&&(D*=M,O*=M);var V=new st(e,"refX",d),H=new st(e,"refY",g),N=V.hasValue()&&H.hasValue();if(N&&n.translate(-T*V.getPixels("x"),-T*H.getPixels("y")),v){var I=T*m,L=T*b;n.beginPath(),n.moveTo(I,L),n.lineTo(a,L),n.lineTo(a,s),n.lineTo(I,s),n.closePath(),n.clip()}if(!N){var j="meet"===R&&T===A,W="slice"===R&&M===A,$="meet"===R&&T===E,B="slice"===R&&M===E;/^xMid/.test(C)&&(j||W)&&n.translate(a/2-D/2,0),/YMid$/.test(C)&&($||B)&&n.translate(0,s/2-O/2),/^xMax/.test(C)&&(j||W)&&n.translate(a-D,0),/YMax$/.test(C)&&($||B)&&n.translate(0,s-O)}switch(!0){case"none"===C:n.scale(E,A);break;case"meet"===R:n.scale(T,T);break;case"slice"===R:n.scale(M,M);break}n.translate(-l,-f)}},{key:"start",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enableRedraw,i=void 0!==r&&r,a=n.ignoreMouse,o=void 0!==a&&a,s=n.ignoreAnimation,u=void 0!==s&&s,c=n.ignoreDimensions,l=void 0!==c&&c,h=n.ignoreClear,f=void 0!==h&&h,d=n.forceRedraw,g=n.scaleWidth,p=n.scaleHeight,y=n.offsetX,m=n.offsetY,x=this.FRAMERATE,b=this.mouse,w=1e3/x;if(this.frameDuration=w,this.readyPromise=new Promise((function(t){e.resolveReady=t})),this.isReady()&&this.render(t,l,f,g,p,y,m),i){var S=Date.now(),k=S,z=0,P=function n(){S=Date.now(),z=S-k,z>=w&&(k=S-z%w,e.shouldUpdate(u,d)&&(e.render(t,l,f,g,p,y,m),b.runEvents())),e.intervalId=v()(n)};o||b.start(),this.intervalId=v()(P)}}},{key:"stop",value:function(){this.intervalId&&(v.a.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}},{key:"shouldUpdate",value:function(t,e){if(!t){var n=this.frameDuration,r=this.animations.reduce((function(t,e){return e.update(n)||t}),!1);if(r)return!0}return!("function"!==typeof e||!e())||(!(this.isReadyLock||!this.isReady())||!!this.mouse.hasEvents())}},{key:"render",value:function(t,e,n,r,i,a,o){var s=this.CLIENT_WIDTH,u=this.CLIENT_HEIGHT,c=this.viewPort,l=this.ctx,h=this.isFirstRender,f=l.canvas;c.clear(),f.width&&f.height?c.setCurrent(f.width,f.height):c.setCurrent(s,u);var d=t.getStyle("width"),g=t.getStyle("height");!e&&(h||"number"!==typeof r&&"number"!==typeof i)&&(d.hasValue()&&(f.width=d.getPixels("x"),f.style&&(f.style.width="".concat(f.width,"px"))),g.hasValue()&&(f.height=g.getPixels("y"),f.style&&(f.style.height="".concat(f.height,"px"))));var p=f.clientWidth||f.width,v=f.clientHeight||f.height;if(e&&d.hasValue()&&g.hasValue()&&(p=d.getPixels("x"),v=g.getPixels("y")),c.setCurrent(p,v),"number"===typeof a&&t.getAttribute("x",!0).setValue(a),"number"===typeof o&&t.getAttribute("y",!0).setValue(o),"number"===typeof r||"number"===typeof i){var y=V(t.getAttribute("viewBox").getString()),m=0,x=0;if("number"===typeof r){var b=t.getStyle("width");b.hasValue()?m=b.getPixels("x")/r:isNaN(y[2])||(m=y[2]/r)}if("number"===typeof i){var w=t.getStyle("height");w.hasValue()?x=w.getPixels("y")/i:isNaN(y[3])||(x=y[3]/i)}m||(m=x),x||(x=m),t.getAttribute("width",!0).setValue(r),t.getAttribute("height",!0).setValue(i);var S=t.getStyle("transform",!0,!0);S.setValue("".concat(S.getString()," scale(").concat(1/m,", ").concat(1/x,")"))}n||l.clearRect(0,0,p,v),t.render(l),h&&(this.isFirstRender=!1)}}]),t}();dt.defaultWindow=ht,dt.defaultFetch=ft;var gt=dt.defaultFetch,pt="undefined"!==typeof DOMParser?DOMParser:null,vt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.fetch,r=void 0===n?gt:n,i=e.DOMParser,a=void 0===i?pt:i;f()(this,t),this.fetch=r,this.DOMParser=a}return g()(t,[{key:"parse",value:function(){var t=u()(o.a.mark((function t(e){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!/^</.test(e)){t.next=2;break}return t.abrupt("return",this.parseFromString(e));case 2:return t.abrupt("return",this.load(e));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"parseFromString",value:function(t){var e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch(n){return this.checkDocument(e.parseFromString(t,"text/xml"))}}},{key:"checkDocument",value:function(t){var e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent);return t}},{key:"load",value:function(){var t=u()(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetch(e);case 2:return n=t.sent,t.next=5,n.text();case 5:return r=t.sent,t.abrupt("return",this.parseFromString(r));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),yt=function(){function t(e,n){f()(this,t),this.type="translate",this.point=null,this.point=ct.parse(n)}return g()(t,[{key:"apply",value:function(t){var e=this.point,n=e.x,r=e.y;t.translate(n||0,r||0)}},{key:"unapply",value:function(t){var e=this.point,n=e.x,r=e.y;t.translate(-1*n||0,-1*r||0)}},{key:"applyToPoint",value:function(t){var e=this.point,n=e.x,r=e.y;t.applyTransform([1,0,0,1,n||0,r||0])}}]),t}(),mt=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];f()(this,t),this.type="rotate",this.angle=null,this.cx=0,this.cy=0;var i=V(n);this.angle=new st(e,"angle",i[0]),this.cx=(i[1]||0)+(r[0]||0),this.cy=(i[2]||0)+(r[1]||0)}return g()(t,[{key:"apply",value:function(t){var e=this.cx,n=this.cy,r=this.angle;t.translate(e,n),t.rotate(r.getRadians()),t.translate(-e,-n)}},{key:"unapply",value:function(t){var e=this.cx,n=this.cy,r=this.angle;t.translate(e,n),t.rotate(-1*r.getRadians()),t.translate(-e,-n)}},{key:"applyToPoint",value:function(t){var e=this.cx,n=this.cy,r=this.angle,i=r.getRadians();t.applyTransform([1,0,0,1,e||0,n||0]),t.applyTransform([Math.cos(i),Math.sin(i),-Math.sin(i),Math.cos(i),0,0]),t.applyTransform([1,0,0,1,-e||0,-n||0])}}]),t}(),xt=function(){function t(e,n){f()(this,t),this.type="scale",this.scale=null;var r=ct.parseScale(n);0!==r.x&&0!==r.y||(r.x=U,r.y=U),this.scale=r}return g()(t,[{key:"apply",value:function(t){var e=this.scale,n=e.x,r=e.y;t.scale(n,r||n)}},{key:"unapply",value:function(t){var e=this.scale,n=e.x,r=e.y;t.scale(1/n,1/r||n)}},{key:"applyToPoint",value:function(t){var e=this.scale,n=e.x,r=e.y;t.applyTransform([n||0,0,0,r||0,0,0])}}]),t}(),bt=function(){function t(e,n){f()(this,t),this.type="matrix",this.matrix=[],this.matrix=V(n)}return g()(t,[{key:"apply",value:function(t){var e=this.matrix;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},{key:"unapply",value:function(t){var e=this.matrix,n=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],u=0,c=0,l=1,h=1/(n*(o*l-s*c)-r*(a*l-s*u)+i*(a*c-o*u));t.transform(h*(o*l-s*c),h*(s*u-a*l),h*(i*c-r*l),h*(n*l-i*u),h*(r*s-i*o),h*(i*a-n*s))}},{key:"applyToPoint",value:function(t){t.applyTransform(this.matrix)}}]),t}();function wt(t){return function(){var e,n=S()(t);if(St()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function St(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var kt=function(t){z()(n,t);var e=wt(n);function n(t,r){var i;return f()(this,n),i=e.call(this,t,r),i.type="skew",i.angle=null,i.angle=new st(t,"angle",r),i}return n}(bt);function zt(t){return function(){var e,n=S()(t);if(Pt()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Pt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ct=function(t){z()(n,t);var e=zt(n);function n(t,r){var i;return f()(this,n),i=e.call(this,t,r),i.type="skewX",i.matrix=[1,0,Math.tan(i.angle.getRadians()),1,0,0],i}return n}(kt);function Rt(t){return function(){var e,n=S()(t);if(Et()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Et(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var At=function(t){z()(n,t);var e=Rt(n);function n(t,r){var i;return f()(this,n),i=e.call(this,t,r),i.type="skewY",i.matrix=[1,Math.tan(i.angle.getRadians()),0,1,0,0],i}return n}(kt);function Tt(t){return _(t).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function Mt(t){var e=t.split("("),n=i()(e,2),r=n[0],a=n[1];return[r.trim(),a.trim().replace(")","")]}var _t=function(){function t(e,n,r){var a=this;f()(this,t),this.document=e,this.transforms=[];var o=Tt(n),s=r?V(r):[];o.forEach((function(e){if("none"!==e){var n=Mt(e),r=i()(n,2),o=r[0],u=r[1],c=t.transformTypes[o];"undefined"!==typeof c&&a.transforms.push(new c(a.document,u,s))}}))}return g()(t,[{key:"apply",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].apply(t)}},{key:"unapply",value:function(t){for(var e=this.transforms,n=e.length,r=n-1;r>=0;r--)e[r].unapply(t)}},{key:"applyToPoint",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].applyToPoint(t)}}],[{key:"fromElement",value:function(e,n){var r=n.getStyle("transform",!1,!0),i=n.getStyle("transform-origin",!1,!0);return r.hasValue()?new t(e,r.getString(),i.getString()):null}}]),t}();_t.transformTypes={translate:yt,rotate:mt,scale:xt,matrix:bt,skewX:Ct,skewY:At};var Dt=function(){function t(e,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(f()(this,t),this.document=e,this.node=n,this.captureTextNodes=a,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],n&&1===n.nodeType){if(Array.from(n.attributes).forEach((function(t){var n=N(t.nodeName);r.attributes[n]=new st(e,n,t.value)})),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var o=this.getAttribute("style").getString().split(";").map((function(t){return t.trim()}));o.forEach((function(t){if(t){var n=t.split(":").map((function(t){return t.trim()})),a=i()(n,2),o=a[0],s=a[1];r.styles[o]=new st(e,o,s)}}))}var s=e.definitions,u=this.getAttribute("id");u.hasValue()&&(s[u.getValue()]||(s[u.getValue()]=this)),Array.from(n.childNodes).forEach((function(t){if(1===t.nodeType)r.addChild(t);else if(a&&(3===t.nodeType||4===t.nodeType)){var n=e.createTextNode(t);n.getText().length>0&&r.addChild(n)}}))}}return g()(t,[{key:"getAttribute",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.attributes[t];if(!n&&e){var r=new st(this.document,t,"");return this.attributes[t]=r,r}return n||st.empty(this.document)}},{key:"getHrefAttribute",value:function(){for(var t in this.attributes)if("href"===t||/:href$/.test(t))return this.attributes[t];return st.empty(this.document)}},{key:"getStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.styles[t];if(r)return r;var i=this.getAttribute(t);if(i&&i.hasValue())return this.styles[t]=i,i;if(!n){var a=this.parent;if(a){var o=a.getStyle(t);if(o&&o.hasValue())return o}}if(e){var s=new st(this.document,t,"");return this.styles[t]=s,s}return r||st.empty(this.document)}},{key:"render",value:function(t){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(t.save(),this.getStyle("mask").hasValue()){var e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if("none"!==this.getStyle("filter").getValue("none")){var n=this.getStyle("filter").getDefinition();n&&(this.applyEffects(t),n.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}},{key:"setContext",value:function(t){}},{key:"applyEffects",value:function(t){var e=_t.fromElement(this.document,this);e&&e.apply(t);var n=this.getStyle("clip-path",!1,!0);if(n.hasValue()){var r=n.getDefinition();r&&r.apply(t)}}},{key:"clearContext",value:function(t){}},{key:"renderChildren",value:function(t){this.children.forEach((function(e){e.render(t)}))}},{key:"addChild",value:function(e){var n=e instanceof t?e:this.document.createElement(e);n.parent=this,t.ignoreChildTypes.includes(n.type)||this.children.push(n)}},{key:"matchesSelector",value:function(t){var e=this.node;if("function"===typeof e.matches)return e.matches(t);var n=e.getAttribute("class");return!(!n||""===n)&&n.split(" ").some((function(e){if(".".concat(e)===t)return!0}))}},{key:"addStylesFromStyleDefinition",value:function(){var t=this.document,e=t.styles,n=t.stylesSpecificity;for(var r in e)if("@"!==r[0]&&this.matchesSelector(r)){var i=e[r],a=n[r];if(i)for(var o in i){var s=this.stylesSpecificity[o];"undefined"===typeof s&&(s="000"),a>=s&&(this.styles[o]=i[o],this.stylesSpecificity[o]=a)}}}},{key:"removeStyles",value:function(t,e){var n=e.reduce((function(e,n){var r=t.getStyle(n);if(!r.hasValue())return e;var i=r.getString();return r.setValue(""),[].concat(C()(e),[[n,i]])}),[]);return n}},{key:"restoreStyles",value:function(t,e){e.forEach((function(e){var n=i()(e,2),r=n[0],a=n[1];t.getStyle(r,!0).setValue(a)}))}}]),t}();function Ot(t){return function(){var e,n=S()(t);if(Vt()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Vt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}Dt.ignoreChildTypes=["title"];var Ht=function(t){z()(n,t);var e=Ot(n);function n(t,r,i){var a;return f()(this,n),a=e.call(this,t,r,i),a}return n}(Dt);function Nt(t){var e=t.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function It(e){return"undefined"===typeof t?e:e.trim().split(",").map(Nt).join(",")}function Lt(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}function jt(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}var Wt=function(){function t(e,n,r,i,a,o){f()(this,t);var s=o?"string"===typeof o?t.parse(o):o:{};this.fontFamily=a||s.fontFamily,this.fontSize=i||s.fontSize,this.fontStyle=e||s.fontStyle,this.fontWeight=r||s.fontWeight,this.fontVariant=n||s.fontVariant}return g()(t,[{key:"toString",value:function(){return[Lt(this.fontStyle),this.fontVariant,jt(this.fontWeight),this.fontSize,It(this.fontFamily)].join(" ").trim()}}],[{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,r="",a="",o="",s="",u="",c=_(e).trim().split(" "),l={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return c.forEach((function(e){switch(!0){case!l.fontStyle&&t.styles.includes(e):"inherit"!==e&&(r=e),l.fontStyle=!0;break;case!l.fontVariant&&t.variants.includes(e):"inherit"!==e&&(a=e),l.fontStyle=!0,l.fontVariant=!0;break;case!l.fontWeight&&t.weights.includes(e):"inherit"!==e&&(o=e),l.fontStyle=!0,l.fontVariant=!0,l.fontWeight=!0;break;case!l.fontSize:if("inherit"!==e){var n=e.split("/"),c=i()(n,1);s=c[0]}l.fontStyle=!0,l.fontVariant=!0,l.fontWeight=!0,l.fontSize=!0;break;default:"inherit"!==e&&(u+=e)}})),new t(r,a,o,s,u,n)}}]),t}();Wt.styles="normal|italic|oblique|inherit",Wt.variants="normal|small-caps|inherit",Wt.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var $t=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.NaN;f()(this,t),this.x1=e,this.y1=n,this.x2=r,this.y2=i,this.addPoint(e,n),this.addPoint(r,i)}return g()(t,[{key:"addPoint",value:function(t,e){"undefined"!==typeof t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),"undefined"!==typeof e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}},{key:"addX",value:function(t){this.addPoint(t,null)}},{key:"addY",value:function(t){this.addPoint(null,t)}},{key:"addBoundingBox",value:function(t){if(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2;this.addPoint(e,n),this.addPoint(r,i)}}},{key:"sumCubic",value:function(t,e,n,r,i){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*n+3*(1-t)*Math.pow(t,2)*r+Math.pow(t,3)*i}},{key:"bezierCurveAdd",value:function(t,e,n,r,i){var a=6*e-12*n+6*r,o=-3*e+9*n-9*r+3*i,s=3*n-3*e;if(0!==o){var u=Math.pow(a,2)-4*s*o;if(!(u<0)){var c=(-a+Math.sqrt(u))/(2*o);0<c&&c<1&&(t?this.addX(this.sumCubic(c,e,n,r,i)):this.addY(this.sumCubic(c,e,n,r,i)));var l=(-a-Math.sqrt(u))/(2*o);0<l&&l<1&&(t?this.addX(this.sumCubic(l,e,n,r,i)):this.addY(this.sumCubic(l,e,n,r,i)))}}else{if(0===a)return;var h=-s/a;0<h&&h<1&&(t?this.addX(this.sumCubic(h,e,n,r,i)):this.addY(this.sumCubic(h,e,n,r,i)))}}},{key:"addBezierCurve",value:function(t,e,n,r,i,a,o,s){this.addPoint(t,e),this.addPoint(o,s),this.bezierCurveAdd(!0,t,n,i,o),this.bezierCurveAdd(!1,e,r,a,s)}},{key:"addQuadraticCurve",value:function(t,e,n,r,i,a){var o=t+2/3*(n-t),s=e+2/3*(r-e),u=o+1/3*(i-t),c=s+1/3*(a-e);this.addBezierCurve(t,e,o,u,s,c,i,a)}},{key:"isPointInBox",value:function(t,e){var n=this.x1,r=this.y1,i=this.x2,a=this.y2;return n<=t&&t<=i&&r<=e&&e<=a}},{key:"x",get:function(){return this.x1}},{key:"y",get:function(){return this.y1}},{key:"width",get:function(){return this.x2-this.x1}},{key:"height",get:function(){return this.y2-this.y1}}]),t}();function Bt(t){return function(){var e,n=S()(t);if(Ft()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Ft(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Xt=function(t){z()(n,t);var e=Bt(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.modifiedEmSizeStack=!1,t}return g()(n,[{key:"calculateOpacity",value:function(){var t=1,e=this;while(e){var n=e.getStyle("opacity",!1,!0);n.hasValue()&&(t*=n.getNumber()),e=e.parent}return t}},{key:"setContext",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e){var n=this.getStyle("fill"),r=this.getStyle("fill-opacity"),i=this.getStyle("stroke"),a=this.getStyle("stroke-opacity");if(n.isUrlDefinition()){var o=n.getFillStyleDefinition(this,r);o&&(t.fillStyle=o)}else if(n.hasValue()){"currentColor"===n.getString()&&n.setValue(this.getStyle("color").getColor());var s=n.getColor();"inherit"!==s&&(t.fillStyle="none"===s?"rgba(0,0,0,0)":s)}if(r.hasValue()){var u=new st(this.document,"fill",t.fillStyle).addOpacity(r).getColor();t.fillStyle=u}if(i.isUrlDefinition()){var c=i.getFillStyleDefinition(this,a);c&&(t.strokeStyle=c)}else if(i.hasValue()){"currentColor"===i.getString()&&i.setValue(this.getStyle("color").getColor());var l=i.getString();"inherit"!==l&&(t.strokeStyle="none"===l?"rgba(0,0,0,0)":l)}if(a.hasValue()){var h=new st(this.document,"stroke",t.strokeStyle).addOpacity(a).getString();t.strokeStyle=h}var f=this.getStyle("stroke-width");if(f.hasValue()){var d=f.getPixels();t.lineWidth=d||U}var g=this.getStyle("stroke-linecap"),p=this.getStyle("stroke-linejoin"),v=this.getStyle("stroke-miterlimit"),y=this.getStyle("paint-order"),m=this.getStyle("stroke-dasharray"),x=this.getStyle("stroke-dashoffset");if(g.hasValue()&&(t.lineCap=g.getString()),p.hasValue()&&(t.lineJoin=p.getString()),v.hasValue()&&(t.miterLimit=v.getNumber()),y.hasValue()&&(t.paintOrder=y.getValue()),m.hasValue()&&"none"!==m.getString()){var b=V(m.getString());"undefined"!==typeof t.setLineDash?t.setLineDash(b):"undefined"!==typeof t.webkitLineDash?t.webkitLineDash=b:"undefined"===typeof t.mozDash||1===b.length&&0===b[0]||(t.mozDash=b);var w=x.getPixels();"undefined"!==typeof t.lineDashOffset?t.lineDashOffset=w:"undefined"!==typeof t.webkitLineDashOffset?t.webkitLineDashOffset=w:"undefined"!==typeof t.mozDashOffset&&(t.mozDashOffset=w)}}if(this.modifiedEmSizeStack=!1,"undefined"!==typeof t.font){var S=this.getStyle("font"),k=this.getStyle("font-style"),z=this.getStyle("font-variant"),P=this.getStyle("font-weight"),C=this.getStyle("font-size"),R=this.getStyle("font-family"),E=new Wt(k.getString(),z.getString(),P.getString(),C.hasValue()?"".concat(C.getPixels(!0),"px"):"",R.getString(),Wt.parse(S.getString(),t.font));k.setValue(E.fontStyle),z.setValue(E.fontVariant),P.setValue(E.fontWeight),C.setValue(E.fontSize),R.setValue(E.fontFamily),t.font=E.toString(),C.isPixels()&&(this.document.emSize=C.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}},{key:"clearContext",value:function(t){E()(S()(n.prototype),"clearContext",this).call(this,t),this.modifiedEmSizeStack&&this.document.popEmSize()}}]),n}(Dt);function qt(t){return function(){var e,n=S()(t);if(Gt()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Gt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Yt=function(t){z()(n,t);var e=qt(n);function n(t,r,i){var a;return f()(this,n),a=e.call(this,t,r,(this instanceof n?this.constructor:void 0)===n||i),a.type="text",a.x=0,a.y=0,a.measureCache=-1,a}return g()(n,[{key:"setContext",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];E()(S()(n.prototype),"setContext",this).call(this,t,e);var r=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();r&&(t.textBaseline=r)}},{key:"initializeCoordinates",value:function(t){this.x=this.getAttribute("x").getPixels("x"),this.y=this.getAttribute("y").getPixels("y");var e=this.getAttribute("dx"),n=this.getAttribute("dy");e.hasValue()&&(this.x+=e.getPixels("x")),n.hasValue()&&(this.y+=n.getPixels("y")),this.x+=this.getAnchorDelta(t,this,0)}},{key:"getBoundingBox",value:function(t){var e=this;if("text"!==this.type)return this.getTElementBoundingBox(t);this.initializeCoordinates(t);var n=null;return this.children.forEach((function(r,i){var a=e.getChildBoundingBox(t,e,e,i);n?n.addBoundingBox(a):n=a})),n}},{key:"getFontSize",value:function(){var t=this.document,e=this.parent,n=Wt.parse(t.ctx.font).fontSize,r=e.getStyle("font-size").getNumber(n);return r}},{key:"getTElementBoundingBox",value:function(t){var e=this.getFontSize();return new $t(this.x,this.y-e,this.x+this.measureText(t),this.y)}},{key:"getGlyph",value:function(t,e,n){var r=e[n],i=null;if(t.isArabic){var a=e.length,o=e[n-1],s=e[n+1],u="isolated";(0===n||" "===o)&&n<a-2&&" "!==s&&(u="terminal"),n>0&&" "!==o&&n<a-2&&" "!==s&&(u="medial"),n>0&&" "!==o&&(n===a-1||" "===s)&&(u="initial"),"undefined"!==typeof t.glyphs[r]&&(i=t.glyphs[r][u],i||"glyph"!==t.glyphs[r].type||(i=t.glyphs[r]))}else i=t.glyphs[r];return i||(i=t.missingGlyph),i}},{key:"getText",value:function(){return""}},{key:"getTextFromNode",value:function(t){var e=t||this.node,n=Array.from(e.parentNode.childNodes),r=n.indexOf(e),i=n.length-1,a=_(e.value||e.text||e.textContent||"");return 0===r&&(a=D(a)),r===i&&(a=O(a)),a}},{key:"renderChildren",value:function(t){var e=this;if("text"===this.type){this.initializeCoordinates(t),this.children.forEach((function(n,r){e.renderChild(t,e,e,r)}));var n=this.document.screen.mouse;n.isWorking()&&n.checkBoundingBox(this,this.getBoundingBox(t))}else this.renderTElementChildren(t)}},{key:"renderTElementChildren",value:function(t){var e=this.document,n=this.parent,r=this.getText(),i=n.getStyle("font-family").getDefinition();if(i)for(var a=i.fontFace.unitsPerEm,o=Wt.parse(e.ctx.font),s=n.getStyle("font-size").getNumber(o.fontSize),u=n.getStyle("font-style").getString(o.fontStyle),c=s/a,l=i.isRTL?r.split("").reverse().join(""):r,h=V(n.getAttribute("dx").getString()),f=l.length,d=0;d<f;d++){var g=this.getGlyph(i,l,d);t.translate(this.x,this.y),t.scale(c,-c);var p=t.lineWidth;t.lineWidth=t.lineWidth*a/s,"italic"===u&&t.transform(1,0,.4,1,0,0),g.render(t),"italic"===u&&t.transform(1,0,-.4,1,0,0),t.lineWidth=p,t.scale(1/c,-1/c),t.translate(-this.x,-this.y),this.x+=s*(g.horizAdvX||i.horizAdvX)/a,"undefined"===typeof h[d]||isNaN(h[d])||(this.x+=h[d])}else{var v=this.x,y=this.y;"stroke"===t.paintOrder?(t.strokeStyle&&t.strokeText(r,v,y),t.fillStyle&&t.fillText(r,v,y)):(t.fillStyle&&t.fillText(r,v,y),t.strokeStyle&&t.strokeText(r,v,y))}}},{key:"getAnchorDelta",value:function(t,e,n){var r=this.getStyle("text-anchor").getString("start");if("start"!==r){for(var i=e.children,a=i.length,o=null,s=0,u=n;u<a;u++){if(o=i[u],u>n&&o.getAttribute("x").hasValue()||o.getAttribute("text-anchor").hasValue())break;s+=o.measureTextRecursive(t)}return-1*("end"===r?s:s/2)}return 0}},{key:"adjustChildCoordinates",value:function(t,e,n,r){var i=n.children[r];if("function"!==typeof i.measureText)return i;t.save(),i.setContext(t,!0);var a=i.getAttribute("x"),o=i.getAttribute("y"),s=i.getAttribute("dx"),u=i.getAttribute("dy"),c=i.getAttribute("text-anchor").getString("start");if(0===r&&"textNode"!==i.type&&(a.hasValue()||a.setValue(e.getAttribute("x").getValue("0")),o.hasValue()||o.setValue(e.getAttribute("y").getValue("0")),s.hasValue()||s.setValue(e.getAttribute("dx").getValue("0")),u.hasValue()||u.setValue(e.getAttribute("dy").getValue("0"))),a.hasValue()){if(i.x=a.getPixels("x")+e.getAnchorDelta(t,n,r),"start"!==c){var l=i.measureTextRecursive(t);i.x+=-1*("end"===c?l:l/2)}s.hasValue()&&(i.x+=s.getPixels("x"))}else{if("start"!==c){var h=i.measureTextRecursive(t);e.x+=-1*("end"===c?h:h/2)}s.hasValue()&&(e.x+=s.getPixels("x")),i.x=e.x}return e.x=i.x+i.measureText(t),o.hasValue()?(i.y=o.getPixels("y"),u.hasValue()&&(i.y+=u.getPixels("y"))):(u.hasValue()&&(e.y+=u.getPixels("y")),i.y=e.y),e.y=i.y,i.clearContext(t),t.restore(),i}},{key:"getChildBoundingBox",value:function(t,e,n,r){var i=this.adjustChildCoordinates(t,e,n,r),a=i.getBoundingBox(t);return a?(i.children.forEach((function(n,r){var o=e.getChildBoundingBox(t,e,i,r);a.addBoundingBox(o)})),a):null}},{key:"renderChild",value:function(t,e,n,r){var i=this.adjustChildCoordinates(t,e,n,r);i.render(t),i.children.forEach((function(n,r){e.renderChild(t,e,i,r)}))}},{key:"measureTextRecursive",value:function(t){var e=this.children.reduce((function(e,n){return e+n.measureTextRecursive(t)}),this.measureText(t));return e}},{key:"measureText",value:function(t){var e=this.measureCache;if(~e)return e;var n=this.getText(),r=this.measureTargetText(t,n);return this.measureCache=r,r}},{key:"measureTargetText",value:function(t,e){if(!e.length)return 0;var n=this.parent,r=n.getStyle("font-family").getDefinition();if(r){for(var i=this.getFontSize(),a=r.isRTL?e.split("").reverse().join(""):e,o=V(n.getAttribute("dx").getString()),s=a.length,u=0,c=0;c<s;c++){var l=this.getGlyph(r,a,c);u+=(l.horizAdvX||r.horizAdvX)*i/r.fontFace.unitsPerEm,"undefined"===typeof o[c]||isNaN(o[c])||(u+=o[c])}return u}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);var h=t.measureText(e),f=h.width;return this.clearContext(t),t.restore(),f}}]),n}(Xt);function Ut(t){return function(){var e,n=S()(t);if(Zt()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Zt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Qt=function(t){z()(n,t);var e=Ut(n);function n(t,r,i){var a;return f()(this,n),a=e.call(this,t,r,(this instanceof n?this.constructor:void 0)===n||i),a.type="tspan",a.text=a.children.length>0?"":a.getTextFromNode(),a}return g()(n,[{key:"getText",value:function(){return this.text}}]),n}(Yt);function Kt(t){return function(){var e,n=S()(t);if(Jt()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Jt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var te=function(t){z()(n,t);var e=Kt(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="textNode",t}return n}(Qt);function ee(t){var e=t.replace(/,/gm," ").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2").replace(/([0-9])([+\-])/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/([Aa](?:\s+(?:[0-9]*\.)?[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $2 $3 ");return _(e).trim()}var ne=function(){function t(e){f()(this,t),this.control=null,this.start=null,this.current=null,this.command="",this.tokens=[],this.i=-1,this.previousCommand="",this.points=[],this.angles=[],this.tokens=ee(e).split(" ")}return g()(t,[{key:"reset",value:function(){this.i=-1,this.command="",this.previousCommand="",this.start=new ct(0,0),this.control=new ct(0,0),this.current=new ct(0,0),this.points=[],this.angles=[]}},{key:"isEnd",value:function(){var t=this.i,e=this.tokens;return t>=e.length-1}},{key:"isCommandOrEnd",value:function(){if(this.isEnd())return!0;var t=this.i,e=this.tokens;return/^[A-Za-z]$/.test(e[t+1])}},{key:"isRelativeCommand",value:function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0;default:return!1}}},{key:"getToken",value:function(){return this.i++,this.tokens[this.i]}},{key:"getScalar",value:function(){return parseFloat(this.getToken())}},{key:"nextCommand",value:function(){this.previousCommand=this.command,this.command=this.getToken()}},{key:"getPoint",value:function(){var t=new ct(this.getScalar(),this.getScalar());return this.makeAbsolute(t)}},{key:"getAsControlPoint",value:function(){var t=this.getPoint();return this.control=t,t}},{key:"getAsCurrentPoint",value:function(){var t=this.getPoint();return this.current=t,t}},{key:"getReflectedControlPoint",value:function(){var t=this.previousCommand.toLowerCase();if("c"!==t&&"s"!==t&&"q"!==t&&"t"!==t)return this.current;var e=this.current,n=e.x,r=e.y,i=this.control,a=i.x,o=i.y,s=new ct(2*n-a,2*r-o);return s}},{key:"makeAbsolute",value:function(t){if(this.isRelativeCommand()){var e=this.current,n=e.x,r=e.y;t.x+=n,t.y+=r}return t}},{key:"addMarker",value:function(t,e,n){var r=this.points,i=this.angles;n&&i.length>0&&!i[i.length-1]&&(i[i.length-1]=r[r.length-1].angleTo(n)),this.addMarkerAngle(t,e?e.angleTo(t):null)}},{key:"addMarkerAngle",value:function(t,e){this.points.push(t),this.angles.push(e)}},{key:"getMarkerPoints",value:function(){return this.points}},{key:"getMarkerAngles",value:function(){for(var t=this.angles,e=t.length,n=0;n<e;n++)if(!t[n])for(var r=n+1;r<e;r++)if(t[r]){t[n]=t[r];break}return t}}]),t}();function re(t){return function(){var e,n=S()(t);if(ie()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function ie(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ae=function(t){z()(n,t);var e=re(n);function n(t,r,i){var a;return f()(this,n),a=e.call(this,t,r,i),a.type="path",a.pathParser=null,a.pathParser=new ne(a.getAttribute("d").getString()),a}return g()(n,[{key:"path",value:function(t){var e=this.pathParser,n=new $t;e.reset(),t&&t.beginPath();while(!e.isEnd())switch(e.nextCommand(),e.command){case"M":case"m":this.pathM(t,n);break;case"L":case"l":this.pathL(t,n);break;case"H":case"h":this.pathH(t,n);break;case"V":case"v":this.pathV(t,n);break;case"C":case"c":this.pathC(t,n);break;case"S":case"s":this.pathS(t,n);break;case"Q":case"q":this.pathQ(t,n);break;case"T":case"t":this.pathT(t,n);break;case"A":case"a":this.pathA(t,n);break;case"Z":case"z":this.pathZ(t,n);break}return n}},{key:"getBoundingBox",value:function(t){return this.path()}},{key:"getMarkers",value:function(){var t=this.pathParser,e=t.getMarkerPoints(),n=t.getMarkerAngles(),r=e.map((function(t,e){return[t,n[e]]}));return r}},{key:"renderChildren",value:function(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var e=this.getStyle("fill-rule");""!==t.fillStyle&&("inherit"!==e.getString("inherit")?t.fill(e.getString()):t.fill()),""!==t.strokeStyle&&t.stroke();var n=this.getMarkers();if(n){var r=n.length-1,a=this.getStyle("marker-start"),o=this.getStyle("marker-mid"),s=this.getStyle("marker-end");if(a.isUrlDefinition()){var u=a.getDefinition(),c=i()(n[0],2),l=c[0],h=c[1];u.render(t,l,h)}if(o.isUrlDefinition())for(var f=o.getDefinition(),d=1;d<r;d++){var g=i()(n[d],2),p=g[0],v=g[1];f.render(t,p,v)}if(s.isUrlDefinition()){var y=s.getDefinition(),m=i()(n[r],2),x=m[0],b=m[1];y.render(t,x,b)}}}},{key:"pathM",value:function(t,e){var n=this.pathParser,r=n.getAsCurrentPoint(),i=r.x,a=r.y;n.addMarker(r),e.addPoint(i,a),t&&t.moveTo(i,a),n.start=n.current;while(!n.isCommandOrEnd()){var o=n.getAsCurrentPoint(),s=o.x,u=o.y;n.addMarker(o,n.start),e.addPoint(s,u),t&&t.lineTo(s,u)}}},{key:"pathL",value:function(t,e){var n=this.pathParser;while(!n.isCommandOrEnd()){var r=n.current,i=n.getAsCurrentPoint(),a=i.x,o=i.y;n.addMarker(i,r),e.addPoint(a,o),t&&t.lineTo(a,o)}}},{key:"pathH",value:function(t,e){var n=this.pathParser;while(!n.isCommandOrEnd()){var r=n.current,i=new ct((n.isRelativeCommand()?r.x:0)+n.getScalar(),r.y);n.addMarker(i,r),n.current=i,e.addPoint(i.x,i.y),t&&t.lineTo(i.x,i.y)}}},{key:"pathV",value:function(t,e){var n=this.pathParser;while(!n.isCommandOrEnd()){var r=n.current,i=new ct(r.x,(n.isRelativeCommand()?r.y:0)+n.getScalar());n.addMarker(i,r),n.current=i,e.addPoint(i.x,i.y),t&&t.lineTo(i.x,i.y)}}},{key:"pathC",value:function(t,e){var n=this.pathParser;while(!n.isCommandOrEnd()){var r=n.current,i=n.getPoint(),a=n.getAsControlPoint(),o=n.getAsCurrentPoint();n.addMarker(o,a,i),e.addBezierCurve(r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}}},{key:"pathS",value:function(t,e){var n=this.pathParser;while(!n.isCommandOrEnd()){var r=n.current,i=n.getReflectedControlPoint(),a=n.getAsControlPoint(),o=n.getAsCurrentPoint();n.addMarker(o,a,i),e.addBezierCurve(r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}}},{key:"pathQ",value:function(t,e){var n=this.pathParser;while(!n.isCommandOrEnd()){var r=n.current,i=n.getAsControlPoint(),a=n.getAsCurrentPoint();n.addMarker(a,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,a.x,a.y),t&&t.quadraticCurveTo(i.x,i.y,a.x,a.y)}}},{key:"pathT",value:function(t,e){var n=this.pathParser;while(!n.isCommandOrEnd()){var r=n.current,i=n.getReflectedControlPoint();n.control=i;var a=n.getAsCurrentPoint();n.addMarker(a,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,a.x,a.y),t&&t.quadraticCurveTo(i.x,i.y,a.x,a.y)}}},{key:"pathA",value:function(t,e){var n=this.pathParser;while(!n.isCommandOrEnd()){var r=n.current,i=n.getScalar(),a=n.getScalar(),o=n.getScalar()*(Math.PI/180),s=n.getScalar(),u=n.getScalar(),c=n.getAsCurrentPoint(),l=new ct(Math.cos(o)*(r.x-c.x)/2+Math.sin(o)*(r.y-c.y)/2,-Math.sin(o)*(r.x-c.x)/2+Math.cos(o)*(r.y-c.y)/2),h=Math.pow(l.x,2)/Math.pow(i,2)+Math.pow(l.y,2)/Math.pow(a,2);h>1&&(i*=Math.sqrt(h),a*=Math.sqrt(h));var f=(s===u?-1:1)*Math.sqrt((Math.pow(i,2)*Math.pow(a,2)-Math.pow(i,2)*Math.pow(l.y,2)-Math.pow(a,2)*Math.pow(l.x,2))/(Math.pow(i,2)*Math.pow(l.y,2)+Math.pow(a,2)*Math.pow(l.x,2)));isNaN(f)&&(f=0);var d=new ct(f*i*l.y/a,f*-a*l.x/i),g=new ct((r.x+c.x)/2+Math.cos(o)*d.x-Math.sin(o)*d.y,(r.y+c.y)/2+Math.sin(o)*d.x+Math.cos(o)*d.y),p=K([1,0],[(l.x-d.x)/i,(l.y-d.y)/a]),v=[(l.x-d.x)/i,(l.y-d.y)/a],y=[(-l.x-d.x)/i,(-l.y-d.y)/a],m=K(v,y);Q(v,y)<=-1&&(m=Math.PI),Q(v,y)>=1&&(m=0);var x=1-u?1:-1,b=p+x*(m/2),w=new ct(g.x+i*Math.cos(b),g.y+a*Math.sin(b));if(n.addMarkerAngle(w,b-x*Math.PI/2),n.addMarkerAngle(c,b-x*Math.PI),e.addPoint(c.x,c.y),t&&!isNaN(p)&&!isNaN(m)){var S=i>a?i:a,k=i>a?1:i/a,z=i>a?a/i:1;t.translate(g.x,g.y),t.rotate(o),t.scale(k,z),t.arc(0,0,S,p,p+m,Boolean(1-u)),t.scale(1/k,1/z),t.rotate(-o),t.translate(-g.x,-g.y)}}}},{key:"pathZ",value:function(t,e){var n=this.pathParser;t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath(),n.current=n.start}}]),n}(Xt);function oe(t){return function(){var e,n=S()(t);if(se()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function se(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ue=function(t){z()(n,t);var e=oe(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="svg",t.root=!1,t}return g()(n,[{key:"clearContext",value:function(t){E()(S()(n.prototype),"clearContext",this).call(this,t),this.document.screen.viewPort.removeCurrent()}},{key:"setContext",value:function(t){var e=this.document,r=e.screen,i=e.window,a=t.canvas;if(r.setDefaults(t),a.style&&"undefined"!==typeof t.font&&i&&"undefined"!==typeof i.getComputedStyle){t.font=i.getComputedStyle(a).getPropertyValue("font");var o=new st(e,"fontSize",Wt.parse(t.font).fontSize);o.hasValue()&&(e.rootEmSize=o.getPixels("y"),e.emSize=e.rootEmSize)}E()(S()(n.prototype),"setContext",this).call(this,t),this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y"));var s=r.viewPort,u=s.width,c=s.height;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var l=this.getAttribute("refX"),h=this.getAttribute("refY"),f=this.getAttribute("viewBox"),d=f.hasValue()?V(f.getString()):null,g=!this.root&&"visible"!==this.getAttribute("overflow").getValue("hidden"),p=0,v=0,y=0,m=0;d&&(p=d[0],v=d[1]),this.root||(u=this.getStyle("width").getPixels("x"),c=this.getStyle("height").getPixels("y"),"marker"===this.type&&(y=p,m=v,p=0,v=0)),r.viewPort.setCurrent(u,c),d&&(u=d[2],c=d[3]),e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:r.viewPort.width,desiredWidth:u,height:r.viewPort.height,desiredHeight:c,minX:p,minY:v,refX:l.getValue(),refY:h.getValue(),clip:g,clipX:y,clipY:m}),d&&(r.viewPort.removeCurrent(),r.viewPort.setCurrent(u,c))}},{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.getAttribute("width",!0),i=this.getAttribute("height",!0),a=this.getAttribute("viewBox"),o=this.getAttribute("style"),s=r.getNumber(0),u=i.getNumber(0);if(n)if("string"===typeof n)this.getAttribute("preserveAspectRatio",!0).setValue(n);else{var c=this.getAttribute("preserveAspectRatio");c.hasValue()&&c.setValue(c.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(r.setValue(t),i.setValue(e),a.hasValue()||a.setValue("0 0 ".concat(s||t," ").concat(u||e)),o.hasValue()){var l=this.getStyle("width"),h=this.getStyle("height");l.hasValue()&&l.setValue("".concat(t,"px")),h.hasValue()&&h.setValue("".concat(e,"px"))}}}]),n}(Xt);function ce(t){return function(){var e,n=S()(t);if(le()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function le(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var he=function(t){z()(n,t);var e=ce(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="rect",t}return g()(n,[{key:"path",value:function(t){var e=this.getAttribute("x").getPixels("x"),n=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),i=this.getStyle("height").getPixels("y"),a=this.getAttribute("rx"),o=this.getAttribute("ry"),s=a.getPixels("x"),u=o.getPixels("y");if(a.hasValue()&&!o.hasValue()&&(u=s),o.hasValue()&&!a.hasValue()&&(s=u),s=Math.min(s,r/2),u=Math.min(u,i/2),t){var c=(Math.sqrt(2)-1)/3*4;t.beginPath(),i>0&&r>0&&(t.moveTo(e+s,n),t.lineTo(e+r-s,n),t.bezierCurveTo(e+r-s+c*s,n,e+r,n+u-c*u,e+r,n+u),t.lineTo(e+r,n+i-u),t.bezierCurveTo(e+r,n+i-u+c*u,e+r-s+c*s,n+i,e+r-s,n+i),t.lineTo(e+s,n+i),t.bezierCurveTo(e+s-c*s,n+i,e,n+i-u+c*u,e,n+i-u),t.lineTo(e,n+u),t.bezierCurveTo(e,n+u-c*u,e+s-c*s,n,e+s,n),t.closePath())}return new $t(e,n,e+r,n+i)}},{key:"getMarkers",value:function(){return null}}]),n}(ae);function fe(t){return function(){var e,n=S()(t);if(de()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function de(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ge=function(t){z()(n,t);var e=fe(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="circle",t}return g()(n,[{key:"path",value:function(t){var e=this.getAttribute("cx").getPixels("x"),n=this.getAttribute("cy").getPixels("y"),r=this.getAttribute("r").getPixels();return t&&r>0&&(t.beginPath(),t.arc(e,n,r,0,2*Math.PI,!1),t.closePath()),new $t(e-r,n-r,e+r,n+r)}},{key:"getMarkers",value:function(){return null}}]),n}(ae);function pe(t){return function(){var e,n=S()(t);if(ve()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ye=function(t){z()(n,t);var e=pe(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="ellipse",t}return g()(n,[{key:"path",value:function(t){var e=(Math.sqrt(2)-1)/3*4,n=this.getAttribute("rx").getPixels("x"),r=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return t&&n>0&&r>0&&(t.beginPath(),t.moveTo(i+n,a),t.bezierCurveTo(i+n,a+e*r,i+e*n,a+r,i,a+r),t.bezierCurveTo(i-e*n,a+r,i-n,a+e*r,i-n,a),t.bezierCurveTo(i-n,a-e*r,i-e*n,a-r,i,a-r),t.bezierCurveTo(i+e*n,a-r,i+n,a-e*r,i+n,a),t.closePath()),new $t(i-n,a-r,i+n,a+r)}},{key:"getMarkers",value:function(){return null}}]),n}(ae);function me(t){return function(){var e,n=S()(t);if(xe()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function xe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var be=function(t){z()(n,t);var e=me(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="line",t}return g()(n,[{key:"getPoints",value:function(){return[new ct(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new ct(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}},{key:"path",value:function(t){var e=this.getPoints(),n=i()(e,2),r=n[0],a=r.x,o=r.y,s=n[1],u=s.x,c=s.y;return t&&(t.beginPath(),t.moveTo(a,o),t.lineTo(u,c)),new $t(a,o,u,c)}},{key:"getMarkers",value:function(){var t=this.getPoints(),e=i()(t,2),n=e[0],r=e[1],a=n.angleTo(r);return[[n,a],[r,a]]}}]),n}(ae);function we(t){return function(){var e,n=S()(t);if(Se()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Se(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ke=function(t){z()(n,t);var e=we(n);function n(t,r,i){var a;return f()(this,n),a=e.call(this,t,r,i),a.type="polyline",a.points=[],a.points=ct.parsePath(a.getAttribute("points").getString()),a}return g()(n,[{key:"path",value:function(t){var e=this.points,n=i()(e,1),r=n[0],a=r.x,o=r.y,s=new $t(a,o);return t&&(t.beginPath(),t.moveTo(a,o)),e.forEach((function(e){var n=e.x,r=e.y;s.addPoint(n,r),t&&t.lineTo(n,r)})),s}},{key:"getMarkers",value:function(){var t=this.points,e=t.length-1,n=[];return t.forEach((function(r,i){i!==e&&n.push([r,r.angleTo(t[i+1])])})),n.length>0&&n.push([t[t.length-1],n[n.length-1][1]]),n}}]),n}(ae);function ze(t){return function(){var e,n=S()(t);if(Pe()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ce=function(t){z()(n,t);var e=ze(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="polygon",t}return g()(n,[{key:"path",value:function(t){var e=E()(S()(n.prototype),"path",this).call(this,t),r=i()(this.points,1),a=r[0],o=a.x,s=a.y;return t&&(t.lineTo(o,s),t.closePath()),e}}]),n}(ke);function Re(t){return function(){var e,n=S()(t);if(Ee()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Ee(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ae=function(t){z()(n,t);var e=Re(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="pattern",t}return g()(n,[{key:"createPattern",value:function(t,e,n){var r=this.getStyle("width").getPixels("x",!0),i=this.getStyle("height").getPixels("y",!0),a=new ue(this.document,null);a.attributes.viewBox=new st(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new st(this.document,"width","".concat(r,"px")),a.attributes.height=new st(this.document,"height","".concat(i,"px")),a.attributes.transform=new st(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children;var o=this.document.createCanvas(r,i),s=o.getContext("2d"),u=this.getAttribute("x"),c=this.getAttribute("y");u.hasValue()&&c.hasValue()&&s.translate(u.getPixels("x",!0),c.getPixels("y",!0)),n.hasValue()?this.styles["fill-opacity"]=n:Reflect.deleteProperty(this.styles,"fill-opacity");for(var l=-1;l<=1;l++)for(var h=-1;h<=1;h++)s.save(),a.attributes.x=new st(this.document,"x",l*o.width),a.attributes.y=new st(this.document,"y",h*o.height),a.render(s),s.restore();var f=t.createPattern(o,"repeat");return f}}]),n}(Dt);function Te(t){return function(){var e,n=S()(t);if(Me()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Me(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var _e=function(t){z()(n,t);var e=Te(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="marker",t}return g()(n,[{key:"render",value:function(t,e,n){if(e){var r=e.x,i=e.y,a=this.getAttribute("orient").getValue("auto"),o=this.getAttribute("markerUnits").getValue("strokeWidth");t.translate(r,i),"auto"===a&&t.rotate(n),"strokeWidth"===o&&t.scale(t.lineWidth,t.lineWidth),t.save();var s=new ue(this.document,null);s.type=this.type,s.attributes.viewBox=new st(this.document,"viewBox",this.getAttribute("viewBox").getValue()),s.attributes.refX=new st(this.document,"refX",this.getAttribute("refX").getValue()),s.attributes.refY=new st(this.document,"refY",this.getAttribute("refY").getValue()),s.attributes.width=new st(this.document,"width",this.getAttribute("markerWidth").getValue()),s.attributes.height=new st(this.document,"height",this.getAttribute("markerHeight").getValue()),s.attributes.overflow=new st(this.document,"overflow",this.getAttribute("overflow").getValue()),s.attributes.fill=new st(this.document,"fill",this.getAttribute("fill").getColor("black")),s.attributes.stroke=new st(this.document,"stroke",this.getAttribute("stroke").getValue("none")),s.children=this.children,s.render(t),t.restore(),"strokeWidth"===o&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===a&&t.rotate(-n),t.translate(-r,-i)}}}]),n}(Dt);function De(t){return function(){var e,n=S()(t);if(Oe()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ve=function(t){z()(n,t);var e=De(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="defs",t}return g()(n,[{key:"render",value:function(){}}]),n}(Dt);function He(t){return function(){var e,n=S()(t);if(Ne()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Ne(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ie=function(t){z()(n,t);var e=He(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="g",t}return g()(n,[{key:"getBoundingBox",value:function(t){var e=new $t;return this.children.forEach((function(n){e.addBoundingBox(n.getBoundingBox(t))})),e}}]),n}(Xt);function Le(t){return function(){var e,n=S()(t);if(je()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function je(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var We=function(t){z()(n,t);var e=Le(n);function n(t,r,i){var a;f()(this,n),a=e.call(this,t,r,i),a.attributesToInherit=["gradientUnits"],a.stops=[];var o=T()(a),s=o.stops,u=o.children;return u.forEach((function(t){"stop"===t.type&&s.push(t)})),a}return g()(n,[{key:"getGradientUnits",value:function(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}},{key:"createGradient",value:function(t,e,n){var r=this,a=this;this.getHrefAttribute().hasValue()&&(a=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(a));var o=a,s=o.stops,u=this.getGradient(t,e);if(!u)return this.addParentOpacity(n,s[s.length-1].color);if(s.forEach((function(t){u.addColorStop(t.offset,r.addParentOpacity(n,t.color))})),this.getAttribute("gradientTransform").hasValue()){var c=this.document,l=c.screen,h=l.MAX_VIRTUAL_PIXELS,f=l.viewPort,d=i()(f.viewPorts,1),g=d[0],p=new he(c,null);p.attributes.x=new st(c,"x",-h/3),p.attributes.y=new st(c,"y",-h/3),p.attributes.width=new st(c,"width",h),p.attributes.height=new st(c,"height",h);var v=new Ie(c,null);v.attributes.transform=new st(c,"transform",this.getAttribute("gradientTransform").getValue()),v.children=[p];var y=new ue(c,null);y.attributes.x=new st(c,"x",0),y.attributes.y=new st(c,"y",0),y.attributes.width=new st(c,"width",g.width),y.attributes.height=new st(c,"height",g.height),y.children=[v];var m=c.createCanvas(g.width,g.height),x=m.getContext("2d");return x.fillStyle=u,y.render(x),x.createPattern(m,"no-repeat")}return u}},{key:"inheritStopContainer",value:function(t){var e=this;this.attributesToInherit.forEach((function(n){!e.getAttribute(n).hasValue()&&t.getAttribute(n).hasValue()&&e.getAttribute(n,!0).setValue(t.getAttribute(n).getValue())}))}},{key:"addParentOpacity",value:function(t,e){if(t.hasValue()){var n=new st(this.document,"color",e);return n.addOpacity(t).getColor()}return e}}]),n}(Dt);function $e(t){return function(){var e,n=S()(t);if(Be()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Be(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Fe=function(t){z()(n,t);var e=$e(n);function n(t,r,i){var a;return f()(this,n),a=e.call(this,t,r,i),a.type="linearGradient",a.attributesToInherit.push("x1","y1","x2","y2"),a}return g()(n,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits(),r=n?e.getBoundingBox(t):null;if(n&&!r)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var i=n?r.x+r.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),a=n?r.y+r.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),o=n?r.x+r.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),s=n?r.y+r.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===o&&a===s?null:t.createLinearGradient(i,a,o,s)}}]),n}(We);function Xe(t){return function(){var e,n=S()(t);if(qe()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function qe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ge=function(t){z()(n,t);var e=Xe(n);function n(t,r,i){var a;return f()(this,n),a=e.call(this,t,r,i),a.type="radialGradient",a.attributesToInherit.push("cx","cy","r","fx","fy","fr"),a}return g()(n,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits(),r=e.getBoundingBox(t);if(n&&!r)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var i=n?r.x+r.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),a=n?r.y+r.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=i,s=a;this.getAttribute("fx").hasValue()&&(o=n?r.x+r.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(s=n?r.y+r.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var u=n?(r.width+r.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),c=this.getAttribute("fr").getPixels();return t.createRadialGradient(o,s,c,i,a,u)}}]),n}(We);function Ye(t){return function(){var e,n=S()(t);if(Ue()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Ue(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ze=function(t){z()(n,t);var e=Ye(n);function n(t,r,i){var a;f()(this,n),a=e.call(this,t,r,i),a.type="stop";var o=Math.max(0,Math.min(1,a.getAttribute("offset").getNumber())),s=a.getStyle("stop-opacity"),u=a.getStyle("stop-color",!0);return""===u.getString()&&u.setValue("#000"),s.hasValue()&&(u=u.addOpacity(s)),a.offset=o,a.color=u.getColor(),a}return n}(Dt);function Qe(t){return function(){var e,n=S()(t);if(Ke()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Ke(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Je=function(t){z()(n,t);var e=Qe(n);function n(t,r,i){var a;return f()(this,n),a=e.call(this,t,r,i),a.type="animate",a.duration=0,a.initialValue=null,a.initialUnits="",a.removed=!1,a.frozen=!1,t.screen.animations.push(T()(a)),a.begin=a.getAttribute("begin").getMilliseconds(),a.maxDuration=a.begin+a.getAttribute("dur").getMilliseconds(),a.from=a.getAttribute("from"),a.to=a.getAttribute("to"),a.values=a.getAttribute("values"),a.values.hasValue()&&a.values.setValue(a.values.getString().split(";")),a}return g()(n,[{key:"getProperty",value:function(){var t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}},{key:"calcValue",value:function(){var t=this.initialUnits,e=this.getProgress(),n=e.progress,r=e.from,i=e.to,a=r.getNumber()+(i.getNumber()-r.getNumber())*n;return"%"===t&&(a*=100),"".concat(a).concat(t)}},{key:"update",value:function(t){var e=this.parent,n=this.getProperty();if(this.initialValue||(this.initialValue=n.getString(),this.initialUnits=n.getUnits()),this.duration>this.maxDuration){var r=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==r||this.frozen){if("remove"===r&&!this.removed)return this.removed=!0,n.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e.animationFrozen=!0,e.animationFrozenValue=n.getString();return!1}this.duration+=t;var i=!1;if(this.begin<this.duration){var a=this.calcValue(),o=this.getAttribute("type");if(o.hasValue()){var s=o.getString();a="".concat(s,"(").concat(a,")")}n.setValue(a),i=!0}return i}},{key:"getProgress",value:function(){var t=this.document,e=this.values,n={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(e.hasValue()){var r=n.progress*(e.getValue().length-1),i=Math.floor(r),a=Math.ceil(r);n.from=new st(t,"from",parseFloat(e.getValue()[i])),n.to=new st(t,"to",parseFloat(e.getValue()[a])),n.progress=(r-i)/(a-i)}else n.from=this.from,n.to=this.to;return n}}]),n}(Dt);function tn(t){return function(){var e,n=S()(t);if(en()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function en(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var nn=function(t){z()(n,t);var e=tn(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="animateColor",t}return g()(n,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,n=t.from,r=t.to,i=new m.a(n.getColor()),a=new m.a(r.getColor());if(i.ok&&a.ok){var o=i.r+(a.r-i.r)*e,s=i.g+(a.g-i.g)*e,u=i.b+(a.b-i.b)*e;return"rgb(".concat(parseInt(o,10),", ").concat(parseInt(s,10),", ").concat(parseInt(u,10),")")}return this.getAttribute("from").getColor()}}]),n}(Je);function rn(t){return function(){var e,n=S()(t);if(an()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function an(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var on=function(t){z()(n,t);var e=rn(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="animateTransform",t}return g()(n,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,n=t.from,r=t.to,i=V(n.getString()),a=V(r.getString()),o=i.map((function(t,n){var r=a[n];return t+(r-t)*e})).join(" ");return o}}]),n}(Je);function sn(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=un(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,o=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw i}}}}function un(t,e){if(t){if("string"===typeof t)return cn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(t,e):void 0}}function cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ln(t){return function(){var e,n=S()(t);if(hn()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function hn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var fn=function(t){z()(n,t);var e=ln(n);function n(t,r,i){var a;f()(this,n),a=e.call(this,t,r,i),a.type="font",a.glyphs={},a.horizAdvX=a.getAttribute("horiz-adv-x").getNumber();var o,s=t.definitions,u=T()(a),c=u.children,l=sn(c);try{for(l.s();!(o=l.n()).done;){var h=o.value;switch(h.type){case"font-face":a.fontFace=h;var d=h.getStyle("font-family");d.hasValue()&&(s[d.getString()]=T()(a));break;case"missing-glyph":a.missingGlyph=h;break;case"glyph":var g=h;g.arabicForm?(a.isRTL=!0,a.isArabic=!0,"undefined"===typeof a.glyphs[g.unicode]&&(a.glyphs[g.unicode]={}),a.glyphs[g.unicode][g.arabicForm]=g):a.glyphs[g.unicode]=g;break;default:}}}catch(p){l.e(p)}finally{l.f()}return a}return g()(n,[{key:"render",value:function(){}}]),n}(Dt);function dn(t){return function(){var e,n=S()(t);if(gn()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function gn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var pn=function(t){z()(n,t);var e=dn(n);function n(t,r,i){var a;return f()(this,n),a=e.call(this,t,r,i),a.type="font-face",a.ascent=a.getAttribute("ascent").getNumber(),a.descent=a.getAttribute("descent").getNumber(),a.unitsPerEm=a.getAttribute("units-per-em").getNumber(),a}return n}(Dt);function vn(t){return function(){var e,n=S()(t);if(yn()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function yn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var mn=function(t){z()(n,t);var e=vn(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="missing-glyph",t.horizAdvX=0,t}return n}(ae);function xn(t){return function(){var e,n=S()(t);if(bn()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function bn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var wn=function(t){z()(n,t);var e=xn(n);function n(t,r,i){var a;return f()(this,n),a=e.call(this,t,r,i),a.type="glyph",a.horizAdvX=a.getAttribute("horiz-adv-x").getNumber(),a.unicode=a.getAttribute("unicode").getString(),a.arabicForm=a.getAttribute("arabic-form").getString(),a}return n}(ae);function Sn(t){return function(){var e,n=S()(t);if(kn()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function kn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var zn=function(t){z()(n,t);var e=Sn(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="tref",t}return g()(n,[{key:"getText",value:function(){var t=this.getHrefAttribute().getDefinition();if(t){var e=t.children[0];if(e)return e.getText()}return""}}]),n}(Yt);function Pn(t){return function(){var e,n=S()(t);if(Cn()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Cn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Rn=function(t){z()(n,t);var e=Pn(n);function n(t,r,i){var a;f()(this,n),a=e.call(this,t,r,i),a.type="a";var o=r.childNodes,s=o[0],u=o.length>0&&Array.from(o).every((function(t){return 3===t.nodeType}));return a.hasText=u,a.text=u?a.getTextFromNode(s):"",a}return g()(n,[{key:"getText",value:function(){return this.text}},{key:"renderChildren",value:function(t){if(this.hasText){E()(S()(n.prototype),"renderChildren",this).call(this,t);var e=this.document,r=this.x,i=this.y,a=e.screen.mouse,o=new st(e,"fontSize",Wt.parse(e.ctx.font).fontSize);a.isWorking()&&a.checkBoundingBox(this,new $t(r,i-o.getPixels("y"),r+this.measureText(t),i))}else if(this.children.length>0){var s=new Ie(this.document,null);s.children=this.children,s.parent=this,s.render(t)}}},{key:"onClick",value:function(){var t=this.document.window;t&&t.open(this.getHrefAttribute().getString())}},{key:"onMouseMove",value:function(){var t=this.document.ctx;t.canvas.style.cursor="pointer"}}]),n}(Yt);function En(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=An(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,o=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw i}}}}function An(t,e){if(t){if("string"===typeof t)return Tn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tn(t,e):void 0}}function Tn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mn(t){return function(){var e,n=S()(t);if(_n()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function _n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Dn=function(t){z()(n,t);var e=Mn(n);function n(t,r,i){var a;f()(this,n),a=e.call(this,t,r,i),a.type="textPath",a.textWidth=0,a.textHeight=0,a.pathLength=-1,a.glyphInfo=null,a.letterSpacingCache=[],a.measuresCache=new Map([["",0]]);var o=a.getHrefAttribute().getDefinition();return a.text=a.getTextFromNode(),a.dataArray=a.parsePathData(o),a}return g()(n,[{key:"getText",value:function(){return this.text}},{key:"path",value:function(t){var e=this.dataArray;t&&t.beginPath(),e.forEach((function(e){var n=e.command,r=e.points;switch(n){case"L":t&&t.lineTo(r[0],r[1]);break;case"M":t&&t.moveTo(r[0],r[1]);break;case"C":t&&t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":t&&t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],l=r[6],h=r[7],f=o>s?o:s,d=o>s?1:o/s,g=o>s?s/o:1;t&&(t.translate(i,a),t.rotate(l),t.scale(d,g),t.arc(0,0,f,u,u+c,Boolean(1-h)),t.scale(1/d,1/g),t.rotate(-l),t.translate(-i,-a));break;case"z":t&&t.closePath();break}}))}},{key:"renderChildren",value:function(t){this.setTextData(t),t.save();var e=this.parent.getStyle("text-decoration").getString(),n=this.getFontSize(),r=this.glyphInfo,i=t.fillStyle;"underline"===e&&t.beginPath(),r.forEach((function(i,a){var o=i.p0,s=i.p1,u=i.text;t.save(),t.translate(o.x,o.y),t.rotate(r[a].rotation),t.fillStyle&&t.fillText(u,0,0),t.strokeStyle&&t.strokeText(u,0,0),t.restore(),"underline"===e&&(0===a&&t.moveTo(o.x,o.y+n/8),t.lineTo(s.x,s.y+n/5))})),"underline"===e&&(t.lineWidth=n/20,t.strokeStyle=i,t.stroke(),t.closePath()),t.restore()}},{key:"getLetterSpacingAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[t]||0}},{key:"findSegmentToFitChar",value:function(t,e,n,r,i,a,o,s){var u=a,c=this.measureText(t,o);" "===o&&"justify"===e&&n<r&&(c+=(r-n)/i),s>-1&&(u+=this.getLetterSpacingAt(s));var l=this.textHeight/20,h={p0:this.getEquidistantPointOnPath(u,l),p1:this.getEquidistantPointOnPath(u+c,l)};return u+=c,{offset:u,segment:h}}},{key:"measureText",value:function(t,e){var n=this.measuresCache,r=e||this.getText();if(n.has(r))return n.get(r);var i=this.measureTargetText(t,r);return n.set(r,i),i}},{key:"setTextData",value:function(t){var e=this;if(!this.glyphInfo){var n=this.getText(),r=n.split(""),i=n.split(" ").length-1,a=V(this.parent.getAttribute("dx").getString("0")),o=this.parent.getStyle("text-anchor").getString("start"),s=this.getStyle("letter-spacing"),u=this.parent.getStyle("letter-spacing"),c=0;s.hasValue()&&"inherit"!==s.getValue()?s.hasValue()&&"initial"!==s.getValue()&&"unset"!==s.getValue()&&(c=s.getPixels()):c=u.getPixels();var l=[],h=n.length;this.letterSpacingCache=l;for(var f=0;f<h;f++)l.push("undefined"!==typeof a[f]?a[f]:c);var d=l.reduce((function(t,e){return t+e||0}),0);this.textWidth=this.measureText(t),this.textHeight=this.getFontSize();var g=Math.max(this.textWidth+d,0);this.glyphInfo=[];var p=this.getPathLength(),v=this.getStyle("startOffset").getNumber(0)*p,y=0;"middle"!==o&&"center"!==o||(y=-g/2),"end"!==o&&"right"!==o||(y=-g),y+=v,r.forEach((function(n,a){var s=e.findSegmentToFitChar(t,o,g,p,i,y,n,a),u=s.offset,c=s.segment;if(y=u,c.p0&&c.p1){var l=e.getLineLength(c.p0.x,c.p0.y,c.p1.x,c.p1.y),h=0,f=e.getPointOnLine(h+l/2,c.p0.x,c.p0.y,c.p1.x,c.p1.y),d=Math.atan2(c.p1.y-c.p0.y,c.p1.x-c.p0.x);e.glyphInfo.push({transposeX:f.x,transposeY:f.y,text:r[a],p0:c.p0,p1:c.p1,rotation:d})}}))}}},{key:"parsePathData",value:function(t){if(this.pathLength=-1,!t)return[];var e=[],n=t.pathParser;n.reset();while(!n.isEnd()){var r=n.current,i=r?r.x:0,a=r?r.y:0,o="",s=[];n.nextCommand();var u=n.command.toUpperCase();switch(n.command){case"M":case"m":o=this.pathM(n,s);break;case"L":case"l":o=this.pathL(n,s);break;case"H":case"h":o=this.pathH(n,s);break;case"V":case"v":o=this.pathV(n,s);break;case"C":case"c":this.pathC(n,s);break;case"S":case"s":o=this.pathS(n,s);break;case"Q":case"q":this.pathQ(n,s);break;case"T":case"t":o=this.pathT(n,s);break;case"A":case"a":s=this.pathA(n);break;case"Z":case"z":n.current=n.start;break}"Z"!==u?e.push({command:o||u,points:s,start:{x:i,y:a},pathLength:this.calcLength(i,a,o||u,s)}):e.push({command:"z",points:[],pathLength:0})}return e}},{key:"pathM",value:function(t,e){var n=t.getAsCurrentPoint();e.push(n.x,n.y),t.start=t.current;while(!t.isCommandOrEnd()){var r=t.getAsCurrentPoint();return e.push(r.x,r.y),"L"}}},{key:"pathL",value:function(t,e){while(!t.isCommandOrEnd()){var n=t.getAsCurrentPoint();e.push(n.x,n.y)}return"L"}},{key:"pathH",value:function(t,e){while(!t.isCommandOrEnd()){var n=t.current,r=new ct((t.isRelativeCommand()?n.x:0)+t.getScalar(),n.y);e.push(r.x,r.y),t.current=r}return"L"}},{key:"pathV",value:function(t,e){while(!t.isCommandOrEnd()){var n=t.current,r=new ct(n.x,(t.isRelativeCommand()?n.y:0)+t.getScalar());e.push(r.x,r.y),t.current=r}return"L"}},{key:"pathC",value:function(t,e){while(!t.isCommandOrEnd()){var n=t.getPoint(),r=t.getAsControlPoint(),i=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y,i.x,i.y)}}},{key:"pathS",value:function(t,e){while(!t.isCommandOrEnd()){var n=t.getReflectedControlPoint(),r=t.getAsControlPoint(),i=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y,i.x,i.y)}return"C"}},{key:"pathQ",value:function(t,e){while(!t.isCommandOrEnd()){var n=t.getAsControlPoint(),r=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y)}}},{key:"pathT",value:function(t,e){while(!t.isCommandOrEnd()){var n=t.getReflectedControlPoint();t.control=n;var r=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y)}return"Q"}},{key:"pathA",value:function(t){while(!t.isCommandOrEnd()){var e=t.current,n=t.getScalar(),r=t.getScalar(),i=t.getScalar()*(Math.PI/180),a=t.getScalar(),o=t.getScalar(),s=t.getAsCurrentPoint(),u=new ct(Math.cos(i)*(e.x-s.x)/2+Math.sin(i)*(e.y-s.y)/2,-Math.sin(i)*(e.x-s.x)/2+Math.cos(i)*(e.y-s.y)/2),c=Math.pow(u.x,2)/Math.pow(n,2)+Math.pow(u.y,2)/Math.pow(r,2);c>1&&(n*=Math.sqrt(c),r*=Math.sqrt(c));var l=(a===o?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(r,2)-Math.pow(n,2)*Math.pow(u.y,2)-Math.pow(r,2)*Math.pow(u.x,2))/(Math.pow(n,2)*Math.pow(u.y,2)+Math.pow(r,2)*Math.pow(u.x,2)));isNaN(l)&&(l=0);var h=new ct(l*n*u.y/r,l*-r*u.x/n),f=new ct((e.x+s.x)/2+Math.cos(i)*h.x-Math.sin(i)*h.y,(e.y+s.y)/2+Math.sin(i)*h.x+Math.cos(i)*h.y),d=K([1,0],[(u.x-h.x)/n,(u.y-h.y)/r]),g=[(u.x-h.x)/n,(u.y-h.y)/r],p=[(-u.x-h.x)/n,(-u.y-h.y)/r],v=K(g,p);return Q(g,p)<=-1&&(v=Math.PI),Q(g,p)>=1&&(v=0),0===o&&v>0&&(v-=2*Math.PI),1===o&&v<0&&(v+=2*Math.PI),[f.x,f.y,n,r,d,v,i,o]}}},{key:"calcLength",value:function(t,e,n,r){var i=0,a=null,o=null,s=0;switch(n){case"L":return this.getLineLength(t,e,r[0],r[1]);case"C":for(i=0,a=this.getPointOnCubicBezier(0,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),s=.01;s<=1;s+=.01)o=this.getPointOnCubicBezier(s,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),i+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return i;case"Q":for(i=0,a=this.getPointOnQuadraticBezier(0,t,e,r[0],r[1],r[2],r[3]),s=.01;s<=1;s+=.01)o=this.getPointOnQuadraticBezier(s,t,e,r[0],r[1],r[2],r[3]),i+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return i;case"A":i=0;var u=r[4],c=r[5],l=r[4]+c,h=Math.PI/180;if(Math.abs(u-l)<h&&(h=Math.abs(u-l)),a=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),c<0)for(s=u-h;s>l;s-=h)o=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),i+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(s=u+h;s<l;s+=h)o=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],s,0),i+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),i+=this.getLineLength(a.x,a.y,o.x,o.y),i}return 0}},{key:"getPointOnLine",value:function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n,s=(i-n)/(r-e+U),u=Math.sqrt(t*t/(1+s*s));r<e&&(u*=-1);var c=s*u,l=null;if(r===e)l={x:a,y:o+c};else if((o-n)/(a-e+U)===s)l={x:a+u,y:o+c};else{var h=0,f=0,d=this.getLineLength(e,n,r,i);if(d<U)return null;var g=(a-e)*(r-e)+(o-n)*(i-n);g/=d*d,h=e+g*(r-e),f=n+g*(i-n);var p=this.getLineLength(a,o,h,f),v=Math.sqrt(t*t-p*p);u=Math.sqrt(v*v/(1+s*s)),r<e&&(u*=-1),c=s*u,l={x:h+u,y:f+c}}return l}},{key:"getPointOnPath",value:function(t){var e=this.getPathLength(),n=0,r=null;if(t<-5e-5||t-5e-5>e)return null;var i,a=this.dataArray,o=En(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(!s||!(s.pathLength<5e-5||n+s.pathLength+5e-5<t)){var u=t-n,c=0;switch(s.command){case"L":r=this.getPointOnLine(u,s.start.x,s.start.y,s.points[0],s.points[1],s.start.x,s.start.y);break;case"A":var l=s.points[4],h=s.points[5],f=s.points[4]+h;if(c=l+u/s.pathLength*h,h<0&&c<f||h>=0&&c>f)break;r=this.getPointOnEllipticalArc(s.points[0],s.points[1],s.points[2],s.points[3],c,s.points[6]);break;case"C":c=u/s.pathLength,c>1&&(c=1),r=this.getPointOnCubicBezier(c,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3],s.points[4],s.points[5]);break;case"Q":c=u/s.pathLength,c>1&&(c=1),r=this.getPointOnQuadraticBezier(c,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3]);break;default:}if(r)return r;break}n+=s.pathLength}}catch(d){o.e(d)}finally{o.f()}return null}},{key:"getLineLength",value:function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))}},{key:"getPathLength",value:function(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce((function(t,e){return e.pathLength>0?t+e.pathLength:t}),0)),this.pathLength}},{key:"getPointOnCubicBezier",value:function(t,e,n,r,i,a,o,s,u){var c=s*J(t)+a*tt(t)+r*et(t)+e*nt(t),l=u*J(t)+o*tt(t)+i*et(t)+n*nt(t);return{x:c,y:l}}},{key:"getPointOnQuadraticBezier",value:function(t,e,n,r,i,a,o){var s=a*rt(t)+r*it(t)+e*at(t),u=o*rt(t)+i*it(t)+n*at(t);return{x:s,y:u}}},{key:"getPointOnEllipticalArc",value:function(t,e,n,r,i,a){var o=Math.cos(a),s=Math.sin(a),u={x:n*Math.cos(i),y:r*Math.sin(i)};return{x:t+(u.x*o-u.y*s),y:e+(u.x*s+u.y*o)}}},{key:"buildEquidistantCache",value:function(t,e){var n=this.getPathLength(),r=e||.25,i=t||n/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==r){this.equidistantCache={step:i,precision:r,points:[]};for(var a=0,o=0;o<=n;o+=r){var s=this.getPointOnPath(o),u=this.getPointOnPath(o+r);s&&u&&(a+=this.getLineLength(s.x,s.y,u.x,u.y),a>=i&&(this.equidistantCache.points.push({x:s.x,y:s.y,distance:o}),a-=i))}}}},{key:"getEquidistantPointOnPath",value:function(t,e,n){if(this.buildEquidistantCache(e,n),t<0||t-this.getPathLength()>5e-5)return null;var r=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[r]||null}}]),n}(Yt);function On(t){return function(){var e,n=S()(t);if(Vn()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Vn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Hn=function(t){z()(n,t);var e=On(n);function n(t,r,i){var a;f()(this,n),a=e.call(this,t,r,i),a.type="image",a.loaded=!1;var o=a.getHrefAttribute().getString();if(!o)return b()(a);var s=/\.svg$/.test(o);return t.images.push(T()(a)),s?a.loadSvg(o):a.loadImage(o),a.isSvg=s,a}return g()(n,[{key:"loadImage",value:function(){var t=u()(o.a.mark((function t(e){var n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.createImage(e);case 3:n=t.sent,this.image=n,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error('Error while loading image "'.concat(e,'":'),t.t0);case 10:this.loaded=!0;case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadSvg",value:function(){var t=u()(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.fetch(e);case 3:return n=t.sent,t.next=6,n.text();case 6:r=t.sent,this.image=r,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error('Error while loading image "'.concat(e,'":'),t.t0);case 13:this.loaded=!0;case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"renderChildren",value:function(t){var e=this.document,n=this.image,r=this.loaded,i=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");if(r&&n&&o&&s){if(t.save(),this.isSvg)e.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:i,offsetY:a,scaleWidth:o,scaleHeight:s}).render();else{var u=this.image;t.translate(i,a),e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o,desiredWidth:u.width,height:s,desiredHeight:u.height}),this.loaded&&("undefined"===typeof u.complete||u.complete)&&t.drawImage(u,0,0)}t.restore()}}},{key:"getBoundingBox",value:function(){var t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),n=this.getStyle("width").getPixels("x"),r=this.getStyle("height").getPixels("y");return new $t(t,e,t+n,e+r)}}]),n}(Xt);function Nn(t){return function(){var e,n=S()(t);if(In()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function In(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ln=function(t){z()(n,t);var e=Nn(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="symbol",t}return g()(n,[{key:"render",value:function(t){}}]),n}(Xt),jn=function(){function t(e){f()(this,t),this.document=e,this.loaded=!1,e.fonts.push(this)}return g()(t,[{key:"load",value:function(){var t=u()(o.a.mark((function t(e,n){var r,i,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=this.document,t.next=4,r.canvg.parser.load(n);case 4:i=t.sent,a=i.getElementsByTagName("font"),Array.from(a).forEach((function(t){var n=r.createElement(t);r.definitions[e]=n})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.error('Error while loading font "'.concat(n,'":'),t.t0);case 12:this.loaded=!0;case 13:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}();function Wn(t){return function(){var e,n=S()(t);if($n()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function $n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Bn=function(t){z()(n,t);var e=Wn(n);function n(t,r,i){var a;f()(this,n),a=e.call(this,t,r,i),a.type="style";var o=_(Array.from(r.childNodes).map((function(t){return t.data})).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),s=o.split("}");return s.forEach((function(e){var n=e.trim();if(n){var r=n.split("{"),i=r[0].split(","),a=r[1].split(";");i.forEach((function(e){var n=e.trim();if(n){var r=t.styles[n]||{};if(a.forEach((function(e){var n=e.indexOf(":"),i=e.substr(0,n).trim(),a=e.substr(n+1,e.length-n).trim();i&&a&&(r[i]=new st(t,i,a))})),t.styles[n]=r,t.stylesSpecificity[n]=Y(n),"@font-face"===n){var i=r["font-family"].getString().replace(/"|'/g,""),o=r.src.getString().split(",");o.forEach((function(e){if(e.indexOf('format("svg")')>0){var n=I(e);n&&new jn(t).load(i,n)}}))}}}))}})),a}return n}(Dt);function Fn(t){return function(){var e,n=S()(t);if(Xn()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Xn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}Bn.parseExternalUrl=I;var qn=function(t){z()(n,t);var e=Fn(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="use",t}return g()(n,[{key:"setContext",value:function(t){E()(S()(n.prototype),"setContext",this).call(this,t);var e=this.getAttribute("x"),r=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),r.hasValue()&&t.translate(0,r.getPixels("y"))}},{key:"path",value:function(t){var e=this.element;e&&e.path(t)}},{key:"renderChildren",value:function(t){var e=this.document,n=this.element;if(n){var r=n;if("symbol"===n.type&&(r=new ue(e,null),r.attributes.viewBox=new st(e,"viewBox",n.getAttribute("viewBox").getString()),r.attributes.preserveAspectRatio=new st(e,"preserveAspectRatio",n.getAttribute("preserveAspectRatio").getString()),r.attributes.overflow=new st(e,"overflow",n.getAttribute("overflow").getString()),r.children=n.children),"svg"===r.type){var i=this.getStyle("width",!1,!0),a=this.getStyle("height",!1,!0);i.hasValue()&&(r.attributes.width=new st(e,"width",i.getString())),a.hasValue()&&(r.attributes.height=new st(e,"height",a.getString()))}var o=r.parent;r.parent=this,r.render(t),r.parent=o}}},{key:"getBoundingBox",value:function(t){var e=this.element;return e?e.getBoundingBox(t):null}},{key:"elementTransform",value:function(){var t=this.document,e=this.element;return _t.fromElement(t,e)}},{key:"element",get:function(){return this._element||(this._element=this.getHrefAttribute().getDefinition()),this._element}}]),n}(Xt);function Gn(t){return function(){var e,n=S()(t);if(Yn()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Yn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Un(t,e,n,r,i,a){return t[n*r*4+4*e+a]}function Zn(t,e,n,r,i,a,o){t[n*r*4+4*e+a]=o}function Qn(t,e,n){var r=t[e];return r*(r<0?n-255:n)}function Kn(t,e,n,r){return e+Math.cos(t)*n+Math.sin(t)*r}var Jn=function(t){z()(n,t);var e=Gn(n);function n(t,r,i){var a;f()(this,n),a=e.call(this,t,r,i),a.type="feColorMatrix";var o=V(a.getAttribute("values").getString());switch(a.getAttribute("type").getString("matrix")){case"saturate":var s=o[0];o=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var u=o[0]*Math.PI/180;o=[Kn(u,.213,.787,-.213),Kn(u,.715,-.715,-.715),Kn(u,.072,-.072,.928),0,0,Kn(u,.213,-.213,.143),Kn(u,.715,.285,.14),Kn(u,.072,-.072,-.283),0,0,Kn(u,.213,-.213,-.787),Kn(u,.715,-.715,.715),Kn(u,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}return a.matrix=o,a.includeOpacity=a.getAttribute("includeOpacity").hasValue(),a}return g()(n,[{key:"apply",value:function(t,e,n,r,i){for(var a=this.includeOpacity,o=this.matrix,s=t.getImageData(0,0,r,i),u=0;u<i;u++)for(var c=0;c<r;c++){var l=Un(s.data,c,u,r,i,0),h=Un(s.data,c,u,r,i,1),f=Un(s.data,c,u,r,i,2),d=Un(s.data,c,u,r,i,3),g=Qn(o,0,l)+Qn(o,1,h)+Qn(o,2,f)+Qn(o,3,d)+Qn(o,4,1),p=Qn(o,5,l)+Qn(o,6,h)+Qn(o,7,f)+Qn(o,8,d)+Qn(o,9,1),v=Qn(o,10,l)+Qn(o,11,h)+Qn(o,12,f)+Qn(o,13,d)+Qn(o,14,1),y=Qn(o,15,l)+Qn(o,16,h)+Qn(o,17,f)+Qn(o,18,d)+Qn(o,19,1);a&&(g=p=v=0,y*=d/255),Zn(s.data,c,u,r,i,0,g),Zn(s.data,c,u,r,i,1,p),Zn(s.data,c,u,r,i,2,v),Zn(s.data,c,u,r,i,3,y)}t.clearRect(0,0,r,i),t.putImageData(s,0,0)}}]),n}(Dt);function tr(t){return function(){var e,n=S()(t);if(er()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function er(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var nr=function(t){z()(n,t);var e=tr(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="mask",t}return g()(n,[{key:"apply",value:function(t,e){var r=this.document,i=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");if(!o&&!s){var u=new $t;this.children.forEach((function(e){u.addBoundingBox(e.getBoundingBox(t))})),i=Math.floor(u.x1),a=Math.floor(u.y1),o=Math.floor(u.width),s=Math.floor(u.height)}var c=this.removeStyles(e,n.ignoreStyles),l=r.createCanvas(i+o,a+s),h=l.getContext("2d");r.screen.setDefaults(h),this.renderChildren(h),new Jn(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(h,0,0,i+o,a+s);var f=r.createCanvas(i+o,a+s),d=f.getContext("2d");r.screen.setDefaults(d),e.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=h.createPattern(l,"no-repeat"),d.fillRect(0,0,i+o,a+s),t.fillStyle=d.createPattern(f,"no-repeat"),t.fillRect(0,0,i+o,a+s),this.restoreStyles(e,c)}},{key:"render",value:function(t){}}]),n}(Dt);function rr(t){return function(){var e,n=S()(t);if(ir()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function ir(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}nr.ignoreStyles=["mask","transform","clip-path"];var ar=function(){},or=function(t){z()(n,t);var e=rr(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="clipPath",t}return g()(n,[{key:"apply",value:function(t){var e=this.document,n=Reflect.getPrototypeOf(t),r=t.beginPath,i=t.closePath;n&&(n.beginPath=ar,n.closePath=ar),Reflect.apply(r,t,[]),this.children.forEach((function(r){if("undefined"!==typeof r.path){var a="undefined"!==typeof r.elementTransform?r.elementTransform():null;a||(a=_t.fromElement(e,r)),a&&a.apply(t),r.path(t),n&&(n.closePath=i),a&&a.unapply(t)}})),Reflect.apply(i,t,[]),t.clip(),n&&(n.beginPath=r,n.closePath=i)}},{key:"render",value:function(t){}}]),n}(Dt);function sr(t){return function(){var e,n=S()(t);if(ur()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function ur(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var cr=function(t){z()(n,t);var e=sr(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="filter",t}return g()(n,[{key:"apply",value:function(t,e){var r=this.document,i=this.children,a=e.getBoundingBox(t);if(a){var o=0,s=0;i.forEach((function(t){var e=t.extraFilterDistance||0;o=Math.max(o,e),s=Math.max(s,e)}));var u=Math.floor(a.width),c=Math.floor(a.height),l=u+2*o,h=c+2*s;if(!(l<1||h<1)){var f=Math.floor(a.x),d=Math.floor(a.y),g=this.removeStyles(e,n.ignoreStyles),p=r.createCanvas(l,h),v=p.getContext("2d");r.screen.setDefaults(v),v.translate(-f+o,-d+s),e.render(v),i.forEach((function(t){"function"===typeof t.apply&&t.apply(v,0,0,l,h)})),t.drawImage(p,0,0,l,h,f-o,d-s,l,h),this.restoreStyles(e,g)}}}},{key:"render",value:function(t){}}]),n}(Dt);function lr(t){return function(){var e,n=S()(t);if(hr()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function hr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}cr.ignoreStyles=["filter","transform","clip-path"];var fr=function(t){z()(n,t);var e=lr(n);function n(t,r,i){var a;return f()(this,n),a=e.call(this,t,r,i),a.type="feDropShadow",a.addStylesFromStyleDefinition(),a}return g()(n,[{key:"apply",value:function(t,e,n,r,i){}}]),n}(Dt);function dr(t){return function(){var e,n=S()(t);if(gr()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function gr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var pr=function(t){z()(n,t);var e=dr(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="feMorphology",t}return g()(n,[{key:"apply",value:function(t,e,n,r,i){}}]),n}(Dt);function vr(t){return function(){var e,n=S()(t);if(yr()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function yr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var mr=function(t){z()(n,t);var e=vr(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="feComposite",t}return g()(n,[{key:"apply",value:function(t,e,n,r,i){}}]),n}(Dt);function xr(t){return function(){var e,n=S()(t);if(br()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function br(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var wr=function(t){z()(n,t);var e=xr(n);function n(t,r,i){var a;return f()(this,n),a=e.call(this,t,r,i),a.type="feGaussianBlur",a.blurRadius=Math.floor(a.getAttribute("stdDeviation").getNumber()),a.extraFilterDistance=a.blurRadius,a}return g()(n,[{key:"apply",value:function(t,e,n,r,i){var a=this.document,o=this.blurRadius,s=a.window?a.window.document.body:null,u=t.canvas;u.id=a.getUniqueId(),s&&(u.style.display="none",s.appendChild(u)),Object(M["a"])(u,e,n,r,i,o),s&&s.removeChild(u)}}]),n}(Dt);function Sr(t){return function(){var e,n=S()(t);if(kr()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function kr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var zr=function(t){z()(n,t);var e=Sr(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="title",t}return n}(Dt);function Pr(t){return function(){var e,n=S()(t);if(Cr()){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)}}function Cr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Rr=function(t){z()(n,t);var e=Pr(n);function n(){var t;return f()(this,n),t=e.apply(this,arguments),t.type="desc",t}return n}(Dt),Er={svg:ue,rect:he,circle:ge,ellipse:ye,line:be,polyline:ke,polygon:Ce,path:ae,pattern:Ae,marker:_e,defs:Ve,linearGradient:Fe,radialGradient:Ge,stop:Ze,animate:Je,animateColor:nn,animateTransform:on,font:fn,"font-face":pn,"missing-glyph":mn,glyph:wn,text:Yt,tspan:Qt,tref:zn,a:Rn,textPath:Dn,image:Hn,g:Ie,symbol:Ln,style:Bn,use:qn,mask:nr,clipPath:or,filter:cr,feDropShadow:fr,feMorphology:pr,feComposite:mr,feColorMatrix:Jn,feGaussianBlur:wr,title:zr,desc:Rr};function Ar(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ar(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mr(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n}function _r(t){return Dr.apply(this,arguments)}function Dr(){return Dr=u()(o.a.mark((function t(e){var n,r,i=arguments;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],r=document.createElement("img"),n&&(r.crossOrigin="Anonymous"),t.abrupt("return",new Promise((function(t,n){r.onload=function(){t(r)},r.onerror=function(){n()},r.src=e})));case 4:case"end":return t.stop()}}),t)}))),Dr.apply(this,arguments)}var Or=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.rootEmSize,i=void 0===r?12:r,a=n.emSize,o=void 0===a?12:a,s=n.createCanvas,u=void 0===s?t.createCanvas:s,c=n.createImage,l=void 0===c?t.createImage:c,h=n.anonymousCrossOrigin;f()(this,t),this.canvg=e,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=i,this.emSize=o,this.createCanvas=u,this.createImage=this.bindCreateImage(l,h),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}return g()(t,[{key:"bindCreateImage",value:function(t,e){return"boolean"===typeof e?function(n,r){return t(n,"boolean"===typeof r?r:e)}:t}},{key:"popEmSize",value:function(){var t=this.emSizeStack;t.pop()}},{key:"getUniqueId",value:function(){return"canvg".concat(++this.uniqueId)}},{key:"isImagesLoaded",value:function(){return this.images.every((function(t){return t.loaded}))}},{key:"isFontsLoaded",value:function(){return this.fonts.every((function(t){return t.loaded}))}},{key:"createDocumentElement",value:function(t){var e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}},{key:"createElement",value:function(e){var n=e.nodeName.replace(/^[^:]+:/,""),r=t.elementTypes[n];return"undefined"!==typeof r?new r(this,e):new Ht(this,e)}},{key:"createTextNode",value:function(t){return new te(this,t)}},{key:"setViewBox",value:function(t){this.screen.setViewBox(Tr({document:this},t))}},{key:"window",get:function(){return this.screen.window}},{key:"fetch",get:function(){return this.screen.fetch}},{key:"ctx",get:function(){return this.screen.ctx}},{key:"emSize",get:function(){var t=this.emSizeStack;return t[t.length-1]},set:function(t){var e=this.emSizeStack;e.push(t)}}]),t}();function Vr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Hr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vr(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Or.createCanvas=Mr,Or.createImage=_r,Or.elementTypes=Er;var Nr=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f()(this,t),this.parser=new vt(r),this.screen=new dt(e,r),this.options=r;var i=new Or(this,r),a=i.createDocumentElement(n);this.document=i,this.documentElement=a}return g()(t,[{key:"fork",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.from(e,n,Hr({},this.options,{},r))}},{key:"forkString",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.fromString(e,n,Hr({},this.options,{},r))}},{key:"ready",value:function(){return this.screen.ready()}},{key:"isReady",value:function(){return this.screen.isReady()}},{key:"render",value:function(){var t=u()(o.a.mark((function t(){var e,n=arguments;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},this.start(Hr({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},e)),t.next=4,this.ready();case 4:this.stop();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.documentElement,n=this.screen,r=this.options;n.start(e,Hr({enableRedraw:!0},r,{},t))}},{key:"stop",value:function(){this.screen.stop()}},{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(t,e,n)}}],[{key:"from",value:function(){var e=u()(o.a.mark((function e(n,r){var i,a,s,u=arguments;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]?u[2]:{},a=new vt(i),e.next=4,a.parse(r);case 4:return s=e.sent,e.abrupt("return",new t(n,s,i));case 6:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"fromString",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new vt(r),a=i.parseFromString(n);return new t(e,a,r)}}]),t}();e["a"]=Nr}).call(this,n("4362"))},1148:function(t,e,n){"use strict";var r=n("a691"),i=n("1d80");t.exports="".repeat||function(t){var e=String(i(this)),n="",a=r(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},"11b0":function(t,e,n){function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0"),t.exports=r},1242:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-svg",style:t.elementStyles,on:{mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.transfromHandler(e)}}},[n("div",{staticClass:"element-main",domProps:{innerHTML:t._s(t.html)}}),n("i",{staticClass:"border-before"})])},i=[],a=(n("99af"),n("4160"),n("a15b"),n("a9e3"),n("ac1f"),n("5319"),n("159b"),n("a10b")),o={name:"vx-editor-svg",props:{data:{},zoom:{type:Number,default:0},index:Number,parent:{type:Number,default:-1},cutable:{type:Boolean,default:!1}},data:function(){return{svg:""}},computed:{elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{opacity:this.data.opacity,transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:this.data.width*this.zoom+"px",height:this.data.height*this.zoom+"px",top:this.data.top*this.zoom+"px",left:this.data.left*this.zoom+"px"}},mainStyles:function(){return{borderRadius:this.data.borderRadius,overflow:this.data.hidden?"hidden":"visible",opacity:this.data.opacity,padding:this.data.padding.join("px")}},imageStyles:function(){var t=this.data.clip||{};return{position:"absolute",top:(t.top||0)+"px",left:(t.left||0)+"px",width:(t.width||this.data.width)*this.zoom+"px",height:(t.height||this.data.height)*this.zoom+"px"}},html:function(){var t=this.svg;return this.data.colors.length>=0&&this.data.colors.forEach((function(e,n){t=t.replace("{{colors[".concat(n,"]}}"),e)})),t}},mounted:function(){this.getSvgHandler(this.data.url)},methods:{hoverHandler:function(){this.$emit("event",{index:this.index,type:"hover",editable:!1,parent:this.parent})},transfromHandler:function(){this.$emit("event",{index:this.index,type:"transfrom",editable:!1,parent:this.parent})},getSvgHandler:function(t){var e=this;this.$axios.get(t,{}).then((function(t){e.svg=t})).catch((function(t){a["c"].danger(t)}))}}},s=o,u=n("2877"),c=Object(u["a"])(s,r,i,!1,null,null,null);e["a"]=c.exports},1276:function(t,e,n){"use strict";var r=n("d784"),i=n("44e7"),a=n("825a"),o=n("1d80"),s=n("4840"),u=n("8aa5"),c=n("50c4"),l=n("14c3"),h=n("9263"),f=n("d039"),d=[].push,g=Math.min,p=4294967295,v=!f((function(){return!RegExp(p,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(o(this)),a=void 0===n?p:n>>>0;if(0===a)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,a);var s,u,c,l=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,v=new RegExp(t.source,f+"g");while(s=h.call(v,r)){if(u=v.lastIndex,u>g&&(l.push(r.slice(g,s.index)),s.length>1&&s.index<r.length&&d.apply(l,s.slice(1)),c=s[0].length,g=u,l.length>=a))break;v.lastIndex===s.index&&v.lastIndex++}return g===r.length?!c&&v.test("")||l.push(""):l.push(r.slice(g)),l.length>a?l.slice(0,a):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=o(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var h=a(t),f=String(this),d=s(h,RegExp),y=h.unicode,m=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(v?"y":"g"),x=new d(v?h:"^(?:"+h.source+")",m),b=void 0===i?p:i>>>0;if(0===b)return[];if(0===f.length)return null===l(x,f)?[f]:[];var w=0,S=0,k=[];while(S<f.length){x.lastIndex=v?S:0;var z,P=l(x,v?f:f.slice(S));if(null===P||(z=g(c(x.lastIndex+(v?0:S)),f.length))===w)S=u(f,S,y);else{if(k.push(f.slice(w,S)),k.length===b)return k;for(var C=1;C<=P.length-1;C++)if(k.push(P[C]),k.length===b)return k;S=w=z}}return k.push(f.slice(w)),k}]}),!v)},"131a":function(t,e,n){var r=n("23e7"),i=n("d2bb");r({target:"Object",stat:!0},{setPrototypeOf:i})},"13d5":function(t,e,n){"use strict";var r=n("23e7"),i=n("d58f").left,a=n("a640"),o=n("ae40"),s=a("reduce"),u=o("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2236:function(t,e,n){var r=n("5a43");function i(t){if(Array.isArray(t))return r(t)}t.exports=i},"23dc":function(t,e,n){var r=n("d44e");r(Math,"Math",!0)},"26e9":function(t,e,n){"use strict";var r=n("23e7"),i=n("e8b5"),a=[].reverse,o=[1,2];r({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a.call(this)}})},"278c":function(t,e,n){var r=n("c135"),i=n("9b42"),a=n("6613"),o=n("c240");function s(t,e){return r(t)||i(t,e)||a(t,e)||o()}t.exports=s},"2ca0":function(t,e,n){"use strict";var r=n("23e7"),i=n("06cf").f,a=n("50c4"),o=n("5a34"),s=n("1d80"),u=n("ab13"),c=n("c430"),l="".startsWith,h=Math.min,f=u("startsWith"),d=!c&&!f&&!!function(){var t=i(String.prototype,"startsWith");return t&&!t.writable}();r({target:"String",proto:!0,forced:!d&&!f},{startsWith:function(t){var e=String(s(this));o(t);var n=a(h(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return l?l.call(e,r,n):e.slice(n,n+r.length)===r}})},3042:function(t,e,n){},3410:function(t,e,n){var r=n("23e7"),i=n("d039"),a=n("7b0b"),o=n("e163"),s=n("e177"),u=i((function(){o(1)}));r({target:"Object",stat:!0,forced:u,sham:!s},{getPrototypeOf:function(t){return o(a(t))}})},"36c6":function(t,e,n){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(e)}n("3410"),n("131a"),t.exports=r},"38cf":function(t,e,n){var r=n("23e7"),i=n("1148");r({target:"String",proto:!0},{repeat:i})},"3c96":function(t,e){function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}t.exports=n},"448a":function(t,e,n){var r=n("2236"),i=n("11b0"),a=n("6613"),o=n("0676");function s(t){return r(t)||i(t)||a(t)||o()}t.exports=s},"491c":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-group",style:t.elementStyles},[t._l(t.data.elements,(function(e,r){return["text"===e.type?n("vx-group-text",{key:e.id,class:{"editor-element-selected":t.itemSelected===t.index+"-"+r},attrs:{index:r,parent:t.index,zoom:t.zoom,editor:t.editor===t.index+"-"+r,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}},model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"item.content"}}):t._e(),"threeText"===e.type?n("vx-group-three-text",{key:e.id,class:{"editor-element-selected":t.selectedItem.includes(t.index)},attrs:{index:r,zoom:t.zoom,editor:t.editor===t.index+"-"+r,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}},model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"item.content"}}):t._e(),["image","mask"].includes(e.type)?n("vx-group-image",{key:e.id,class:{"editor-element-selected":t.itemSelected===t.index+"-"+r},attrs:{zoom:t.zoom,index:r,parent:t.index,cutable:t.cutable&&t.selected.index===r,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}}}):t._e(),["svg"].includes(e.type)?n("vx-group-svg",{directives:[{name:"show",rawName:"v-show",value:"print"!==t.type,expression:"type !== 'print'"}],key:e.id,ref:"groupsvg",refInFor:!0,class:{"editor-element-selected":t.itemSelected===t.index+"-"+r},attrs:{zoom:t.zoom,index:r,parent:t.index,cutable:t.cutable&&t.selected.index===r,data:e},on:{event:t.selectWidgetHandler,"update:data":function(t){e=t}}}):t._e()]})),n("i",{staticClass:"border-before"})],2)},i=[],a=(n("99af"),n("a9e3"),n("81ac")),o=n("9192"),s=n("5c61"),u=n("fd31"),c=n("1242"),l={name:"vx-editor-group",props:{data:{},zoom:{type:Number,default:0},index:Number,editor:String,selected:{},cutable:{type:Boolean,default:!1},type:{type:String,default:""}},computed:{elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{opacity:this.data.opacity,transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:(this.data.width*this.zoom||0)+"px",height:(this.data.height*this.zoom||0)+"px",top:(this.data.top*this.zoom||0)+"px",left:(this.data.left*this.zoom||0)+"px"}},itemSelected:function(){var t=a["a"].current();if(-1!==t.id)return"".concat(t.id,"-").concat(t.index)}},components:{VxGroupText:o["a"],VxGroupThreeText:s["a"],VxGroupImage:u["a"],VxGroupSvg:c["a"]},methods:{selectWidgetHandler:function(t){this.$emit("event",t)}}},h=l,f=n("2877"),d=Object(f["a"])(h,r,i,!1,null,null,null);e["a"]=d.exports},"498a":function(t,e,n){"use strict";var r=n("23e7"),i=n("58a8").trim,a=n("c8d2");r({target:"String",proto:!0,forced:a("trim")},{trim:function(){return i(this)}})},"4a4b":function(t,e,n){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(e,n)}n("131a"),t.exports=r},"4ae1":function(t,e,n){var r=n("23e7"),i=n("d066"),a=n("1c0b"),o=n("825a"),s=n("861d"),u=n("7c73"),c=n("0538"),l=n("d039"),h=i("Reflect","construct"),f=l((function(){function t(){}return!(h((function(){}),[],t)instanceof t)})),d=!l((function(){h((function(){}))})),g=f||d;r({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(t,e){a(t),o(e);var n=arguments.length<3?t:a(arguments[2]);if(d&&!f)return h(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var i=n.prototype,l=u(s(i)?i:Object.prototype),g=Function.apply.call(t,l,e);return s(g)?g:l}})},"4de4":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").filter,a=n("1dde"),o=n("ae40"),s=a("filter"),u=o("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4ec9":function(t,e,n){"use strict";var r=n("6d61"),i=n("6566");t.exports=r("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},5319:function(t,e,n){"use strict";var r=n("d784"),i=n("825a"),a=n("7b0b"),o=n("50c4"),s=n("a691"),u=n("1d80"),c=n("8aa5"),l=n("14c3"),h=Math.max,f=Math.min,d=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,v=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,n,r){var y=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,x=y?"$":"$0";return[function(n,r){var i=u(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!y&&m||"string"===typeof r&&-1===r.indexOf(x)){var a=n(e,t,this,r);if(a.done)return a.value}var u=i(t),d=String(this),g="function"===typeof r;g||(r=String(r));var p=u.global;if(p){var w=u.unicode;u.lastIndex=0}var S=[];while(1){var k=l(u,d);if(null===k)break;if(S.push(k),!p)break;var z=String(k[0]);""===z&&(u.lastIndex=c(d,o(u.lastIndex),w))}for(var P="",C=0,R=0;R<S.length;R++){k=S[R];for(var E=String(k[0]),A=h(f(s(k.index),d.length),0),T=[],M=1;M<k.length;M++)T.push(v(k[M]));var _=k.groups;if(g){var D=[E].concat(T,A,d);void 0!==_&&D.push(_);var O=String(r.apply(void 0,D))}else O=b(E,d,A,T,_,r);A>=C&&(P+=d.slice(C,A)+O,C=A+E.length)}return P+d.slice(C)}];function b(t,n,r,i,o,s){var u=r+t.length,c=i.length,l=p;return void 0!==o&&(o=a(o),l=g),e.call(s,l,(function(e,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return e;if(l>c){var h=d(l/10);return 0===h?e:h<=c?void 0===i[h-1]?a.charAt(1):i[h-1]+a.charAt(1):e}s=i[l-1]}return void 0===s?"":s}))}}))},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"58e1":function(t,e){t.exports=function(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=e[t]||t;for(var n=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,a=n[r].process,o=i.exec(t);if(o){var s=a(o);this.r=s[0],this.g=s[1],this.b=s[2],s.length>3&&(this.alpha=s[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,r=0;r<n.length;r++)for(var i=n[r].example,a=0;a<i.length;a++)t[t.length]=i[a];for(var o in e)t[t.length]=o;var s=document.createElement("ul");s.setAttribute("id","rgbcolor-examples");for(r=0;r<t.length;r++)try{var u=document.createElement("li"),c=new RGBColor(t[r]),l=document.createElement("div");l.style.cssText="margin: 3px; border: 1px solid black; background:"+c.toHex()+"; color:"+c.toHex(),l.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+t[r]+" -> "+c.toRGB()+" -> "+c.toHex());u.appendChild(l),u.appendChild(h),s.appendChild(u)}catch(f){}return s}}},"5a43":function(t,e){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=n},"5bc3":function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}t.exports=r},"5c61":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-three-text",class:{"editor-element-editing":t.editor},style:t.elementStyles,on:{mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.transfromHandler(e)}}},[n("div",{staticClass:"element-main"},[n("div",{staticClass:"three-text",style:t.mainStyles,on:{mousemove:function(t){t.stopPropagation()}}},[t.editor?n("div",{ref:"edit",style:t.textStyles,attrs:{contenteditable:t.editor}}):n("canvas",{style:t.textStyles})])]),n("i",{staticClass:"border-before"})])},i=[],a=(n("99af"),n("4160"),n("a15b"),n("a9e3"),n("38cf"),n("159b"),{name:"vx-editor-three-text",props:{data:{},value:String,zoom:{type:Number,default:0},index:Number,editor:Boolean,parent:{type:Number,default:-1}},computed:{elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{overflow:this.data.hidden?"hidden":"visible",transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:this.data.width*this.zoom+"px",height:this.data.height*this.zoom+"px",top:this.data.top*this.zoom+"px",left:this.data.left*this.zoom+"px",opacity:this.data.opacity}},mainStyles:function(){var t={color:this.data.color,fontFamily:this.data.fontFamily,fontSize:this.data.fontSize+"px",letterSpacing:this.data.letterSpacing+"px",verticalAlign:this.data.verticalAlign,width:"100%",height:"auto",minHeight:this.data.height*this.zoom+"px"};if(this.data.textEffects&&this.data.textEffects.length>0){var e=this.data.textEffects,n=null,r=null,i=null,a=null,o=null,s=null,u=null;e.forEach((function(t){if(t.filling.enable){if(0===t.filling.type&&(i="".concat(t.filling.color)),1===t.filling.type){var e=t.filling.imageContent;i="transparent",a="url(".concat(e.image,")"),o="".concat(e.width*e.scaleX,"px ").concat(e.height*e.scaleY,"px"),s=1===e.repeat?"repeat":null,u="text"}if(2===t.filling.type){var c=t.filling.gradient;i="transparent";var l=["".concat(c.angle+90,"deg")];c.forEach((function(t){l.push("".concat(t.color," ").concat(100*t.offset,"%"))})),a="linear-gradient(".concat(l.join(","),")")}}else i=null,a=null,o=null,s=null,u=null;n=t.shadow.enable?"".concat(t.shadow.color," ").concat(t.shadow.offsetX,"px ").concat(t.shadow.offsetY,"px ").concat(t.shadow.blur,"px"):null,r=t.stroke.enable?"".concat(t.stroke.width,"px ").concat(t.stroke.color):null})),n&&(t["textShadow"]=n),r&&(t["-webkit-text-stroke"]=r),i&&(t["-webkit-text-fill-color"]=i),o&&(t["backgroundSize"]=o),a&&(t["backgroundImage"]=a),s&&(t["backgroundRepeat"]=s),u&&(t["backgroundClip"]=u)}return t},textStyles:function(){return{color:this.data.color,fontFamily:this.data.fontFamily,fontSize:this.data.fontSize+"px",fontStyle:this.data.fontStyle,fontWeight:this.data.fontWeight,textDecoration:this.data.textDecoration}}},methods:{hoverHandler:function(){this.$emit("event",{index:this.index,type:"hover",parent:this.parent})},transfromHandler:function(){this.$emit("event",{index:this.index,type:"transfrom",parent:this.parent})}},watch:{editor:function(t){if(!t){var e=this.$refs.edit;this.$emit("input",e.innerText)}}}}),o=a,s=n("2877"),u=Object(s["a"])(o,r,i,!1,null,null,null);e["a"]=u.exports},"5d41":function(t,e,n){var r=n("23e7"),i=n("861d"),a=n("825a"),o=n("5135"),s=n("06cf"),u=n("e163");function c(t,e){var n,r,l=arguments.length<3?t:arguments[2];return a(t)===l?t[e]:(n=s.f(t,e))?o(n,"value")?n.value:void 0===n.get?void 0:n.get.call(l):i(r=u(t))?c(r,e,l):void 0}r({target:"Reflect",stat:!0},{get:c})},"5e9e":function(t,e,n){"use strict";function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return u}));var a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function s(t,e,n,i,a){if("string"===typeof t&&(t=document.getElementById(t)),!t||"object"!==r(t)||!("getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var o=t.getContext("2d");try{return o.getImageData(e,n,i,a)}catch(s){throw new Error("unable to access image data: "+s)}}function u(t,e,n,r,i,a){if(!(isNaN(a)||a<1)){a|=0;var o=s(t,e,n,r,i);o=c(o,e,n,r,i,a),t.getContext("2d").putImageData(o,e,n)}}function c(t,e,n,r,i,s){for(var u,c=t.data,h=2*s+1,f=r-1,d=i-1,g=s+1,p=g*(g+1)/2,v=new l,y=v,m=1;m<h;m++)y=y.next=new l,m===g&&(u=y);y.next=v;for(var x=null,b=null,w=0,S=0,k=a[s],z=o[s],P=0;P<i;P++){y=v;for(var C=c[S],R=c[S+1],E=c[S+2],A=c[S+3],T=0;T<g;T++)y.r=C,y.g=R,y.b=E,y.a=A,y=y.next;for(var M=0,_=0,D=0,O=0,V=g*C,H=g*R,N=g*E,I=g*A,L=p*C,j=p*R,W=p*E,$=p*A,B=1;B<g;B++){var F=S+((f<B?f:B)<<2),X=c[F],q=c[F+1],G=c[F+2],Y=c[F+3],U=g-B;L+=(y.r=X)*U,j+=(y.g=q)*U,W+=(y.b=G)*U,$+=(y.a=Y)*U,M+=X,_+=q,D+=G,O+=Y,y=y.next}x=v,b=u;for(var Z=0;Z<r;Z++){var Q=$*k>>z;if(c[S+3]=Q,0!==Q){var K=255/Q;c[S]=(L*k>>z)*K,c[S+1]=(j*k>>z)*K,c[S+2]=(W*k>>z)*K}else c[S]=c[S+1]=c[S+2]=0;L-=V,j-=H,W-=N,$-=I,V-=x.r,H-=x.g,N-=x.b,I-=x.a;var J=Z+s+1;J=w+(J<f?J:f)<<2,M+=x.r=c[J],_+=x.g=c[J+1],D+=x.b=c[J+2],O+=x.a=c[J+3],L+=M,j+=_,W+=D,$+=O,x=x.next;var tt=b,et=tt.r,nt=tt.g,rt=tt.b,it=tt.a;V+=et,H+=nt,N+=rt,I+=it,M-=et,_-=nt,D-=rt,O-=it,b=b.next,S+=4}w+=r}for(var at=0;at<r;at++){S=at<<2;var ot=c[S],st=c[S+1],ut=c[S+2],ct=c[S+3],lt=g*ot,ht=g*st,ft=g*ut,dt=g*ct,gt=p*ot,pt=p*st,vt=p*ut,yt=p*ct;y=v;for(var mt=0;mt<g;mt++)y.r=ot,y.g=st,y.b=ut,y.a=ct,y=y.next;for(var xt=r,bt=0,wt=0,St=0,kt=0,zt=1;zt<=s;zt++){S=xt+at<<2;var Pt=g-zt;gt+=(y.r=ot=c[S])*Pt,pt+=(y.g=st=c[S+1])*Pt,vt+=(y.b=ut=c[S+2])*Pt,yt+=(y.a=ct=c[S+3])*Pt,kt+=ot,bt+=st,wt+=ut,St+=ct,y=y.next,zt<d&&(xt+=r)}S=at,x=v,b=u;for(var Ct=0;Ct<i;Ct++){var Rt=S<<2;c[Rt+3]=ct=yt*k>>z,ct>0?(ct=255/ct,c[Rt]=(gt*k>>z)*ct,c[Rt+1]=(pt*k>>z)*ct,c[Rt+2]=(vt*k>>z)*ct):c[Rt]=c[Rt+1]=c[Rt+2]=0,gt-=lt,pt-=ht,vt-=ft,yt-=dt,lt-=x.r,ht-=x.g,ft-=x.b,dt-=x.a,Rt=at+((Rt=Ct+g)<d?Rt:d)*r<<2,gt+=kt+=x.r=c[Rt],pt+=bt+=x.g=c[Rt+1],vt+=wt+=x.b=c[Rt+2],yt+=St+=x.a=c[Rt+3],x=x.next,lt+=ot=b.r,ht+=st=b.g,ft+=ut=b.b,dt+=ct=b.a,kt-=ot,bt-=st,wt-=ut,St-=ct,b=b.next,S+=r}}return t}var l=function t(){i(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},6566:function(t,e,n){"use strict";var r=n("9bf2").f,i=n("7c73"),a=n("e2cc"),o=n("0366"),s=n("19aa"),u=n("2266"),c=n("7dd0"),l=n("2626"),h=n("83ab"),f=n("f183").fastKey,d=n("69f3"),g=d.set,p=d.getterFor;t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,r){s(t,l,e),g(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),h||(t.size=0),void 0!=r&&u(r,t[c],t,n)})),d=p(e),v=function(t,e,n){var r,i,a=d(t),o=y(t,e);return o?o.value=n:(a.last=o={index:i=f(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=o),r&&(r.next=o),h?a.size++:t.size++,"F"!==i&&(a.index[i]=o)),t},y=function(t,e){var n,r=d(t),i=f(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return a(l.prototype,{clear:function(){var t=this,e=d(t),n=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete n[r.index],r=r.next;e.first=e.last=void 0,h?e.size=0:t.size=0},delete:function(t){var e=this,n=d(e),r=y(e,t);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),h?n.size--:e.size--}return!!r},forEach:function(t){var e,n=d(this),r=o(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!y(this,t)}}),a(l.prototype,n?{get:function(t){var e=y(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),h&&r(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(t,e,n){var r=e+" Iterator",i=p(e),a=p(r);c(t,e,(function(t,e){g(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=a(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},6613:function(t,e,n){n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("25f0"),n("3ca3");var r=n("5a43");function i(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}t.exports=i},"6b58":function(t,e,n){var r=n("7037"),i=n("3c96");function a(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?i(t):e}t.exports=a},"6d08":function(t,e,n){(function(e){(function(){var n,r,i,a,o,s;"undefined"!==typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!==typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-o)/1e6},r=e.hrtime,n=function(){var t;return t=r(),1e9*t[0]+t[1]},a=n(),s=1e9*e.uptime(),o=a-s):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,n("4362"))},"6d61":function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),a=n("94ca"),o=n("6eeb"),s=n("f183"),u=n("2266"),c=n("19aa"),l=n("861d"),h=n("d039"),f=n("1c7e"),d=n("d44e"),g=n("7156");t.exports=function(t,e,n){var p=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),y=p?"set":"add",m=i[t],x=m&&m.prototype,b=m,w={},S=function(t){var e=x[t];o(x,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(a(t,"function"!=typeof m||!(v||x.forEach&&!h((function(){(new m).entries().next()})))))b=n.getConstructor(e,t,p,y),s.REQUIRED=!0;else if(a(t,!0)){var k=new b,z=k[y](v?{}:-0,1)!=k,P=h((function(){k.has(1)})),C=f((function(t){new m(t)})),R=!v&&h((function(){var t=new m,e=5;while(e--)t[y](e,e);return!t.has(-0)}));C||(b=e((function(e,n){c(e,b,t);var r=g(new m,e,b);return void 0!=n&&u(n,r[y],r,p),r})),b.prototype=x,x.constructor=b),(P||R)&&(S("delete"),S("has"),p&&S("get")),(R||z)&&S(y),v&&x.clear&&delete x.clear}return w[t]=b,r({global:!0,forced:b!=m},w),d(b,t),v||n.setStrong(b,t,p),b}},"6e7c":function(t,e,n){"use strict";n.d(e,"a",(function(){return pt})),n.d(e,"b",(function(){return vt["default"]}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-container"},[n("vx-editor-tip-bar"),n("div",{ref:"container",staticClass:"design-container",attrs:{id:"js-container"},on:{contextmenu:function(e){return e.stopPropagation(),e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.pointerRightDown(e)},click:function(e){return e.target!==e.currentTarget||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.selectCanvasHandler(e)}}},[n("div",{staticClass:"design-canvas",style:t.canvasStyles},[n("div",{staticClass:"editor-shell",style:t.canvasStyles},[n("div",{ref:"canvas",staticClass:"editor-canvas"},[n("div",{staticClass:"editor-layout"},[n("vx-Editor-bg",{attrs:{zoom:t.global.zoom},on:{select:t.selectBgHandler}}),n("vx-water-mark")],1),t._l(t.layout.elements,(function(e,r){return[n("vx-shape",{key:r,attrs:{item:e,index:r},on:{move:function(e){t.contextmenuShow=!1}}})]}))],2),n("div",{staticClass:"editor-hover",class:["hover-"+t.type,{"hover-lock":t.lock}]}),n("vx-editor-guider"),n("vx-image-cut"),n("vx-toolbar")],1)]),n("vx-selector"),n("vx-contextmenu",{attrs:{selectWidget:t.selectWidget,top:t.contextmenuTop,left:t.contextmenuleft},model:{value:t.contextmenuShow,callback:function(e){t.contextmenuShow=e},expression:"contextmenuShow"}})],1)],1)},i=[],a=n("81ac"),o=n("a10b"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-tip-bar"},[n("div",{staticClass:"editor-slot-tipbar__watermark"},[n("el-switch",{staticClass:"watermark-tips__switch",on:{change:t.changeWatermask},model:{value:t.watermark,callback:function(e){t.watermark=e},expression:"watermark"}}),n("span",{staticClass:"watermark-tips__content",on:{click:function(e){return e.target!==e.currentTarget?null:t.changeWatermask(e)}}},[t._v(t._s(t.watermark?"":"")+"")])],1)])},u=[],c={name:"vx-editor-tip-bar",data:function(){return{watermark:a["a"].global().showWatermark}},methods:{changeWatermask:function(){a["b"].setWaterMask(this.watermark),console.log(this.watermark)}}},l=c,h=n("2877"),f=Object(h["a"])(l,s,u,!1,null,null,null),d=f.exports,g=n("b2ba"),p=n("b5ed"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-guider"},[n("div",{staticClass:"editor-guider-line editor-guider-t",style:t.tStyles}),n("div",{staticClass:"editor-guider-line editor-guider-l",style:t.lStyles}),n("div",{staticClass:"editor-guider-line editor-guider-b",style:t.bStyles}),n("div",{staticClass:"editor-guider-line editor-guider-r",style:t.rStyles}),n("div",{staticClass:"editor-guider-line editor-guider-cx",style:t.cxStyles}),n("div",{staticClass:"editor-guider-line editor-guider-cy",style:t.cyStyles})])},y=[],m={name:"vx-editor-guider",computed:{zoom:function(){return a["a"].zoom()},guider:function(){return a["a"].guider()},tStyles:function(){if(!Object.prototype.hasOwnProperty.call(this.guider,"T"))return{};var t=this.guider.T;return{top:t.t&&t.t>0?"".concat(t.t*this.zoom,"px"):"0",left:t.l&&t.l>0?"".concat(t.l*this.zoom,"px"):"0",right:t.r&&t.r>0?"".concat(t.r*this.zoom,"px"):"0",display:"block"}},lStyles:function(){if(!Object.prototype.hasOwnProperty.call(this.guider,"L"))return{};var t=this.guider.L;return{top:t.t&&t.t>0?"".concat(t.t*this.zoom,"px"):"0",left:t.l&&t.l>0?"".concat(t.l*this.zoom,"px"):"0",bottom:t.b&&t.b>0?"".concat(t.b*this.zoom,"px"):"0",display:"block"}},bStyles:function(){if(!Object.prototype.hasOwnProperty.call(this.guider,"B"))return{};var t=this.guider.B;return{bottom:t.b&&t.b>0?"".concat(t.b*this.zoom,"px"):"0",left:t.l&&t.l>0?"".concat(t.l*this.zoom,"px"):"0",right:t.r&&t.r>0?"".concat(t.r*this.zoom,"px"):"0",display:"block"}},rStyles:function(){if(!Object.prototype.hasOwnProperty.call(this.guider,"R"))return{};var t=this.guider.R;return{right:t.r&&t.r>0?"".concat(t.r*this.zoom,"px"):"0",top:t.t&&t.t>0?"".concat(t.t*this.zoom,"px"):"0",bottom:t.b&&t.b>0?"".concat(t.b*this.zoom,"px"):"0",display:"block"}},cxStyles:function(){if(!Object.prototype.hasOwnProperty.call(this.guider,"cx"))return{};var t=this.guider.cx;return{right:0,top:t.t&&t.t>0?"".concat(t.t*this.zoom,"px"):"0",left:0,display:"block"}},cyStyles:function(){if(!Object.prototype.hasOwnProperty.call(this.guider,"cy"))return{};var t=this.guider.cy;return{top:0,left:t.l&&t.l>0?"".concat(t.l*this.zoom,"px"):"0",bottom:0,display:"block"}}},mounted:function(){window.addEventListener("mouseup",(function(){a["b"].setGuider({})}))}},x=m,b=Object(h["a"])(x,v,y,!1,null,null,null),w=b.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.cutable,expression:"cutable"}],ref:"cut",staticClass:"editor-image-cut",style:t.styles,on:{mousedown:function(e){return e.stopPropagation(),t.mousedownHandler(e)}}},[n("img",{staticClass:"editor-image-cut-mask",style:t.imageStyles,attrs:{src:t.widget.url}}),n("div",{ref:"inner",staticClass:"editor-image-cut-inner",style:t.innerStyles},[n("img",{staticStyle:{position:"relative"},style:t.innerImageStyles,attrs:{src:t.widget.url}}),n("div",{staticClass:"editor-image-cut-grid",class:{active:t.dragging}},[n("i",{staticClass:"editor-cut-grid-x1"}),n("i",{staticClass:"editor-cut-grid-x2"}),n("i",{staticClass:"editor-cut-grid-y1"}),n("i",{staticClass:"editor-cut-grid-y2"})])])])},k=[],z={name:"vx-image-cut",data:function(){return{dragging:!1,l:0,t:0}},computed:{zoom:function(){return a["a"].zoom()},widget:function(){return a["a"].cutImage()},cutZoom:function(){return a["a"].cutZoom()/100},cutable:function(){return a["a"].cutable()},styles:function(){var t={};return t.left="".concat(this.widget.l*this.zoom+this.widget.left,"px"),t.top="".concat(this.widget.t*this.zoom+this.widget.top,"px"),t.width="".concat(this.widget.width*this.cutZoom*this.zoom||0,"px"),t.height="".concat(this.widget.height*this.cutZoom*this.zoom||0,"px"),t},innerStyles:function(){var t={};return t.left="".concat(-this.widget.left,"px"),t.top="".concat(-this.widget.top,"px"),t.width="".concat(this.widget.w*this.zoom||0,"px"),t.height="".concat(this.widget.h*this.zoom||0,"px"),t},imageStyles:function(){var t={};return t.width="".concat(this.widget.width*this.cutZoom*this.zoom||0,"px"),t.height="".concat(this.widget.height*this.cutZoom*this.zoom||0,"px"),t},innerImageStyles:function(){var t={};return t.left="".concat(this.widget.left,"px"),t.top="".concat(this.widget.top,"px"),t.width="".concat(this.widget.width*this.cutZoom*this.zoom||0,"px"),t.height="".concat(this.widget.height*this.cutZoom*this.zoom||0,"px"),t},gridStyles:function(){var t={};return t.left="".concat(this.widget.left,"px"),t.top="".concat(this.widget.top,"px"),t}},mounted:function(){var t=this;window.addEventListener("mouseup",(function(){t.dragging=!1,window.removeEventListener("mousemove",t.mouseMoveHandler)}))},methods:{mousedownHandler:function(){this.dragging=!0,this.l=event.clientX-event.target.offsetLeft,this.t=event.clientY-event.target.offsetTop,window.addEventListener("mousemove",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.dragging){var e=this.widget.left,n=this.widget.top;e=t.clientX-this.l,n=t.clientY-this.t,a["b"].setCutImageInfo({left:e,top:n})}}}},P=z,C=Object(h["a"])(P,S,k,!1,null,null,null),R=C.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"editor-toolbar",style:t.styles},[n("div",{staticClass:"editor-toolbar-content"},[n("span",{staticClass:"editor-toolbar__label"},[t._v("")]),n("span",{staticClass:"editor-toolbar__zoom"},[n("el-slider",{attrs:{min:5,max:200,"format-tooltip":t.formatZoom},model:{value:t.zoom,callback:function(e){t.zoom=e},expression:"zoom"}})],1),n("span",{staticClass:"editor-toolbar__ok btn-tip",attrs:{"aria-label":""},on:{click:t.okHandler}},[n("vx-icon",{attrs:{name:"ok"}})],1),n("span",{staticClass:"editor-toolbar__cancel btn-tip",attrs:{"aria-label":""},on:{click:t.cancelHandler}},[n("vx-icon",{attrs:{name:"cancel"}})],1)])])},A=[],T={name:"vx-editor-toolbar",computed:{zoom:{get:function(){return a["a"].cutZoom()},set:function(t){a["b"].setCutZoom(t)}},isShow:function(){return a["a"].cutable()},styles:function(){return this.isShow?{top:"".concat(a["a"].toolbarPos().top-20,"px"),left:"".concat(a["a"].toolbarPos().left,"px")}:{}}},methods:{formatZoom:function(t){return"".concat(t,"%")},okHandler:function(){a["b"].setCutOk()},cancelHandler:function(){a["b"].setCutCancel()}}},M=T,_=Object(h["a"])(M,E,A,!1,null,null,null),D=_.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-selector"},[t.selected?n("div",{ref:"selector",staticClass:"editor-selector-content",style:t.styles}):t._e()])},V=[],H=(n("4160"),n("caad"),n("c975"),n("a434"),n("2532"),n("159b"),{name:"vx-editor-selector",data:function(){return{top:0,left:0,width:0,height:0,selected:!1,l:0,t:0,canvasT:0,canvasL:0,canvasW:0,canvasH:0,selectItem:[]}},computed:{zoom:function(){return a["a"].zoom()},styles:function(){var t=this.top,e=this.left,n=this.width,r=this.height;return this.width<0&&(e=this.left+this.width,n=Math.abs(this.width)),this.height<0&&(t=this.top+this.height,r=Math.abs(this.height)),{top:t+"px",left:e+"px",width:n+"px",height:r+"px"}},selectedArea:function(){var t=this.top,e=this.left,n=this.width,r=this.height;return this.width<0&&(e=this.left+this.width,n=Math.abs(this.width)),this.height<0&&(t=this.top+this.height,r=Math.abs(this.height)),{l:e-this.canvasL,t:t-this.canvasT,b:t+r-this.canvasT,r:e+n-this.canvasL}}},mounted:function(){},methods:{initStyle:function(){this.top=0,this.left=0,this.width=0,this.height=0},selected_mousedown_Handler:function(t){var e=document.querySelector("#js-container").getBoundingClientRect();e.x&&(this.l=e.x),e.y&&(this.t=e.y);var n=document.querySelector("#js-container .editor-canvas").getBoundingClientRect();n.left&&(this.canvasL=n.left-this.l),n.top&&(this.canvasT=n.top-this.t),this.initStyle(),this.left=t.pageX-this.l,this.top=t.pageY-this.t,this.selectItem=[],window.addEventListener("mousemove",this.selected_mousemove_Handler)},selected_mousemove_Handler:function(t){t.preventDefault(),a["b"].setMulSelected(!0),this.selected=!0,this.height=t.pageY-this.t-this.top,this.width=t.pageX-this.l-this.left,this.selectElementHandler()},selected_mouseup_Handler:function(){window.removeEventListener("mousemove",this.selected_mousemove_Handler),this.selected=!1,a["b"].setMulSelected(!1),a["b"].setSelectedItem(this.selectItem),this.initStyle()},selectElementHandler:function(){var t=this;a["a"].layout().elements.forEach((function(e,n){var r=e.top*t.zoom,i=(e.left+e.width)*t.zoom,a=(e.top+e.height)*t.zoom,o=e.left*t.zoom;if(i<t.selectedArea.r&&o>t.selectedArea.l&&a<t.selectedArea.b&&r>t.selectedArea.t)!t.selectItem.includes(n)&&t.selectItem.push(n);else{var s=t.selectItem.indexOf(n);-1!==s&&t.selectItem.splice(s,1)}})),a["b"].setSelectedItem(this.selectItem)}}}),N=H,I=Object(h["a"])(N,O,V,!1,null,null,null),L=I.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"editor-contextmenu",style:t.styles},[n("ul",{staticClass:"editor-contextmenu__key"},[n("li",{on:{click:t.copyHandler}},[n("span",[t._v("")])]),n("li",{on:{click:t.cutHandler}},[n("span",[t._v("")])]),n("li",{on:{click:t.pasteHandler}},[n("span",[t._v("")])])])])},W=[],$=(n("a9e3"),{name:"vx-contextmenu",props:{selectWidget:{type:Object,default:function(){return{type:"canvas",id:-1}}},top:Number,left:Number,value:Boolean},data:function(){return{isShow:this.value}},computed:{styles:function(){var t={};return this.left<0?t.right=Math.abs(this.left)+"px":t.left=this.left+"px",this.top<0?t.bottom=Math.abs(this.top)+"px":t.top=this.top+"px",t}},methods:{resetSelect:function(){var t={type:"canvas",id:-1};a["b"].setCurrent(t)},copyHandler:function(){a["b"].copyEvent(),this.resetSelect(),this.isShow=!1},cutHandler:function(){a["b"].cutEvent(),this.resetSelect(),this.isShow=!1},pasteHandler:function(){a["b"].pasteEvent(),this.isShow=!1}},watch:{value:function(t){var e=this;this.$nextTick((function(){e.isShow=t}))},isShow:function(t){var e=this;this.$nextTick((function(){e.$emit("input",t)}))}}}),B=$,F=Object(h["a"])(B,j,W,!1,null,null,null),X=F.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("vx-transform",{style:t.elementStyles,attrs:{active:t.active,selectedItem:t.selectedItem},on:{"group-select":t.groupSelectHandler,editor:t.editorHandler,move:t.moveHandler},nativeOn:{click:function(e){return t.selectWidgetHandler(t.index)}}}),"text"===t.item.type?n("vx-editor-text",{key:t.item.id,class:{"editor-element-selected":t.selectedItem.includes(t.index)},attrs:{index:t.index,zoom:t.global.zoom,editor:-1===t.editorParent&&t.editor===t.index,data:t.item},on:{"update:data":function(e){t.item=e}},model:{value:t.item.content,callback:function(e){t.$set(t.item,"content",e)},expression:"item.content"}}):t._e(),"threeText"===t.item.type?n("vx-editor-three-text",{key:t.item.id,class:{"editor-element-selected":t.selectedItem.includes(t.index)},attrs:{index:t.index,zoom:t.global.zoom,editor:-1===t.editorParent&&t.editor===t.index,data:t.item},on:{"update:data":function(e){t.item=e}},model:{value:t.item.content,callback:function(e){t.$set(t.item,"content",e)},expression:"item.content"}}):t._e(),["image","mask"].includes(t.item.type)?n("vx-editor-image",{key:t.item.id,class:{"editor-element-selected":t.selectedItem.includes(t.index)},attrs:{zoom:t.global.zoom,index:t.index,cutable:t.cutable&&t.selectWidget.id===t.index,data:t.item},on:{"update:data":function(e){t.item=e}}}):t._e(),["svg"].includes(t.item.type)?n("vx-editor-svg",{key:t.item.id,class:{"editor-element-selected":t.selectedItem.includes(t.index)},attrs:{zoom:t.global.zoom,index:t.index,data:t.item},on:{"update:data":function(e){t.item=e}}}):t._e(),"group"===t.item.type?n("vx-editor-group",{key:t.item.id,class:{"editor-element-selected":t.selectedItem.includes(t.index)},attrs:{zoom:t.global.zoom,index:t.index,editor:t.editorParent+"-"+t.editor,selected:t.transformStyle,cutable:t.cutable,data:t.item},on:{"update:data":function(e){t.item=e}}}):t._e()],1)},G=[],Y=(n("99af"),n("9192")),U=n("5c61"),Z=n("fd31"),Q=n("491c"),K=n("1242"),J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-transform-wrap",class:{"transform-wrap-hover":!t.active&&!t.isMouseDown}},[t.active?n("div",{ref:"transform",staticClass:"editor-transform",class:{"editor-custorm":t.editor,"editor-min-w":t.widget.width*t.zoom<42,"editor-min-h":t.widget.height*t.zoom<42,"editor-lock":t.lock,"editor-transform-editing":t.cutable,"editor-transform-multiple":t.multiple},style:t.styles,on:{dblclick:function(e){return e.target!==e.currentTarget?null:t.editorHandler(e)},mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.mousedownHandler(e))}}},[t.multiple?t._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeN,expression:"!isMouseDown || resizeN"}],staticClass:"editor-grip editor-grip-n",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeN_down_Handler(e))}}},[n("b")]),t.multiple?t._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeE,expression:"!isMouseDown || resizeE"}],staticClass:"editor-grip editor-grip-e",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeE_down_Handler(e))}}},[n("b")]),t.multiple?t._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeS,expression:"!isMouseDown || resizeS"}],staticClass:"editor-grip editor-grip-s",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeS_down_Handler(e))}}},[n("b")]),t.multiple?t._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeW,expression:"!isMouseDown || resizeW"}],staticClass:"editor-grip editor-grip-w",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeW_down_Handler(e))}}},[n("b")]),t.multiple?t._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeNW,expression:"!isMouseDown || resizeNW"}],staticClass:"editor-grip editor-grip-nw",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeNW_down_Handler(e))}}},[n("b")]),t.multiple?t._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeNE,expression:"!isMouseDown || resizeNE"}],staticClass:"editor-grip editor-grip-ne",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeNE_down_Handler(e))}}},[n("b")]),t.multiple?t._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeSE,expression:"!isMouseDown || resizeSE"}],staticClass:"editor-grip editor-grip-se",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeSE_down_Handler(e))}}},[n("b")]),t.multiple?t._e():n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.resizeSW,expression:"!isMouseDown || resizeSW"}],staticClass:"editor-grip editor-grip-sw",on:{mousedown:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.resizeSW_down_Handler(e))}}},[n("b")]),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isMouseDown||t.rotating,expression:"!isMouseDown || rotating"}],staticClass:"editor-rotator",style:{transform:"matrix("+t.transform.join(", ")+")"},on:{mousedown:function(e){return e.stopPropagation(),t.rotate_down_Handler(e)}}},[n("b",{ref:"rotate"},[n("svg",{staticClass:"vx",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#vx-rotate"}})]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.degShow,expression:"degShow"}],staticClass:"deg"},[t._v(t._s(t.rotate)+"")])])]),t.lock?n("i",{staticClass:"editor-grip-lock"},[n("b",[n("svg",{staticClass:"vx",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#vx-lock"}})])])]):t._e()]):t._e()])},tt=[],et=n("5530"),nt=29,rt=36,it={name:"vx-transform",mixins:[o["d"]],props:{selectedItem:{type:Array},active:{type:Boolean}},data:function(){return{logger:!1,dragging:!1,rotating:!1,degShow:!0,resizeN:!1,resizeS:!1,resizeE:!1,resizeW:!1,resizeSE:!1,resizeSW:!1,resizeNE:!1,resizeNW:!1,s:0,t:0,l:0,st:0,el:0,wl:0,width:0,left:0,top:0,height:0,sel:0,nel:0,nwl:0,swl:0,cx:0,cy:0,rotate:0,transform:[],editor:!1,isMouseDown:!1,isSelected:!1,fontSize:0,parentNode:""}},mounted:function(){var t=this;window.addEventListener("mouseup",(function(e){t.dragging=!1,t.rotating=!1,t.degShow=!1,t.resizeS=!1,t.resizeE=!1,t.resizeW=!1,t.resizeN=!1,t.resizeNE=!1,t.resizeSE=!1,t.resizeSW=!1,t.resizeNW=!1,t.logger&&(a["b"].setLogger(),t.logger=!1),t.isMouseDown=!1,t.isSelected&&(t.selected(e),t.$emit("group-select"),t.isSelected=!1),window.removeEventListener("mousemove",t.mouseMoveHandler),window.removeEventListener("mousemove",t.resizeS_move_Handler),window.removeEventListener("mousemove",t.resizeE_move_Handler),window.removeEventListener("mousemove",t.resizeW_move_Handler),window.removeEventListener("mousemove",t.resizeN_move_Handler),window.removeEventListener("mousemove",t.resizeSE_move_Handler),window.removeEventListener("mousemove",t.resizeNE_move_Handler),window.removeEventListener("mousemove",t.resizeNW_move_Handler),window.removeEventListener("mousemove",t.resizeSW_move_Handler),window.removeEventListener("mousemove",t.rotate_move_Handler)}))},computed:{zoom:function(){return a["a"].zoom()},layout:function(){return a["a"].layout()},selectWidget:function(){return a["a"].current()},type:function(){var t=this.selectWidget.id;return null==t||-1==t||"text"==this.layout.elements[t].type},widget:function(){var t=this.selectWidget.id;if(t<0)return{index:-1};var e=this.layout.elements[t];if(e){var n={w:e.width,h:e.height,l:e.left,t:e.top},r=e.transform||{a:1,b:0,c:0,d:1,tx:0,ty:0};return{transform:r,width:n.w,height:n.h,top:n.t,left:n.l,draggable:e.dragable,rotatable:e.rotatable,type:e.type,display:"block",index:t,editor:!1,fontSize:e.fontSize}}return null},styles:function(){return a["b"].setCutToolbar({top:this.widget.top,left:this.widget.left}),Object.prototype.hasOwnProperty.call(this.widget,"transform")?{width:this.widget.width*this.zoom+"px",height:this.widget.height*this.zoom+"px",transform:"matrix(1, 0, 0, 1, 0, 0)",display:this.widget.display}:{width:this.widget.width*this.zoom+"px",height:this.widget.height*this.zoom+"px",display:this.widget.display}},lock:function(){return void 0!==this.widget.index&&-1!==this.widget.index&&a["a"].layout().elements[this.widget.index].lock},cutable:function(){return!this.lock&&a["a"].cutable()},multiple:function(){return"group"===this.widget.type||this.selectedItem.length>0}},methods:{_mousedownHandler:function(){this.logger=!0,this.isMouseDown=!0},mousedownHandler:function(t){if(!this.lock&&!this.cutable){this.dragging=!0,this.isSelected=!0,this.l=t.clientX-t.target.offsetLeft,this.t=t.clientY-t.target.offsetTop;var e=Object(et["a"])({},this.widget);this.startTop=e.top,this.startLeft=e.left,window.addEventListener("mousemove",this.mouseMoveHandler)}},mouseMoveHandler:function(t){this.dragging&&(this.isSelected=!0,this._mousedownHandler(),this.$emit("move"),this.guider(this.widget.index),this.widget.left=(t.clientX-this.l)/this.zoom+this.startLeft,this.widget.top=(t.clientY-this.t)/this.zoom+this.startTop,a["b"].updateTransformPosition(this.widget.index,{left:this.widget.left*this.zoom,top:this.widget.top*this.zoom}))},resizeS_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeS=!0,this.st=t.clientY-t.target.offsetTop,window.addEventListener("mousemove",this.resizeS_move_Handler))},resizeS_move_Handler:function(t){this.resizeS&&(this.widget.height=(t.clientY-this.st+rt)/this.zoom,a["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom}))},resizeE_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeE=!0,this.el=t.clientX-t.target.offsetLeft,window.addEventListener("mousemove",this.resizeE_move_Handler))},resizeE_move_Handler:function(t){this.resizeE&&(this.widget.width=(t.clientX-this.el+nt)/this.zoom,a["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom}))},resizeW_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeW=!0,this.wl=t.clientX-t.target.offsetLeft,this.width=this.widget.width,this.left=this.widget.left,window.addEventListener("mousemove",this.resizeW_move_Handler))},resizeW_move_Handler:function(t){this.resizeW&&(this.widget.width=(this.width*this.zoom-(t.clientX-this.wl))/this.zoom,this.widget.left=(this.left*this.zoom+t.clientX-this.wl)/this.zoom,a["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,left:this.widget.left*this.zoom}))},resizeN_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeN=!0,this.nt=t.clientY-t.target.offsetTop,this.height=this.widget.height,this.top=this.widget.top,window.addEventListener("mousemove",this.resizeN_move_Handler))},resizeN_move_Handler:function(t){this.resizeN&&(this.widget.height=(this.height*this.zoom-(t.clientY-this.nt))/this.zoom,this.widget.top=(this.top*this.zoom+t.clientY-this.nt)/this.zoom,a["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,top:this.widget.top*this.zoom}))},resizeSE_down_Handler:function(t){this.parentNode=t.currentTarget.parentElement,this.lock||(this._mousedownHandler(),this.resizeSE=!0,this.sel=t.clientX-t.target.offsetLeft,window.addEventListener("mousemove",this.resizeSE_move_Handler))},resizeSE_move_Handler:function(t){if(this.resizeSE){this.widget.height=(this.widget.height*this.zoom+t.clientX-this.sel+rt-this.widget.width*this.zoom)/this.zoom,this.widget.width=(t.clientX-this.sel+rt)/this.zoom;var e=this.parentNode.parentElement.nextElementSibling,n=parseInt(e.style.height)/parseInt(e.style.fontSize);n<1.2?(this.widget.width=(t.clientX-this.sel+rt)/this.zoom*n,this.widget.fontSize=this.widget.height):this.widget.fontSize=this.widget.height/2.6,a["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,fontSize:this.widget.fontSize*this.zoom})}},resizeNE_down_Handler:function(t){console.log(this.widget),this.lock||(this._mousedownHandler(),this.resizeNE=!0,this.nel=t.clientX-t.target.offsetLeft,this.width=this.widget.width,this.height=this.widget.height,this.left=this.widget.left,this.top=this.widget.top,window.addEventListener("mousemove",this.resizeNE_move_Handler))},resizeNE_move_Handler:function(t){this.resizeNE&&(this.widget.width=(t.clientX-this.nel+nt)/this.zoom,this.widget.height=(this.height*this.zoom+t.clientX-this.nel+nt-this.width*this.zoom)/this.zoom,this.widget.top=(this.top*this.zoom-(t.clientX-this.nel+nt-this.width*this.zoom))/this.zoom,this.widget.fontSize=this.widget.height/2.6,a["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,left:this.widget.left*this.zoom,top:this.widget.top*this.zoom,fontSize:this.widget.fontSize*this.zoom}))},resizeSW_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeSW=!0,this.swl=t.clientX-t.target.offsetLeft,this.width=this.widget.width,this.height=this.widget.height,this.left=this.widget.left,this.top=this.widget.top,window.addEventListener("mousemove",this.resizeSW_move_Handler))},resizeSW_move_Handler:function(t){this.resizeSW&&(this.widget.width=(this.width*this.zoom-(t.clientX-this.swl))/this.zoom,this.widget.height=(this.height*this.zoom-(t.clientX-this.swl))/this.zoom,this.widget.left=(this.left*this.zoom+t.clientX-this.swl)/this.zoom,this.widget.fontSize=this.widget.height/2.6,a["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,left:this.widget.left*this.zoom,top:this.widget.top*this.zoom,fontSize:this.widget.fontSize*this.zoom}))},resizeNW_down_Handler:function(t){this.lock||(this._mousedownHandler(),this.resizeNW=!0,this.nwl=t.clientX-t.target.offsetLeft,this.width=this.widget.width,this.height=this.widget.height,this.left=this.widget.left,this.top=this.widget.top,window.addEventListener("mousemove",this.resizeNW_move_Handler))},resizeNW_move_Handler:function(t){this.resizeNW&&(this.widget.width=(this.width*this.zoom-(t.clientX-this.nwl))/this.zoom,this.widget.height=(this.height*this.zoom-(t.clientX-this.nwl))/this.zoom,this.widget.left=(this.left*this.zoom+t.clientX-this.nwl)/this.zoom,this.widget.top=(this.top*this.zoom+t.clientX-this.nwl)/this.zoom,this.widget.fontSize=this.widget.height/2.6,a["b"].updateWidgetSize(this.widget.index,"transform",{width:this.widget.width*this.zoom,height:this.widget.height*this.zoom,left:this.widget.left*this.zoom,top:this.widget.top*this.zoom,fontSize:this.widget.fontSize*this.zoom}))},rotate_down_Handler:function(){if(!this.lock){this._mousedownHandler(),this.degShow=!0,this.rotating=!0;var t=this.$refs.transform.getBoundingClientRect(),e=t.top,n=t.left,r=t.width,i=t.height;this.cx=window.pageXOffset+n+r/2,this.cy=window.pageYOffset+e+i/2,window.addEventListener("mousemove",this.rotate_move_Handler)}},rotate_move_Handler:function(t){if(this.rotating){var e=this.getMouseCoordinate(t),n=e.x,r=e.y,i=r-this.cy,o=n-this.cx;this.rotate=this._adsorptionRotate((this.getAngle(o,i)+90)%360);var s=this.rotate*Math.PI/180,u=Math.cos(s),c=Math.sin(s);this.widget.transform={a:u,b:c,c:-c,d:u,tx:this.widget.transform.tx,ty:this.widget.transform.ty},this.transform=[u,-c,c,u,-14,0],a["b"].updateTransformRotate(this.widget.index,this.widget.transform)}},editorHandler:function(){if(!this.lock)if(["text","threeText"].includes(this.widget.type))this.editor=!0,this.$emit("editor","edit",this.widget.index);else if(["image","mask"].includes(this.widget.type))this.$emit("editor","upload",this.widget.index);else if("group"===this.widget.type){var t=a["a"].current();if(-1!==t.index){var e=a["a"].layout().elements[this.widget.index];switch(e.elements[t.index].type){case"text":this.editor=!0,this.$emit("editor","edit",t.index,t.parent);break;case"threeText":this.editor=!0,this.$emit("editor","edit",t.index,t.parent)}}}},getMouseCoordinate:function(t){return{x:t.pageX||t.clientX+document.body.scrollLeft,y:t.pageY||t.clientY+document.body.scrollTop}},getAngle:function(t,e){var n=Math.atan2(e,t);return n=Math.round(180/Math.PI*n),n<0&&(n=360+n),n},_adsorptionRotate:function(t){return t>357?360:t<3?0:Math.abs(t-45)<3?45:Math.abs(t-90)<3?90:Math.abs(t-135)<3?135:Math.abs(t-180)<3?180:Math.abs(t-225)<3?225:Math.abs(t-270)<3?270:t}},watch:{"widget.index":function(){this.editor=!1}}},at=it,ot=Object(h["a"])(at,J,tt,!1,null,null,null),st=ot.exports,ut={name:"vx-shape",mixins:[o["d"]],props:{item:{type:Object},index:{type:Number}},components:{VxEditorText:Y["a"],VxEditorThreeText:U["a"],VxEditorImage:Z["a"],VxEditorGroup:Q["a"],VxEditorSvg:K["a"],VxTransform:st},computed:{selectedItem:function(){return a["a"].selectedItem()},active:function(){return this.selectWidget.id===this.index},elementStyles:function(){var t=this.item;return{overflow:t.hidden?"hidden":"visible",width:t.width*this.global.zoom+"px",height:t.height*this.global.zoom+"px",top:t.top*this.global.zoom+"px",left:t.left*this.global.zoom+"px",opacity:t.opacity,"z-index":"".concat(1e3)}},selectWidget:function(){return a["a"].current()},global:function(){return a["a"].global()},cutable:function(){return a["a"].cutable()},layout:function(){return a["a"].layout()},mulSelected:function(){return a["a"].mulSelected()}},data:function(){return{editor:-1,editorParent:-1,over:{},transformStyle:{},hoverStyle:{},choosedElement:""}},methods:{moveHandler:function(){this.$emit("move")},groupSelectHandler:function(){this.groupItemSelected="".concat(this.selectWidget.id,"-").concat(this.selectWidget.index)},editorHandler:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;"edit"===t?(this.editor=e,this.editorParent=n):this.$upload().then((function(t){a["b"].updateImg(n,e,t.data.url)})).catch((function(t){o["c"].danger(t)}))},selectWidgetHandler:function(t){var e=JSON.parse(t);window.localStorage.setItem("originIndex",JSON.stringify(e));var n=state.layout.elements[t].url;this.choosedElement=n,this.mulSelected||(this.editorParent=this.item.parent,this.contextmenuShow=!1,this.over=this.overlap(t),a["b"].setCutable(!1),a["b"].setCurrent({id:t,index:t,type:"widget",parent:this.item.parent,over:this.over}),this.transformHandler(t))},hoverHandler:function(t){console.log(23323);var e=this.layout.elements[t],n=e.transform||{a:0,b:0,c:0,tx:0,ty:0};this.$set(this,"hoverStyle",{transform:"matrix(".concat(n.a,",").concat(n.b,",").concat(n.c,",").concat(n.d,",").concat(n.tx,",").concat(n.ty,")"),width:e.width*a["a"].zoom()+"px",height:e.height*a["a"].zoom()+"px",top:e.top*a["a"].zoom()+"px",left:e.left*a["a"].zoom()+"px",display:"block"}),this.lock=e.lock},transformHandler:function(t){this.over=this.overlap(t);var e=this.layout.elements[t],n={w:e.width,h:e.height,l:e.left,t:e.top},r=e.transform||{a:1,b:0,c:0,d:1,tx:0,ty:0};this.$set(this,"transformStyle",{transform:r,width:n.w,height:n.h,top:n.t,left:n.l,draggable:e.dragable,rotatable:e.rotatable,type:e.type,display:"block",index:t,editor:!1})}}},ct=ut,lt=Object(h["a"])(ct,q,G,!1,null,null,null),ht=lt.exports,ft={name:"vx-canvas",mixins:[o["d"]],props:{success:{type:Boolean}},components:{VxShape:ht,VxEditorTipBar:d,VxEditorBg:g["a"],VxWaterMark:p["a"],VxEditorGuider:w,VxImageCut:R,VxToolbar:D,vxSelector:L,VxContextmenu:X},data:function(){return{transformStyle:{},timer:null,editor:-1,editorParent:-1,type:null,over:{},lock:!1,contextmenuTop:0,contextmenuleft:0,container:{y:99},contextmenuShow:!1,groupItemSelected:"",bghover:!1}},computed:{global:function(){return a["a"].global()},layout:function(){return a["a"].layout()},selectWidget:function(){return a["a"].current()},canvasStyles:function(){return{width:"".concat(this.layout.width*this.global.zoom,"px"),height:"".concat(this.layout.height*this.global.zoom,"px")}},cutable:function(){return a["a"].cutable()},mulSelected:function(){return a["a"].mulSelected()},selectedItem:function(){return a["a"].selectedItem()}},methods:{transformHandler:function(t){this.over=this.overlap(t);var e=this.layout.elements[t],n={w:e.width,h:e.height,l:e.left,t:e.top},r=e.transform||{a:1,b:0,c:0,d:1,tx:0,ty:0};this.$set(this,"transformStyle",{transform:r,width:n.w,height:n.h,top:n.t,left:n.l,draggable:e.dragable,rotatable:e.rotatable,type:e.type,display:"block",index:t,editor:!1})},addHoverHandler:function(){this.bghover=!0},clearHoverHandler:function(){this.bghover=!1,this.lock=!1},cleartransformHandler:function(){this.$set(this,"transformStyle",{}),this.editor=-1,this.editorParent=-1,this.over={},this.contextmenuShow=!1,this.groupItemSelected="",a["b"].setCutable(!1)},selectCanvasHandler:function(){this.cleartransformHandler(),a["b"].setCurrent({id:-1,type:"canvas"})},selectBgHandler:function(){this.cleartransformHandler(),a["b"].setCurrent({id:-1,type:"background"})},pointerRightDown:function(t){t.preventDefault(),this.contextmenuShow=!0;var e=t.pageY-this.container.y,n=t.pageX-this.container.x,r=this.container.height-e,i=this.container.width-n;r<200&&(e=-r),i<200&&(n=-i),this.contextmenuTop=e,this.contextmenuleft=n},getContainerSize:function(){var t=document.querySelector("#js-container").getBoundingClientRect();this.container=t}},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.timer&&(clearTimeout(t.timer),t.timer=null),t.timer=setTimeout((function(){var e=t.$refs.container;if(e){var n=e.clientHeight,r=e.clientWidth;n>0&&r>0&&t.updateZoom(n,r),t.getContainerSize()}}),100)})),setTimeout((function(){var e=t.$refs.container;if(e){var n=e.clientHeight,r=e.clientWidth;n>0&&r>0&&t.updateZoom(n,r),t.getContainerSize()}}),100)},watch:{success:function(t){var e=this;t&&setTimeout((function(){var t=e.$refs.container;if(t){var n=t.clientHeight,r=t.clientWidth;n>0&&r>0&&e.updateZoom(n,r),e.getContainerSize()}}),1)},"selectWidget.id":function(t){this.index=t,t>=0?(this.transformHandler(t),this.contextmenuShow=!1):this.cleartransformHandler()}}},dt=ft,gt=(n("96d1"),Object(h["a"])(dt,r,i,!1,null,"75b92a69",null)),pt=gt.exports,vt=n("9f05")},7037:function(t,e,n){function r(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?t.exports=r=function(t){return typeof t}:t.exports=r=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(e)}n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),t.exports=r},"7f78":function(t,e,n){var r=n("23e7"),i=n("825a"),a=n("e163"),o=n("e177");r({target:"Reflect",stat:!0,sham:!o},{getPrototypeOf:function(t){return a(i(t))}})},"81d5":function(t,e,n){"use strict";var r=n("7b0b"),i=n("23cb"),a=n("50c4");t.exports=function(t){var e=r(this),n=a(e.length),o=arguments.length,s=i(o>1?arguments[1]:void 0,n),u=o>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);while(c>s)e[s++]=t;return e}},8962:function(t,e,n){n("e439"),n("5d41");var r=n("9f70");function i(e,n,a){return"undefined"!==typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}},i(e,n,a||e)}t.exports=i},9192:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-text",class:{"editor-element-editing":t.editor},style:t.elementStyles,on:{mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.transfromHandler(e)}}},[n("div",{staticClass:"element-inner",style:t.innerStyle},[n("div",{staticClass:"element-inner-content",style:t.contentStyle},[n("div",{ref:"edit",staticClass:"element-main",style:t.mainStyles,attrs:{contenteditable:t.editor,id:"content"},domProps:{innerHTML:t._s(t.data.content)},on:{mousemove:function(t){t.stopPropagation()},input:t.changeHandler,blur:t.leaveInput}})])])])},i=[],a=(n("99af"),n("4160"),n("a15b"),n("a9e3"),n("38cf"),n("159b"),n("81ac")),o={name:"vx-editor-text",props:{data:{},value:String,zoom:{type:Number,default:0},index:Number,editor:Boolean,parent:{type:Number,default:-1}},computed:{layoutZoom:function(){return getter.zoom()},elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{overflow:(this.data.hidden,"visible"),transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:this.data.width*this.zoom+"px",height:this.data.height*this.zoom+"px",fontSize:this.data.fontSize*this.zoom+"px",top:this.data.top*this.zoom+"px",left:this.data.left*this.zoom+"px",opacity:this.data.opacity}},innerStyle:function(){return{textAlign:this.data.textAlign,lineHeight:this.data.lineHeight,width:this.data.width+"px",height:this.data.height+"px",transform:"scale(".concat(this.zoom,")")}},contentStyle:function(){return{writingMode:this.data.writingMode,height:this.data.height+"px"}},mainStyles:function(){var t={color:this.data.color,fontFamily:this.data.fontFamily,fontSize:this.data.fontSize+"px",lineHeight:this.data.fontSize+"px",verticalAlign:this.data.verticalAlign,maxWidth:"100%",height:"auto",fontStyle:this.data.fontStyle,fontWeight:this.data.fontWeight,textDecoration:this.data.textDecoration,display:"inline-block",wordWrap:"break-word",wordBreak:"break-all"};if(this.data.textEffects&&this.data.textEffects.length>0){var e=this.data.textEffects,n=null,r=null,i=null,a=null,o=null,s=null,u=null,c=null;e.forEach((function(t){if(t=e[0],t.filling.enable){if(0===t.filling.type&&(r="".concat(t.stroke.width,"px ").concat(t.stroke.color.substring(0,7))),1===t.filling.type){var l=t.filling.imageContent;i="transparent",a="url(".concat(l.image,")"),o="".concat(l.width*l.scaleX,"px ").concat(l.height*l.scaleY,"px"),s=1===l.repeat?"repeat":null,u="text",c="border-box"}if(2===t.filling.type){var h=t.filling.gradient,f=t.filling.imageContent;i="transparent";var d=["".concat(h.angle+90,"deg")];h.stops.forEach((function(t){d.push("".concat(t.color," ").concat(100*t.offset,"%"))})),a="linear-gradient(".concat(d.join(","),")"),s=1===f.repeat?"repeat":null,u="text"}}else i=null,a=null,o=null,s=null,u=null,c=null,r=null;n=t.shadow.enable?"".concat(t.shadow.color," ").concat(t.shadow.offsetX,"px ").concat(t.shadow.offsetY,"px ").concat(t.shadow.blur,"px"):null})),n&&(t["textShadow"]=n),r&&(t["-webkit-text-stroke"]=r),i&&(t["-webkit-text-fill-color"]=i),o&&(t["backgroundSize"]=o),a&&(t["backgroundImage"]=a),s&&(t["backgroundRepeat"]=s),u&&(t["-webkit-background-clip"]=u),c&&(t["backgroundOrigin"]=c)}return t},textStyles:function(){var t=null;return t&&(style["-webkit-text-fill-color"]=t),{color:this.data.color,fontFamily:this.data.fontFamily,fontSize:this.data.fontSize+"px",minHeight:this.data.height+"px",height:this.data.height+"px",fontStyle:this.data.fontStyle,fontWeight:this.data.fontWeight,textDecoration:this.data.textDecoration,filling:this.data.color}}},methods:{leaveInput:function(){console.log(this.elementStyles.top),this.elementStyles.top=this.data.top*this.zoom+"px"},changeHandler:function(){var t=this.$refs.edit;a["b"].updateCurrentEdit(!0),a["b"].changeSize(this.index,t.offsetWidth,t.offsetHeight)},hoverHandler:function(){this.$emit("event",{index:this.index,type:"hover",parent:this.parent})},transfromHandler:function(){this.$emit("event",{index:this.index,type:"transfrom",parent:this.parent,edit:this.editor}),a["b"].updateCurrentEdit(this.editor)}},watch:{editor:function(t){if(t){a["b"].updateCurrentEdit(!0);var e=this.$refs.edit;this.$nextTick((function(){if(window.getSelection){e.focus();var t=window.getSelection();t.selectAllChildren(e),t.collapseToEnd()}else if(document.selection){var n=document.selection.createRange();n.moveToElementText(e),n.collapse(!1),n.select()}})),e.innerText=this.data.content}else{var n=this.$refs.edit;this.data.content=n.innerText,this.$emit("input",n.innerText)}}}},s=o,u=(n("f7b6"),n("2877")),c=Object(u["a"])(s,r,i,!1,null,"46fa8298",null);e["a"]=c.exports},"944a":function(t,e,n){var r=n("746f");r("toStringTag")},9523:function(t,e){function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.exports=n},"96d1":function(t,e,n){"use strict";var r=n("3042"),i=n.n(r);i.a},"970b":function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=n},"98b8":function(t,e,n){(function(t){function e(t){return e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}n("a4d3"),n("e01a"),n("b636"),n("d28b"),n("944a"),n("4160"),n("fb6a"),n("b0c0"),n("0c47"),n("23dc"),n("3410"),n("131a"),n("d3b7"),n("25f0"),n("3ca3"),n("159b"),n("ddb0");var r=function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(D){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,a=Object.create(i.prototype),o=new T(r||[]);return a._invoke=C(t,n,o),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(D){return{type:"throw",arg:D}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",g="executing",p="completed",v={};function y(){}function m(){}function x(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,S=w&&w(w(M([])));S&&S!==r&&i.call(S,o)&&(b=S);var k=x.prototype=y.prototype=Object.create(b);function z(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,n){function r(a,o,s,u){var c=h(t[a],t,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"===e(f)&&i.call(f,"__await")?n.resolve(f.__await).then((function(t){r("next",t,s,u)}),(function(t){r("throw",t,s,u)})):n.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,u)}))}u(c.arg)}var a;function o(t,e){function i(){return new n((function(n,i){r(t,e,n,i)}))}return a=a?a.then(i,i):i()}this._invoke=o}function C(t,e,n){var r=f;return function(i,a){if(r===g)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return _()}n.method=i,n.arg=a;while(1){var o=n.delegate;if(o){var s=R(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=g;var u=h(t,e,n);if("normal"===u.type){if(r=n.done?p:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}function R(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=n,R(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=h(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function M(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){while(++r<t.length)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}return{next:_}}function _(){return{value:n,done:!0}}return m.prototype=k.constructor=x,x.constructor=m,m.displayName=c(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,c(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},z(P.prototype),P.prototype[s]=function(){return this},t.AsyncIterator=P,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new P(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},z(k),c(k,u,"Generator"),k[o]=function(){return this},k.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=M,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:M(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),v}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}}).call(this,n("62e4")(t))},"9b42":function(t,e,n){function r(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)if(n.push(o.value),e&&n.length===e)break}catch(u){i=!0,a=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw a}}return n}}n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),t.exports=r},"9ce7":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"design-app"}},[n("vx-menu",{on:{redo:t.redoHandler,undo:t.undoHandler}}),n("div",{staticClass:"design-main"},[n("vx-aside",{on:{add:t.addHandler}}),n("vx-canvas",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],attrs:{success:t.success}}),n("VxLoading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{msg:""}}),n("vx-config",{attrs:{data:t.selectWidget},on:{opDelete:t.deleteHandler,moveUp:t.moveUpHandler,moveDown:t.moveDownHandler,moveTop:t.moveTopHandler,moveBottom:t.moveBottomHandler}})],1)],1)},i=[],a=(n("99af"),n("4160"),n("a434"),n("b0c0"),n("d3b7"),n("159b"),n("96cf"),n("1da1")),o=n("81ac"),s=n("a10b"),u=n("6e7c"),c=n("4ec3"),l=n("b775");function h(t){return Object(l["d"])({url:"/resource/getfont?name="+t,method:"get"})}var f=function(){return n.e("chunk-a8d68416").then(n.bind(null,"047c"))},d=function(){return n.e("chunk-2d0c0d7f").then(n.bind(null,"4409"))},g=function(){return n.e("chunk-2d0e6c75").then(n.bind(null,"99cb"))},p={name:"vx-design-layout",mixins:[s["d"]],components:{VxAside:d,VxMenu:f,VxCanvas:u["a"],VxConfig:g},data:function(){return{panelShow:-1,id:this.$route.params.id,loading:!1,designModel:this.$route.query.designModel,success:!1}},computed:{isShow:function(){return-1!==this.panelShow},selectWidget:function(){return o["a"].current()},elements:function(){return o["a"].layout().elements}},created:function(){document.addEventListener("keydown",this.handleEvent)},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("new"==t.id){e.next=13;break}if(t.loading=!0,"user"!=t.designModel){e.next=8;break}return o["b"].setId(t.id),e.next=6,Object(c["h"])(t.id).then(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.data.detail=JSON.parse(n.data.detail),n.data.detail.global.showWatermark=!0,e.next=4,o["b"].setTemplate(n.data.detail,t.id);case 4:return e.next=6,t.loadFontHandler(n.data.detail.layout);case 6:o["b"].setTitle(n.data.name),t.loading=!1;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){s["c"].danger(t)}));case 6:e.next=10;break;case 8:return e.next=10,t.$axios.get(s["a"].TEMPLATE_API,{params:{id:t.id,type:"template"}}).then(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.data.info.detail=JSON.parse(n.data.info.detail),n.data.info.detail.global.showWatermark=!0,e.next=4,o["b"].setTemplate(n.data.info.detail,t.id);case 4:if(void 0!=n.data.info.detail.layouts){e.next=9;break}return e.next=7,t.loadFontHandler(n.data.info.detail.layout);case 7:e.next=11;break;case 9:return e.next=11,t.loadFontHandler(n.data.info.detail.layouts[0]);case 11:o["b"].setTitle(n.data.info.name),r=o["a"].canvasW(),i=o["a"].canvasH(),o["b"].setoriginal(r,i),t.loading=!1;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){s["c"].danger(t)}));case 10:t.adaptScreen(),e.next=14;break;case 13:"new"==t.id&&(o["b"].resetLayout(),t.loading=!1);case 14:0==o["a"].layout().elements.length&&o["b"].resetCurrent(),t.success=!0;case 16:case"end":return e.stop()}}),e)})))()},methods:{loadFontHandler:function(t){var e=this;t.elements&&t.elements.length>0&&t.elements.forEach((function(t){"text"===t.type&&h(t.fontFamily).then((function(t){t.data&&t.data.info&&e.setFontStyle(t.data.info)}))}))},setFontStyle:function(t){var e=document.createElement("style");e.type="text/css",e.innerText="@font-face {font-family:".concat(t.name,";src:url(").concat(t.detail,")}"),document.getElementsByTagName("head")[0].appendChild(e)},handleEvent:function(t){return 46===t.keyCode||8===t.keyCode?(-1==this.selectWidget.id||this.selectWidget.edit||(o["c"].layout.elements.splice(this.selectWidget.index,1),this.deleteHandler(),t.preventDefault(),t.returnValue=!1),!1):67===t.keyCode&&t.ctrlKey?(o["b"].copyEvent(),t.preventDefault(),t.returnValue=!1,!1):86===t.keyCode&&t.ctrlKey?(o["b"].pasteEvent(),t.preventDefault(),t.returnValue=!1,!1):88===t.keyCode&&t.ctrlKey?(o["b"].cutEvent(),this.deleteHandler(),t.preventDefault(),t.returnValue=!1,!1):90===t.keyCode&&t.ctrlKey?(o["b"].setUndo(),this.deleteHandler(),t.preventDefault(),t.returnValue=!1,!1):89===t.keyCode&&t.ctrlKey?(this.redoHandler(),this.deleteHandler(),t.preventDefault(),t.returnValue=!1,!1):void 0},hidePanelHandler:function(){this.togglePanelHandler(-1)},togglePanelHandler:function(t){t===this.panelShow?this.panelShow=-1:this.panelShow=t},undoHandler:function(){o["b"].setUndo()},redoHandler:function(){o["b"].setRedo()},deleteHandler:function(){var t={type:"canvas",id:-1};o["b"].setCurrent(t)},moveUpHandler:function(){var t=this.selectWidget.over.up;if(t.length>0){var e=t.shift();o["b"].moveUp(this.selectWidget.id,e)}},moveDownHandler:function(){var t=this.selectWidget.over.down;if(t.length>0){var e=t.pop();o["b"].moveDown(this.selectWidget.id,e)}},moveTopHandler:function(){o["b"].moveTop(this.selectWidget.id)},moveBottomHandler:function(){o["b"].moveBottom(this.selectWidget.id)},addHandler:function(t){o["b"].setCurrent({id:t.id,type:t.type})}}},v=p,y=n("2877"),m=Object(y["a"])(v,r,i,!1,null,null,null);e["default"]=m.exports},"9f05":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"design-container",class:[t.type]},[n("div",{staticClass:"design-canvas",style:t.canvasStyles},[n("div",{staticClass:"editor-shell",style:t.canvasStyles},[n("div",{staticClass:"editor-canvas",attrs:{id:"canvas"}},[n("div",{staticClass:"editor-layout"},[[n("vx-Editor-bg",{attrs:{w:t.bgW,h:t.bgH,zoom:t.zoom,bgColor:t.bgColor,bgImg:t.bgImg,bgImgInfo:t.bgImgInfo,bgSize:t.bgSize}})],n("vx-water-mark"),t._l(t.layout.elements,(function(e,r){return["text"===e.type?n("vx-editor-text",{key:e.id,attrs:{index:r,zoom:t.zoom,data:e},on:{"update:data":function(t){e=t}}}):t._e(),["image","mask"].includes(e.type)?n("vx-editor-image",{key:e.id,attrs:{zoom:t.zoom,index:r,data:e},on:{"update:data":function(t){e=t}}}):t._e(),["svg"].includes(e.type)?n("vx-editor-svg",{directives:[{name:"show",rawName:"v-show",value:"print"!==t.type,expression:"type !== 'print'"}],key:e.id,ref:"svg",refInFor:!0,attrs:{zoom:t.zoom,index:r,data:e},on:{"update:data":function(t){e=t}}}):t._e(),"group"===e.type?n("vx-editor-group",{key:e.id,ref:"group",refInFor:!0,attrs:{zoom:t.zoom,index:r,data:e,type:t.type},on:{"update:data":function(t){e=t}}}):t._e()]}))],2)])])])])},i=[],a=(n("4160"),n("caad"),n("a9e3"),n("d3b7"),n("498a"),n("159b"),n("96cf"),n("1da1")),o=n("81ac"),s=n("b5ed"),u=(n("99af"),n("ac1f"),n("466d"),n("5319"),function(){var t=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:!!e,imageData:!!e.getImageData,dataURL:!!t.toDataURL,btoa:!!window.btoa}}(),e="image/octet-stream";function n(t,e,n){var r=t.width,i=t.height;void 0==e&&(e=r),void 0==n&&(n=i);var a=document.createElement("canvas"),o=a.getContext("2d");return a.width=e,a.height=n,o.drawImage(t,0,0,r,i,0,0,e,n),a}function r(t,e,r,i){return t=n(t,r,i),t.toDataURL(e)}function i(t){document.location.href=t}function a(t){var e=document.createElement("img");return e.src=t,e}function o(t){t=t.toLowerCase().replace(/jpg/i,"jpeg");var e=t.match(/png|jpeg|bmp|gif/)[0];return"image/"+e}function s(t){if(!window.btoa)throw"btoa undefined";var e="";if("string"==typeof t)e=t;else for(var n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function u(t){var e=t.width,n=t.height;return t.getContext("2d").getImageData(0,0,e,n)}function c(t,e){return"data:"+e+";base64,"+t}var l=function(t){var e=t.width,n=t.height,r=e*n*3,i=r+54,a=[66,77,255&i,i>>8&255,i>>16&255,i>>24&255,0,0,0,0,54,0,0,0],o=[40,0,0,0,255&e,e>>8&255,e>>16&255,e>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,1,0,24,0,0,0,0,0,255&r,r>>8&255,r>>16&255,r>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=(4-3*e%4)%4,c=t.data,l="",h=e<<2,f=n,d=String.fromCharCode;do{for(var g=h*(f-1),p="",v=0;v<e;v++){var y=v<<2;p+=d(c[g+y+2])+d(c[g+y+1])+d(c[g+y])}for(var m=0;m<u;m++)p+=String.fromCharCode(0);l+=p}while(--f);var x=s(a.concat(o))+s(l);return x},h=function(a,s,h,f){if(t.canvas&&t.dataURL)if("string"==typeof a&&(a=document.getElementById(a)),void 0==f&&(f="png"),f=o(f),/bmp/.test(f)){var d=u(n(a,s,h)),g=l(d);i(c(g,e))}else{var p=r(a,f,s,h);i(p.replace(f,e))}},f=function(e,i,s,h){if(t.canvas&&t.dataURL){if("string"==typeof e&&(e=document.getElementById(e)),void 0==h&&(h="png"),h=o(h),/bmp/.test(h)){var f=u(n(e,i,s)),d=l(f);return a(c(d,"image/bmp"))}var g=r(e,h,i,s);return a(g)}};return{saveAsImage:h,saveAsPNG:function(t,e,n){return h(t,e,n,"png")},saveAsJPEG:function(t,e,n){return h(t,e,n,"jpeg")},saveAsGIF:function(t,e,n){return h(t,e,n,"gif")},saveAsBMP:function(t,e,n){return h(t,e,n,"bmp")},convertToImage:f,convertToPNG:function(t,e,n){return f(t,e,n,"png")},convertToJPEG:function(t,e,n){return f(t,e,n,"jpeg")},convertToGIF:function(t,e,n){return f(t,e,n,"gif")},convertToBMP:function(t,e,n){return f(t,e,n,"bmp")}}}()),c=u,l=n("b2ba"),h=n("9192"),f=n("fd31"),d=n("491c"),g=n("1242"),p=n("0d73"),v={name:"vx-canvas-preview",props:{height:Number,width:Number,w:Number,h:Number,print:{type:Boolean,default:!1},type:{validator:function(t){return["preview","print"].includes(t)},default:"preview"}},components:{VxEditorBg:l["a"],VxEditorText:h["a"],VxEditorImage:f["a"],VxEditorGroup:d["a"],VxEditorSvg:g["a"],VxWaterMark:s["a"]},data:function(){return{hoverStyle:{},transformStyle:{},output:null,timer:null,size:0,zoom:"print"===this.type?1:0}},computed:{layoutZoom:function(){return o["a"].zoom()},global:function(){return o["a"].global()},layout:function(){return o["a"].layout()},canvasStyles:function(){return"preview"===this.type?{width:"".concat(this.w*this.size,"px"),height:"".concat(this.h*this.size,"px")}:"print"===this.type?{width:"".concat(this.layout.width*this.zoom,"px"),height:"".concat(this.layout.height*this.zoom,"px")}:{}},canvasW:function(){return this.w*this.size},canvasH:function(){return this.h*this.size},bgW:function(){return this.layout.width*this.zoom},bgH:function(){return this.layout.height*this.zoom},bgColor:function(){return this.layout.backgroundColor||"#fff"},bgImg:function(){return this.layout.backgroundImage},bgImgInfo:function(){return this.layout.backgroundImageInfo},bgSize:function(){return this.layout.backgroundSize}},mounted:function(){"preview"===this.type&&this.updateSizeHandler()},methods:{updateSizeHandler:function(){var t=this.width/this.w,e=this.height/this.h;this.size=t>e?e:t,this.updateZoomHandler()},updateZoomHandler:function(){var t=this.canvasW/this.layout.width,e=this.canvasH/this.layout.height;this.zoom=t>e?e:t},printImageHandler:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=document.querySelector("#canvas"),t.$refs.svg&&t.$refs.svg.length>0&&t.$refs.svg.forEach((function(e){t.svgHandler(n,e)})),t.$refs.group&&t.$refs.group.length>0&&t.$refs.group.forEach((function(e){e.data.elements&&e.data.elements.length>0&&e.data.elements.forEach((function(r){"svg"===r.type&&t.svgHandler(n,r,e.index,e.data.top,e.data.left)}))})),"print"!==t.type){e.next=10;break}return r={type:"dataURL",logging:!1,scale:1,allowTaint:!1,scrollY:0,taintTest:!0,useCORS:!0,backgroundColor:null},e.next=7,t.$html2canvas(n,r).then((function(t){return t}));case 7:return e.abrupt("return",e.sent);case 10:throw new Error("");case 11:case"end":return e.stop()}}),e)})))()},getSvgHandler:function(t){var e=this;return new Promise((function(n,r){e.$axios.get(t,{}).then((function(t){n(t)})).catch((function(t){r(t)}))}))},svgHandler:function(t,e,n,r,i){var s=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var u,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(u="",c=document.createElement("canvas"),!e.html){a.next=13;break}u=e.html.trim(),c.style.position="absolute",c.style.left=e.data.left+"px",c.style.top=e.data.top+"px",c.style.width=e.data.width+"px",c.style.height=e.data.height+"px",o["c"].layout.elements[e.index],c.style.zIndex=e.index,a.next=33;break;case 13:if(!e.content){a.next=24;break}u=e.content.trim(),c.style.position="absolute",c.style.left=i+"px",c.style.top=r+"px",c.style.width=e.width+"px",c.style.height=e.height+"px",o["c"].layout.elements[e.index],c.style.zIndex=n,a.next=33;break;case 24:return a.next=26,s.getSvgHandler(e.url).then((function(t){u=t.trim()}));case 26:c.style.position="absolute",c.style.left=i+"px",c.style.top=r+"px",c.style.width=e.width+"px",c.style.height=e.height+"px",o["c"].layout.elements[e.index],c.style.zIndex=n;case 33:Object(p["a"])(c,u),t.appendChild(c),c=null;case 36:case"end":return a.stop()}}),a)})))()},downLoad:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var i,a,o,s,u,l,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=1,"PNG"==t?i=1:"JPG"==t&&(i=e),a=document.querySelector("#canvas"),n.$refs.svg&&n.$refs.svg.length>0&&n.$refs.svg.forEach((function(t){n.svgHandler(a,t)})),n.$refs.group&&n.$refs.group.length>0&&n.$refs.group.forEach((function(t){t.data.elements&&t.data.elements.length>0&&t.data.elements.forEach((function(e){"svg"===e.type&&n.svgHandler(a,e,t.index,t.data.top,t.data.left)}))})),o=a.offsetWidth,s=a.offsetHeight,u=document.createElement("canvas"),l=i,u.width=o*l,u.height=s*l,u.getContext("2d").scale(l,l),h={scale:l,canvas:u,logging:!1,width:o,height:s,useCORS:!0},r.next=15,n.$html2canvas(a,h).then((function(e){var n=e.getContext("2d");if(n.mozImageSmoothingEnabled=!1,n.webkitImageSmoothingEnabled=!1,n.msImageSmoothingEnabled=!1,n.imageSmoothingEnabled=!1,"PNG"==t){var r=c.convertToPNG(e,e.width,e.height);return r.src}var i=c.convertToJPEG(e,e.width,e.height);return i.src}));case 15:return r.abrupt("return",r.sent);case 16:case"end":return r.stop()}}),r)})))()}},watch:{w:function(){"preview"===this.type&&this.updateSizeHandler()},h:function(){"preview"===this.type&&this.updateSizeHandler()}}},y=v,m=n("2877"),x=Object(m["a"])(y,r,i,!1,null,null,null);e["default"]=x.exports},"9f70":function(t,e,n){var r=n("36c6");function i(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=r(t),null===t)break;return t}t.exports=i},a34a:function(t,e,n){t.exports=n("98b8")},a45d:function(t,e,n){},a623:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").every,a=n("a640"),o=n("ae40"),s=a("every"),u=o("every");r({target:"Array",proto:!0,forced:!s||!u},{every:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},a6fd:function(t,e,n){var r=n("23e7"),i=n("d066"),a=n("1c0b"),o=n("825a"),s=n("d039"),u=i("Reflect","apply"),c=Function.apply,l=!s((function(){u((function(){}))}));r({target:"Reflect",stat:!0,forced:l},{apply:function(t,e,n){return a(t),o(n),u?u(t,e,n):c.call(t,e,n)}})},ac16:function(t,e,n){var r=n("23e7"),i=n("825a"),a=n("06cf").f;r({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=a(i(t),e);return!(n&&!n.configurable)&&delete t[e]}})},ac50:function(t,e,n){t.exports=n.p+"img/waterMark.91de0c77.png"},b2ba:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-background",style:t.backStyle,on:{click:function(e){return e.stopPropagation(),t.selectHandler(e)}}},[n("div",{staticClass:"editor-background__main",style:t.mainStyle},[t.bgImg?n("img",{style:t.imgStyle,attrs:{src:t.bgImg}}):t._e()])])},i=[],a=(n("99af"),n("a9e3"),n("81ac")),o={name:"vx-editor-bg",props:{zoom:{type:Number}},computed:{w:function(){return a["a"].layout().width*a["a"].global().zoom},h:function(){return a["a"].layout().height*a["a"].global().zoom},widget:function(){return a["a"].cutImage()},cutZoom:function(){return a["a"].cutZoom()/100},layoutZoom:function(){return a["a"].zoom()},bgColor:function(){return a["a"].layout().backgroundColor},bgImg:function(){return a["a"].layout().backgroundImage},bgImgInfo:function(){return a["a"].layout().backgroundImageInfo},bgSize:function(){return a["a"].layout().backgroundSize},bgPosition:function(){return a["a"].layout().backgroundPosition},mainStyle:function(){var t={};return this.bgImgInfo&&(t.left="".concat(this.bgImgInfo.left,"px"),t.top="".concat(this.bgImgInfo.top,"px"),t.width="".concat(this.bgImgInfo.width*this.cutZoom*this.zoom,"px"),t.height="".concat(this.bgImgInfo.height*this.cutZoom*this.zoom,"px")),t},backStyle:function(){var t={};t.backgroundColor=this.bgColor;var e=this.bgImgInfo&&this.bgImgInfo.transform||{a:0,b:0,c:0,tx:0,ty:0};return t.transform="matrix(".concat(e.a,",").concat(e.b,",").concat(e.c,",").concat(e.d,",").concat(e.tx,",").concat(e.ty,")"),t},imgStyle:function(){var t={opacity:this.bgImgInfo.opacity};return console.log(this.bgImgInfo),console.log(state.cutInfo.zoom),t.width="".concat(this.bgImgInfo.width*this.cutZoom*this.zoom*state.cutInfo.zoom/100,"px"),t.height="".concat(this.bgImgInfo.height*this.cutZoom*this.zoom*state.cutInfo.zoom/100," px"),t}},methods:{selectHandler:function(){this.$emit("select")}}},s=o,u=n("2877"),c=Object(u["a"])(s,r,i,!1,null,null,null);e["a"]=c.exports},b5ed:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showWatermark?t._e():n("div",{staticClass:"editor-watermark",style:t.styles},[n("img",{ref:"image",attrs:{src:t.url}})])},i=[],a=n("81ac"),o={name:"vx-water-mark",data:function(){return{url:n("ac50")}},computed:{showWatermark:function(){return a["a"].global().showWatermark},zoom:function(){return a["a"].global().zoom},w:function(){return a["a"].layout().width},h:function(){return a["a"].layout().height},styles:function(){var t=0;return t=this.w>=this.h?this.h/this.w/3:this.w/this.h/3,{width:"".concat(642*t,"px"),right:"".concat(10,"px"),height:"auto",bottom:"".concat(0,"px"),"z-index":"3000"}}}},s=o,u=n("2877"),c=Object(u["a"])(s,r,i,!1,null,null,null);e["a"]=c.exports},b636:function(t,e,n){var r=n("746f");r("asyncIterator")},bb2f:function(t,e,n){var r=n("d039");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c135:function(t,e){function n(t){if(Array.isArray(t))return t}t.exports=n},c240:function(t,e){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n},c449:function(t,e,n){(function(e){for(var r=n("6d08"),i="undefined"===typeof window?e:window,a=["moz","webkit"],o="AnimationFrame",s=i["request"+o],u=i["cancel"+o]||i["cancelRequest"+o],c=0;!s&&c<a.length;c++)s=i[a[c]+"Request"+o],u=i[a[c]+"Cancel"+o]||i[a[c]+"CancelRequest"+o];if(!s||!u){var l=0,h=0,f=[],d=1e3/60;s=function(t){if(0===f.length){var e=r(),n=Math.max(0,d-(e-l));l=n+e,setTimeout((function(){var t=f.slice(0);f.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(l)}catch(n){setTimeout((function(){throw n}),0)}}),Math.round(n))}return f.push({handle:++h,callback:t,cancelled:!1}),h},u=function(t){for(var e=0;e<f.length;e++)f[e].handle===t&&(f[e].cancelled=!0)}}t.exports=function(t){return s.call(i,t)},t.exports.cancel=function(){u.apply(i,arguments)},t.exports.polyfill=function(t){t||(t=i),t.requestAnimationFrame=s,t.cancelAnimationFrame=u}}).call(this,n("c8ba"))},c8d2:function(t,e,n){var r=n("d039"),i=n("5899"),a="";t.exports=function(t){return r((function(){return!!i[t]()||a[t]()!=a||i[t].name!==t}))}},c973:function(t,e,n){function r(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function s(t){r(o,i,a,s,u,"next",t)}function u(t){r(o,i,a,s,u,"throw",t)}s(void 0)}))}}n("d3b7"),t.exports=i},cb29:function(t,e,n){var r=n("23e7"),i=n("81d5"),a=n("44d2");r({target:"Array",proto:!0},{fill:i}),a("fill")},d58f:function(t,e,n){var r=n("1c0b"),i=n("7b0b"),a=n("44ad"),o=n("50c4"),s=function(t){return function(e,n,s,u){r(n);var c=i(e),l=a(c),h=o(c.length),f=t?h-1:0,d=t?-1:1;if(s<2)while(1){if(f in l){u=l[f],f+=d;break}if(f+=d,t?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:h>f;f+=d)f in l&&(u=n(u,l[f],f,c));return u}};t.exports={left:s(!1),right:s(!0)}},dbb4:function(t,e,n){var r=n("23e7"),i=n("83ab"),a=n("56ef"),o=n("fc6a"),s=n("06cf"),u=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=o(t),i=s.f,c=a(r),l={},h=0;while(c.length>h)n=i(r,e=c[h++]),void 0!==n&&u(l,e,n);return l}})},e439:function(t,e,n){var r=n("23e7"),i=n("d039"),a=n("fc6a"),o=n("06cf").f,s=n("83ab"),u=i((function(){o(1)})),c=!s||u;r({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(t,e){return o(a(t),e)}})},ed6d:function(t,e,n){var r=n("4a4b");function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}t.exports=i},f183:function(t,e,n){var r=n("d012"),i=n("861d"),a=n("5135"),o=n("9bf2").f,s=n("90e3"),u=n("bb2f"),c=s("meta"),l=0,h=Object.isExtensible||function(){return!0},f=function(t){o(t,c,{value:{objectID:"O"+ ++l,weakData:{}}})},d=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,c)){if(!h(t))return"F";if(!e)return"E";f(t)}return t[c].objectID},g=function(t,e){if(!a(t,c)){if(!h(t))return!0;if(!e)return!1;f(t)}return t[c].weakData},p=function(t){return u&&v.REQUIRED&&h(t)&&!a(t,c)&&f(t),t},v=t.exports={REQUIRED:!1,fastKey:d,getWeakData:g,onFreeze:p};r[c]=!0},f7b6:function(t,e,n){"use strict";var r=n("a45d"),i=n.n(r);i.a},fd31:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-element editor-element-image",style:t.elementStyles,on:{mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.transfromHandler(e)}}},[n("div",{staticClass:"element-main",style:t.mainStyles},[n("img",{directives:[{name:"show",rawName:"v-show",value:!t.cutable,expression:"!cutable"}],style:t.imageStyles,attrs:{draggable:"false",src:t.data.url}})]),n("i",{staticClass:"border-before"})])},i=[],a=(n("99af"),n("a15b"),n("a9e3"),{name:"vx-editor-image",props:{data:{},zoom:{type:Number,default:0},index:Number,parent:{type:Number,default:-1},cutable:{type:Boolean,default:!1}},computed:{elementStyles:function(){var t=this.data.transform||{a:0,b:0,c:0,tx:0,ty:0};return{opacity:this.data.opacity,transform:"matrix(".concat(t.a,",").concat(t.b,",").concat(t.c,",").concat(t.d,",").concat(t.tx,",").concat(t.ty,")"),width:this.data.width*this.zoom+"px",height:this.data.height*this.zoom+"px",top:this.data.top*this.zoom+"px",left:this.data.left*this.zoom+"px"}},mainStyles:function(){return{borderRadius:this.data.borderRadius,overflow:this.data.hidden?"hidden":"visible",opacity:this.data.opacity,padding:this.data.padding.join("px ")}},imageStyles:function(){var t=this.data.clip||{},e={position:"absolute",top:(t.top||0)+"px",left:(t.left||0)+"px",width:(t.width||this.data.width)*this.zoom+"px",height:(t.height||this.data.height)*this.zoom+"px",display:"none"};return e}},methods:{hoverHandler:function(){this.$emit("event",{index:this.index,type:"hover",editable:!1,parent:this.parent})},transfromHandler:function(){this.$emit("event",{index:this.index,type:"transfrom",editable:!0,parent:this.parent})}}}),o=a,s=n("2877"),u=Object(s["a"])(o,r,i,!1,null,null,null);e["a"]=u.exports}}]);