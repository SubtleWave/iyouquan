(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf044ef4"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"63e6":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"design-resource"},[e.$slots.label?a("div",{staticClass:"design-resource__label"},[e._t("label")],2):e._e(),a("div",{staticClass:"design-resource__content"},[e._t("default")],2)])},i=[],n={name:"vx-resource"},s=n,l=a("2877"),c=Object(l["a"])(s,r,i,!1,null,null,null);t["a"]=c.exports},"841c":function(e,t,a){"use strict";var r=a("d784"),i=a("825a"),n=a("1d80"),s=a("129f"),l=a("14c3");r("search",1,(function(e,t,a){return[function(t){var a=n(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](String(a))},function(e){var r=a(t,e,this);if(r.done)return r.value;var n=i(e),c=String(this),o=n.lastIndex;s(o,0)||(n.lastIndex=0);var u=l(n,c);return s(n.lastIndex,o)||(n.lastIndex=o),null===u?-1:u.index}]}))},baa5:function(e,t,a){var r=a("23e7"),i=a("e58c");r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},dc77:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vx-template",{staticClass:"design-resource-template",scopedSlots:e._u([{key:"label",fn:function(){return[a("vx-icon",{attrs:{name:"menu"}}),a("h2",[e._v("模板")])]},proxy:!0}])},[[a("el-input",{staticClass:"design-resource-templet__input__search",attrs:{size:"large",placeholder:"搜索模板","prefix-icon":"el-icon-search"},on:{focus:e.focusHandler,change:e.inputHandler,blur:e.searchHandler},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchHandler(t)}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),a("div",{staticClass:"design-resource__scroll__content"},[a("div",{staticClass:"design-resource__scroll__waterfall"},[a("ul",{staticClass:"design-resource-templet__list"},e._l(e.templateList[1],(function(t,r){return a("li",{key:r,staticClass:"design-resource-templet__list__item",style:{height:e.width*e.getQueryVariable("height",t.picUrl)/e.getQueryVariable("width",t.picUrl)+"px"},on:{click:function(a){return e.selectHandler(t.id)}}},[a("div",{style:{backgroundColor:e.getQueryVariable("color",t.picUrl),width:"100%",height:"100%",borderRadius:"4px"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.picUrl,expression:"item.picUrl"}]})])])})),0),a("ul",{ref:"list",staticClass:"design-resource-templet__list"},e._l(e.templateList[0],(function(t,r){return a("li",{key:r,staticClass:"design-resource-templet__list__item",style:{height:e.width*e.getQueryVariable("height",t.picUrl)/e.getQueryVariable("width",t.picUrl)+"px"},on:{click:function(a){return e.selectHandler(t.id)}}},[a("div",{style:{backgroundColor:e.getQueryVariable("color",t.picUrl),width:"100%",height:"100%",borderRadius:"4px"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.picUrl,expression:"item.picUrl"}]})])])})),0)]),e.loading?a("VxLoading"):e._e(),e.noMore?a("p",{staticClass:"nomore-text"},[e._v("已全部加载完")]):e._e(),a("div",{staticClass:"load-bottom",attrs:{id:"template-bottom"}})],1)]],2)},i=[],n=(a("baa5"),a("d81d"),a("b0c0"),a("ac1f"),a("841c"),a("1276"),a("96cf"),a("1da1")),s=a("81ac"),l=a("63e6"),c=a("a10b"),o={name:"vx-design-template",mixins:[c["d"]],components:{VxTemplate:l["a"]},data:function(){return{query:"",templateList:[[],[]],loading:!0,pageNum:1,totalPages:2,search:!1,width:150,h1:0,h2:0,watermark:s["a"].global().showWatermark,originData:[]}},computed:{noMore:function(){return this.pageNum>this.totalPages}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.scrollData();case 2:e.getDataHandler();case 3:case"end":return t.stop()}}),t)})))()},methods:{getQueryVariable:function(e,t){for(var a=t.lastIndexOf("?"),r=t.substring(a+1,t.length),i=r.split("&"),n=0;n<i.length;n++){var s=i[n].split("=");if(s[0]==e)return s[1]}return!1},focusHandler:function(){s["b"].updateCurrentEdit(!0)},scrollData:function(){var e=this,t=new IntersectionObserver((function(t){var a=t[0];a.isIntersecting&&(e.noMore||e.getDataHandler())}));t.observe(document.getElementById("template-bottom"))},inputHandler:function(){this.search=!0},searchHandler:function(){s["b"].updateCurrentEdit(!1),this.search&&(this.pageNum=1,this.templateList=[[],[]],this.h1=this.h2=0,this.getDataHandler(),this.search=!1)},getDataHandler:function(){var e=this;this.loading=!0;var t={page:this.pageNum,limit:20,category_id:0,keyword:this.query,sort:""};this.$axios.get(c["a"].SEARCH_API,{params:t}).then((function(t){e.totalPages=t.data.pages,e.loading=!1,t.data.list.map((function(t){var a=e.width*e.getQueryVariable("height",t.picUrl)/e.getQueryVariable("width",t.picUrl);e.h1>=e.h2?(e.h2=e.h2+a,e.templateList[1].push(t)):(e.h1=e.h1+a,e.templateList[0].push(t))})),e.pageNum++})).catch((function(e){c["c"].danger(e)}))},selectHandler:function(e){var t=this;s["b"].setWaterMask(this.watermark),this.$axios.get(c["a"].TEMPLATE_API,{params:{id:e,type:"template"}}).then((function(a){s["b"].setTemplate(JSON.parse(a.data.info.detail),e),s["b"].setTitle(a.data.info.name),t.$emit("select"),t.adaptScreen();var r=JSON.parse(a.data.info.detail);window.localStorage.setItem("originData",JSON.stringify(r))})).catch((function(e){c["c"].danger(e)}))}}},u=o,d=a("2877"),h=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=h.exports},e58c:function(e,t,a){"use strict";var r=a("fc6a"),i=a("a691"),n=a("50c4"),s=a("a640"),l=a("ae40"),c=Math.min,o=[].lastIndexOf,u=!!o&&1/[1].lastIndexOf(1,-0)<0,d=s("lastIndexOf"),h=l("indexOf",{ACCESSORS:!0,1:0}),p=u||!d||!h;e.exports=p?function(e){if(u)return o.apply(this,arguments)||0;var t=r(this),a=n(t.length),s=a-1;for(arguments.length>1&&(s=c(s,i(arguments[1]))),s<0&&(s=a+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:o}}]);